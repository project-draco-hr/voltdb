{
  String clientConnectionKeyBase=getClientConnectionKeyBase(servers,port,user,password,isHeavyWeight,maxOutstandingTxns);
  String clientConnectionKey=clientConnectionKeyBase;
  int cnt=1;
  lock.lock();
  try {
    while (ClientConnections.containsKey(clientConnectionKey)) {
      if (ClientConnections.get(clientConnectionKey).Users >= MAX_USERS_PER_CLIENT)       clientConnectionKey+="::" + cnt++;
 else       break;
    }
    if (!ClientConnections.containsKey(clientConnectionKey))     ClientConnections.put(clientConnectionKey,new ClientConnection(clientConnectionKeyBase,clientConnectionKey,servers,port,user,password,isHeavyWeight,maxOutstandingTxns));
    return ClientConnections.get(clientConnectionKey).use();
  }
  finally {
    lock.unlock();
  }
}
