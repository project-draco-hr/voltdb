{
  if (url == null)   return null;
  String url_string=url.toExternalForm();
  if (url_string.startsWith("file:")) {
    try {
      FileResource fileResource=new FileResource(url);
      return fileResource;
    }
 catch (    Exception e) {
      Log.debug(Log.EXCEPTION,e);
      return new BadResource(url,e.toString());
    }
  }
 else   if (url_string.startsWith("jar:file:")) {
    return new JarFileResource(url,useCaches);
  }
 else   if (url_string.startsWith("jar:")) {
    return new JarResource(url,useCaches);
  }
  return new URLResource(url,null,useCaches);
}
