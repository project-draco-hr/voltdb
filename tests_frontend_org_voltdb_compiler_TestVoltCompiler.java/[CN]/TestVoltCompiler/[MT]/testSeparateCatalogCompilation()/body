{
  String schemaPath="";
  try {
    final URL url=TPCCClient.class.getResource("tpcc-ddl.sql");
    schemaPath=URLDecoder.decode(url.getPath(),"UTF-8");
  }
 catch (  final UnsupportedEncodingException e) {
    e.printStackTrace();
    System.exit(-1);
  }
  final String simpleProject="<?xml version=\"1.0\"?>\n" + "<project>" + "<database name='database'>"+ "<schemas><schema path='" + schemaPath + "' /></schemas>"+ "<procedures><procedure class='org.voltdb.compiler.procedures.TPCCTestProc' /></procedures>"+ "</database>"+ "</project>";
  final File projectFile=VoltProjectBuilder.writeStringToTempFile(simpleProject);
  final String projectPath=projectFile.getPath();
  final VoltCompiler compiler1=new VoltCompiler();
  final VoltCompiler compiler2=new VoltCompiler();
  final ClusterConfig cluster_config=new ClusterConfig(1,1,0,"localhost");
  final Catalog catalog=compiler1.compileCatalog(projectPath,cluster_config);
  final String cat1=catalog.serialize();
  final boolean success=compiler2.compile(projectPath,cluster_config,"testout.jar",System.out,null);
  final String cat2=JarReader.readFileFromJarfile("testout.jar","catalog.txt");
  assertTrue(success);
  assertTrue(cat1.compareTo(cat2) == 0);
  final File jar=new File("testout.jar");
  jar.delete();
}
