{
  MultiConfigSuiteBuilder builder=new MultiConfigSuiteBuilder(TestFailuresSuite.class);
  VoltServerConfig config=new LocalSingleProcessServer("failures-onesite.jar",1,BackendTarget.NATIVE_EE_JNI);
  VoltProjectBuilder project=new VoltProjectBuilder();
  project.addSchema(DivideByZero.class.getResource("failures-ddl.sql"));
  project.addPartitionInfo("NEW_ORDER","NO_W_ID");
  project.addPartitionInfo("FIVEK_STRING","P");
  project.addPartitionInfo("FIVEK_STRING_WITH_INDEX","ID");
  project.addPartitionInfo("WIDE","P");
  project.addProcedures(PROCEDURES);
  project.addStmtProcedure("InsertNewOrder","INSERT INTO NEW_ORDER VALUES (?, ?, ?);","NEW_ORDER.NO_W_ID: 2");
  if (!config.compile(project))   fail();
  builder.addServerConfig(config);
  config=new LocalSingleProcessServer("failures-twosites.jar",2,BackendTarget.NATIVE_EE_JNI);
  config.compile(project);
  builder.addServerConfig(config);
  config=new LocalSingleProcessServer("failures-hsql.jar",1,BackendTarget.HSQLDB_BACKEND);
  config.compile(project);
  builder.addServerConfig(config);
  config=new LocalCluster("failures-cluster.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  config.compile(project);
  builder.addServerConfig(config);
  return builder;
}
