{
  message.m_sourceHSId=m_siteId;
  if (message instanceof HeartbeatResponseMessage) {
    m_heartBeatSends+=siteIds.length;
  }
  for (int i=0; siteIds != null && i < siteIds.length; ++i) {
    m_totalSends++;
    if (shouldFail(true)) {
      killSite();
      return;
    }
    RussianRouletteMailbox dest=postoffice.get(siteIds[i]);
    if (dest != null) {
      dest.deliver(message);
    }
  }
}
