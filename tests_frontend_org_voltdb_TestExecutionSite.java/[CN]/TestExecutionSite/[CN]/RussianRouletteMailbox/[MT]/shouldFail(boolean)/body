{
  boolean fail=false;
  if (messagesSinceFail >= SAFE_SENDS) {
    messagesSinceFail=0;
    System.out.println("Resetting safe count at site: " + m_siteId);
    fail=false;
  }
 else   if (messagesSinceFail > 0) {
    messagesSinceFail++;
    return false;
  }
  int failchance=m_failureProb;
  if (broadcast) {
    failchance*=10;
  }
  if (m_rand.nextInt(FAIL_RANGE) >= (FAIL_RANGE - failchance)) {
    if (messagesSinceFail == 0) {
      messagesSinceFail++;
      System.out.println("Starting safe count at site: " + m_siteId);
      fail=true;
    }
  }
  return fail;
}
