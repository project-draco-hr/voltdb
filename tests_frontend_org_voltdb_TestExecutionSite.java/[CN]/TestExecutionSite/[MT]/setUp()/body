{
  super.setUp();
  Procedure proc=null;
  m_voltdb=new MockVoltDB();
  m_voltdb.addHost(0);
  m_voltdb.addPartition(0);
  m_voltdb.addSite(site1,0,0,true);
  m_voltdb.addPartition(1);
  m_voltdb.addSite(site2,0,1,true);
  proc=m_voltdb.addProcedureForTest(MockSPVoltProcedure.class.getName());
  proc.setReadonly(false);
  proc.setSinglepartition(true);
  VoltDB.replaceVoltDBInstanceForTest(m_voltdb);
  m_mboxes[site1]=new MockMailbox(new LinkedList<VoltMessage>());
  m_mboxes[site2]=new MockMailbox(new LinkedList<VoltMessage>());
  m_sites[site1]=new ExecutionSite(m_voltdb,m_mboxes[site1],site1);
  m_sites[site2]=new ExecutionSite(m_voltdb,m_mboxes[site2],site2);
  m_sites[site1].getNextUndoToken();
  m_sites[site2].getNextUndoToken();
}
