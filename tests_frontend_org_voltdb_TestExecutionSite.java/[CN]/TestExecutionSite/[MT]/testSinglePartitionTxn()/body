{
  start(SITE_COUNT,PARTITION_COUNT,K_FACTOR);
  final boolean readOnly=false;
  final boolean singlePartition=true;
  final StoredProcedureInvocation tx1_spi=new StoredProcedureInvocation();
  tx1_spi.setProcName("org.voltdb.TestExecutionSite$MockSPVoltProcedure");
  tx1_spi.setParams("commit",new Integer(0));
  final InitiateTaskMessage tx1_mn=new InitiateTaskMessage(getInitiatorIdForSiteId(0),0,1000,readOnly,singlePartition,tx1_spi,Long.MAX_VALUE);
  final long siteId0=getHSIdForES(0);
  final SinglePartitionTxnState tx1=new SinglePartitionTxnState(m_mboxes.get(siteId0),m_sites.get(siteId0),tx1_mn);
  int callcheck=MockSPProcedureRunner.m_called;
  assertFalse(tx1.isDone());
  assertEquals(0,m_sites.get(siteId0).lastCommittedTxnId);
  assertEquals(0,m_sites.get(siteId0).lastKnownGloballyCommitedMultiPartTxnId);
  m_sites.get(siteId0).m_transactionsById.put(tx1.txnId,tx1);
  m_sites.get(siteId0).recursableRun(tx1);
  assertTrue(tx1.isDone());
  assertEquals(null,m_sites.get(siteId0).m_transactionsById.get(tx1.txnId));
  assertEquals((++callcheck),MockSPProcedureRunner.m_called);
  assertEquals(1000,m_sites.get(siteId0).lastCommittedTxnId);
  assertEquals(0,m_sites.get(siteId0).lastKnownGloballyCommitedMultiPartTxnId);
}
