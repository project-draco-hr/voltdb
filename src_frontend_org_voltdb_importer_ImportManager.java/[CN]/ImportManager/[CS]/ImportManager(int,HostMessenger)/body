{
  m_myHostId=myHostId;
  m_messenger=messenger;
  String tmpFilePath=System.getProperty(VOLT_TMP_DIR,System.getProperty("java.io.tmpdir"));
  File f=new File(tmpFilePath,System.getProperty("user.name"));
  if (!f.exists() && !f.mkdirs()) {
    throw new IOException("Failed to create required OSGI cache directory: " + f.getAbsolutePath());
  }
  if (!f.isDirectory() || !f.canRead() || !f.canWrite()|| !f.canExecute()) {
    throw new IOException("Cannot access OSGI cache directory: " + f.getAbsolutePath());
  }
  List<String> packages=ImmutableList.<String>builder().add("org.voltcore.network").add("org.voltdb.importer").add("org.apache.log4j").add("org.voltdb.client").add("org.slf4j").add("org.voltcore.utils").add("com.google_voltpatches.common.base").add("com.google_voltpatches.common.collect").add("com.google_voltpatches.common.net").add("com.google_voltpatches.common.io").add("com.google_voltpatches.common.util.concurrent").build();
  String systemPackagesSpec=FluentIterable.from(packages).transform(appendVersion).join(COMMA_JOINER);
  m_frameworkProps=ImmutableMap.<String,String>builder().put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA,systemPackagesSpec).put("org.osgi.framework.storage.clean","onFirstInit").put("felix.cache.rootdir",f.getAbsolutePath()).put("felix.cache.locking",Boolean.FALSE.toString()).build();
}
