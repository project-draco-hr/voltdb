{
  for (  Entry<Long,Integer> e : siteMap.entrySet()) {
    long id=e.getKey();
    int partitionId=e.getValue();
    m_stateToPartitionMap.put(id,partitionId);
    SiteState ss=new SiteState();
    ss.hsId=id;
    ss.newestConfirmedTxnId=DtxnConstants.DUMMY_LAST_SEEN_TXN_ID;
    ss.lastSentTxnId=DtxnConstants.DUMMY_LAST_SEEN_TXN_ID;
    assert(m_stateBySite.get(id) == null);
    m_stateBySite.put(id,ss);
    PartitionState ps=m_stateByPartition.get(partitionId);
    if (ps == null) {
      ps=new PartitionState();
      ps.partitionId=partitionId;
      ps.newestConfirmedTxnId=DtxnConstants.DUMMY_LAST_SEEN_TXN_ID;
      m_stateByPartition.put(partitionId,ps);
    }
    assert(ps.partitionId == partitionId);
    for (    SiteState state : ps.sites) {
      assert(state != null);
      assert(state.hsId != ss.hsId);
    }
    ps.sites.add(ss);
    ss.partition=ps;
  }
}
