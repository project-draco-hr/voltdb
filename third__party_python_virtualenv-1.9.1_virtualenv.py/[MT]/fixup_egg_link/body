def fixup_egg_link(filename):
    f = open(filename)
    link = f.readline().strip()
    f.close()
    if (os.path.abspath(link) != link):
        logger.debug(('Link in %s already relative' % filename))
        return
    new_link = make_relative_path(filename, link)
    logger.notify(('Rewriting link %s in %s as %s' % (link, filename, new_link)))
    f = open(filename, 'w')
    f.write(new_link)
    f.close()
