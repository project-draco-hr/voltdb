{
  VoltProjectBuilder builder=new VoltProjectBuilder();
  builder.addLiteralSchema("create table blah (ival bigint not null, sval varchar(255) not null);" + "export table blah;");
  builder.addPartitionInfo("blah","ival");
  builder.addStmtProcedure("Insert","insert into blah values (?, ?);","blah.ival: 0");
  builder.addExport("org.voltdb.export.processors.RawProcessor",true,null);
  boolean success=builder.compile(Configuration.getPathToCatalogForTest("sqexport.jar"),1,1,0);
  if (!success) {
    System.err.println("Failed to compile");
    System.exit(-1);
  }
  MiscUtils.copyFile(builder.getPathToDeployment(),Configuration.getPathToCatalogForTest("sqexport.xml"));
  VoltDB.Configuration config=new VoltDB.Configuration();
  config.m_pathToCatalog=Configuration.getPathToCatalogForTest("sqexport.jar");
  config.m_pathToDeployment=Configuration.getPathToCatalogForTest("sqexport.xml");
  ServerThread localServer=new ServerThread(config);
  localServer.start();
  localServer.waitForInitialization();
  final Client client=ClientFactory.createClient();
  client.createConnection("localhost");
  Timer timer=new Timer();
  TimerTask task=new TimerTask(){
    int counter=0;
    @Override public void run(){
      try {
        System.out.printf("Inserting a tuple from the client with value %d\n",counter + 1);
        String second="??????";
        if ((counter % 2) == 0)         second="newline\nnewline";
        ClientResponse response=client.callProcedure("Insert",counter++,second);
        assert(response.getStatus() == ClientResponse.SUCCESS);
      }
 catch (      Exception e) {
        e.printStackTrace();
        System.exit(-1);
      }
    }
  }
;
  timer.scheduleAtFixedRate(task,1000,1000);
  File dir=new File(System.getProperty("user.dir") + File.separator + "00_exportout");
  System.out.printf("Working dir is %s\n",dir.getPath());
  ExportToFileClient exportClient=new ExportToFileClient(',',"testy",dir,1,"yyyyMMddHHmmss",null,0,false,true,true,0);
  exportClient.addServerInfo("localhost",false);
  exportClient.addCredentials("","");
  exportClient.run();
}
