{
  int size=0;
  ParameterSet userParamCache=work.userParamSet == null ? ParameterSet.emptyParameterSet() : ParameterSet.fromArrayNoCopy(work.userParamSet);
  size+=userParamCache.getSerializedSize();
  size+=2;
  for (  AdHocPlannedStatement cs : plannedStatements) {
    size+=cs.getSerializedSize();
  }
  ByteBuffer buf=ByteBuffer.allocate(size);
  userParamCache.flattenToBuffer(buf);
  buf.putShort((short)plannedStatements.size());
  for (  AdHocPlannedStatement cs : plannedStatements) {
    cs.flattenToBuffer(buf);
  }
  return buf;
}
