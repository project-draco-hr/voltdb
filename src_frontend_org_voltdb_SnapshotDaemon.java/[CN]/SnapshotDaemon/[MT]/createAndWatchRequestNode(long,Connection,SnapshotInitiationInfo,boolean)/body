{
  boolean requestExists=false;
  final String requestId=createRequestNode(snapInfo);
  if (requestId == null) {
    requestExists=true;
  }
 else {
    try {
      registerUserSnapshotResponseWatch(requestId,clientHandle,c,notifyChanges);
    }
 catch (    Exception e) {
      VoltDB.crashLocalVoltDB("Failed to register ZK watch on snapshot response",true,e);
    }
  }
  if (requestExists) {
    VoltTable result=org.voltdb.sysprocs.SnapshotSave.constructNodeResultsTable();
    result.addRow(-1,CoreUtils.getHostnameOrAddress(),"","FAILURE","SNAPSHOT IN PROGRESS");
    throw new ForwardClientException("A request to perform a user snapshot already exists",result);
  }
}
