{
  setState(State.SNAPSHOTTING);
  m_lastSysprocInvocation=now;
  final Date nowDate=new Date(now);
  final String dateString=m_dateFormat.format(nowDate);
  final String nonce=m_prefix + dateString;
  Object params[]=new Object[3];
  params[0]=m_path;
  params[1]=nonce;
  params[2]=0;
  m_snapshots.offer(new Snapshot(m_path,nonce,now));
  long handle=m_nextCallbackHandle++;
  m_procedureCallbacks.put(handle,new ProcedureCallback(){
    @Override public void clientCallback(    final ClientResponse clientResponse) throws Exception {
      processClientResponsePrivate(clientResponse);
    }
  }
);
  m_initiator.initiateSnapshotDaemonWork("@SnapshotSave",handle,params);
}
