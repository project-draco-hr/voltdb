{
  LinkedBlockingQueue<DBBPool.BBContainer> bufQueue=m_buffers.get(bufLenInBytes);
  if (bufQueue == null) {
    bufQueue=new LinkedBlockingQueue<DBBPool.BBContainer>(capacity);
    m_buffers.put(bufLenInBytes,bufQueue);
  }
  final LinkedBlockingQueue<DBBPool.BBContainer> finalBufQueue=bufQueue;
  for (int ii=0; ii < capacity; ii++) {
    final DBBPool.BBContainer origin=DBBPool.allocateDirect(bufLenInBytes);
    final long bufferAddress=DBBPool.getBufferAddress(origin.b);
    final DBBPool.BBContainer buffer=new DBBPool.BBContainer(origin.b,bufferAddress){
      @Override public void discard(){
        finalBufQueue.offer(this);
      }
    }
;
    m_bufferToOriginMap.put(buffer,origin);
    bufQueue.offer(buffer);
  }
}
