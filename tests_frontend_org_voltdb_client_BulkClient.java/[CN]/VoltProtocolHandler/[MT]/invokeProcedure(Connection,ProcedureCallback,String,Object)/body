{
  ProcedureInvocation invocation;
  final long handle=m_handle.getAndIncrement();
  if (ProcedureCallback.measureLatency) {
    final long now=System.nanoTime();
    invocation=new ProcedureInvocation(handle,procName,-1,parameters);
    callback.callTimeInNanos=now;
  }
 else {
    invocation=new ProcedureInvocation(handle,procName,-1,parameters);
  }
  m_callbacks.put(handle,callback);
  FastSerializer fs=new FastSerializer();
  fs.writeObjectForMessaging(invocation);
  connection.writeStream().enqueue(fs.getBuffer());
}
