def get_deployment_for_upload(deployment_xml, is_list):
    new_deployment = {}
    deployments = []
    for field in deployment_xml:
        if (field == 'export'):
            try:
                if (deployment_xml[field] is not None):
                    if (type(deployment_xml[field]['configuration']) is list):
                        new_deployment[field] = get_deployment_export_field(deployment_xml[field]['configuration'], 'list')
                    else:
                        new_deployment[field] = get_deployment_export_field(deployment_xml[field]['configuration'], 'dict')
                else:
                    new_deployment[field] = deployment_xml[field]
            except Exception as exp:
                return {'error': ('Export: ' + str(exp)), }
        elif (field == 'import'):
            try:
                if (deployment_xml[field] is not None):
                    if (type(deployment_xml[field]['configuration']) is list):
                        new_deployment[field] = get_deployment_export_field(deployment_xml[field]['configuration'], 'list')
                    else:
                        new_deployment[field] = get_deployment_export_field(deployment_xml[field]['configuration'], 'dict')
                else:
                    new_deployment[field] = deployment_xml[field]
            except Exception as exp:
                return {'error': ('Import: ' + str(exp)), }
        elif (field == 'admin-mode'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['adminstartup'] = parse_bool_string(deployment_xml[field]['adminstartup'])
                new_deployment[field]['port'] = int(deployment_xml[field]['port'])
            except Exception as err:
                return {'Error': ('Admin-mode: ' + str(err)), }
        elif (field == 'cluster'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['hostcount'] = int(deployment_xml[field]['hostcount'])
                new_deployment[field]['kfactor'] = int(deployment_xml[field]['kfactor'])
                new_deployment[field]['sitesperhost'] = int(deployment_xml[field]['sitesperhost'])
                new_deployment[field]['elastic'] = str(deployment_xml[field]['elastic'])
                new_deployment[field]['schema'] = str(deployment_xml[field]['schema'])
            except Exception as err:
                return {'error': ('Cluster: ' + str(err)), }
        elif (field == 'commandlog'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['enabled'] = parse_bool_string(deployment_xml[field]['enabled'])
                new_deployment[field]['synchronous'] = parse_bool_string(deployment_xml[field]['synchronous'])
                new_deployment[field]['logsize'] = int(deployment_xml[field]['logsize'])
                new_deployment[field]['frequency'] = {}
                new_deployment[field]['frequency']['transactions'] = int(deployment_xml[field]['frequency']['transactions'])
                new_deployment[field]['frequency']['time'] = int(deployment_xml[field]['frequency']['time'])
            except Exception as err:
                return {'error': ('Commandlog: ' + str(err)), }
        elif (field == 'heartbeat'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['timeout'] = int(deployment_xml[field]['timeout'])
            except Exception as err:
                return {'error': ('Heartbeat: ' + str(err)), }
        elif (field == 'httpd'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['port'] = int(deployment_xml[field]['port'])
                new_deployment[field]['enabled'] = parse_bool_string(deployment_xml[field]['enabled'])
                new_deployment[field]['jsonapi'] = {}
                new_deployment[field]['jsonapi']['enabled'] = parse_bool_string(deployment_xml[field]['jsonapi']['enabled'])
            except Exception as err:
                return {'error': ('HTTPD: ' + str(err)), }
        elif (field == 'partition-detection'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['enabled'] = parse_bool_string(deployment_xml[field]['enabled'])
                new_deployment[field]['snapshot'] = {}
                new_deployment[field]['snapshot']['prefix'] = deployment_xml[field]['snapshot']['prefix']
            except Exception as err:
                return {'error': ('Partition-Detection: ' + str(err)), }
        elif (field == 'security'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['enabled'] = parse_bool_string(deployment_xml[field]['enabled'])
                new_deployment[field]['provider'] = str(deployment_xml[field]['provider'])
            except Exception as err:
                return {'error': ('Security: ' + str(err)), }
        elif (field == 'snapshot'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['enabled'] = parse_bool_string(deployment_xml[field]['enabled'])
                new_deployment[field]['frequency'] = str(deployment_xml[field]['frequency'])
                new_deployment[field]['prefix'] = str(deployment_xml[field]['prefix'])
                new_deployment[field]['retain'] = int(deployment_xml[field]['retain'])
            except Exception as err:
                return {'error': ('Snapshot: ' + str(err)), }
        elif (field == 'systemsettings'):
            try:
                new_deployment[field] = {}
                new_deployment[field]['elastic'] = {}
                new_deployment[field]['elastic']['duration'] = int(deployment_xml[field]['elastic']['duration'])
                new_deployment[field]['elastic']['throughput'] = int(deployment_xml[field]['elastic']['throughput'])
                new_deployment[field]['query'] = {}
                new_deployment[field]['query']['timeout'] = int(deployment_xml[field]['query']['timeout'])
                new_deployment[field]['snapshot'] = {}
                new_deployment[field]['snapshot']['priority'] = int(deployment_xml[field]['snapshot']['priority'])
                new_deployment[field]['temptables'] = {}
                new_deployment[field]['temptables']['maxsize'] = int(deployment_xml[field]['temptables']['maxsize'])
                if (('resourcemonitor' not in deployment_xml[field]) or (deployment_xml[field]['resourcemonitor'] is None)):
                    if ('resourcemonitor' in deployment_xml[field]):
                        new_deployment[field]['resourcemonitor'] = None
                else:
                    new_deployment[field]['resourcemonitor'] = {}
                    if ('memorylimit' in deployment_xml[field]['resourcemonitor']):
                        new_deployment[field]['resourcemonitor']['memorylimit'] = deployment_xml[field]['resourcemonitor']['memorylimit']
                    if (('disklimit' in deployment_xml[field]['resourcemonitor']) and ('feature' in deployment_xml[field]['resourcemonitor']['disklimit'])):
                        if (type(deployment_xml[field]['resourcemonitor']['disklimit']['feature']) is list):
                            new_deployment[field]['resourcemonitor']['disklimit'] = {}
                            new_deployment[field]['resourcemonitor']['disklimit']['feature'] = get_deployment_properties(deployment_xml[field]['resourcemonitor']['disklimit']['feature'], 'list')
                        else:
                            new_deployment[field]['resourcemonitor']['disklimit'] = {}
                            new_deployment[field]['resourcemonitor']['disklimit']['feature'] = get_deployment_properties(deployment_xml[field]['resourcemonitor']['disklimit']['feature'], 'dict')
            except Exception as err:
                return {'error': ('SystemSettings: ' + str(err)), }
        elif (field == 'dr'):
            try:
                if (deployment_xml[field] is not None):
                    new_deployment[field] = {}
                    new_deployment[field]['id'] = int(deployment_xml[field]['id'])
                    new_deployment[field]['listen'] = parse_bool_string(deployment_xml[field]['listen'])
                    if ('port' in deployment_xml[field]):
                        new_deployment[field]['port'] = int(deployment_xml[field]['port'])
                    if (('connection' in deployment_xml[field]) and (deployment_xml[field]['connection'] is not None) and ('source' in deployment_xml[field]['connection'])):
                        new_deployment[field]['connection'] = {}
                        new_deployment[field]['connection']['source'] = str(deployment_xml[field]['connection']['source'])
            except Exception as err:
                return {'error': ('DR: ' + str(err)), }
        elif (field == 'users'):
            try:
                if (deployment_xml[field] is not None):
                    new_deployment[field] = {}
                    if (type(deployment_xml[field]['user']) is list):
                        new_deployment[field]['user'] = []
                        new_deployment[field]['user'] = get_deployment_properties(deployment_xml[field]['user'], 'list')
                    else:
                        new_deployment[field]['user'] = []
                        new_deployment[field]['user'] = get_deployment_properties(deployment_xml[field]['user'], 'dict')
            except Exception as err:
                return {'error': ('Users: ' + str(err)), }
        else:
            new_deployment[field] = convert_deployment_field_required_format(deployment_xml, field)
    deployments.append(new_deployment)
    return deployments
