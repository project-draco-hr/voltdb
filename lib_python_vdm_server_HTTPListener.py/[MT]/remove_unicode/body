def remove_unicode(data, ignore_dicts=False):
    if isinstance(data, unicode):
        return data.encode('utf-8')
    if isinstance(data, list):
        return [remove_unicode(item, ignore_dicts=True) for item in data]
    if (isinstance(data, dict) and (not ignore_dicts)):
        return {remove_unicode(key, ignore_dicts=True): remove_unicode(value, ignore_dicts=True) for (key, value) in data.iteritems()}
    return data
