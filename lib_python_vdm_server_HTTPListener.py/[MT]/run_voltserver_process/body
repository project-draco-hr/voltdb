def run_voltserver_process(voltdb_cmd, outfilename):
    outfile = open(outfilename, 'w')
    oldwd = os.getcwd()
    os.chdir(PATH)
    try:
        my_env = os.environ.copy()
        my_env['VOLTDB_OPTS'] = (os.getenv('VOLTDB_OPTS', '') + ' -DVDMStarted=true')
        return subprocess.Popen(voltdb_cmd, stdout=outfile, stderr=subprocess.STDOUT, env=my_env, preexec_fn=ignore_signals, close_fds=True)
    finally:
        os.chdir(oldwd)
