{
  hostLog.debug("STARTING: " + this);
  if (!m_txn.isReadOnly()) {
    siteConnection.truncateUndoLog(m_msg.isRollback(),m_txn.getBeginUndoToken(),m_txn.txnId,m_txn.spHandle);
  }
  m_txn.setDone();
  m_queue.flush();
  hostLog.debug("COMPLETE: " + this);
  if (m_drGateway != null && !m_txn.isReadOnly() && !m_msg.isRollback()) {
    FragmentTaskMessage fragment=(FragmentTaskMessage)m_txn.getNotice();
    Iv2InitiateTaskMessage initiateTask=fragment.getInitiateTask();
    assert(initiateTask != null);
    StoredProcedureInvocation invocation=initiateTask.getStoredProcedureInvocation().getShallowCopy();
    invocation.setOriginalTxnId(m_txn.txnId);
    invocation.setOriginalTimestamp(m_txn.timestamp);
    m_drGateway.onSuccessfulProcedureCall(m_txn.spHandle,m_txn.timestamp,true,invocation,m_txn.getResults(),null);
  }
}
