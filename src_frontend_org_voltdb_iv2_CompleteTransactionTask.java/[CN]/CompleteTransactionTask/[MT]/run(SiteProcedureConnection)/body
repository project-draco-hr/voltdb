{
  hostLog.debug("STARTING: " + this);
  if (!m_txn.isReadOnly()) {
    siteConnection.truncateUndoLog(m_msg.isRollback(),m_txn.getBeginUndoToken(),m_txn.txnId,m_txn.spHandle);
  }
  if (!m_msg.isRollbackForFault()) {
    m_txn.setDone();
    m_queue.flush();
    if (m_drGateway != null && !m_txn.isForReplay() && !m_txn.isReadOnly() && !m_msg.isRollback()) {
      FragmentTaskMessage fragment=(FragmentTaskMessage)m_txn.getNotice();
      Iv2InitiateTaskMessage initiateTask=fragment.getInitiateTask();
      assert(initiateTask != null);
      StoredProcedureInvocation invocation=initiateTask.getStoredProcedureInvocation().getShallowCopy();
      invocation.setOriginalTxnId(m_txn.txnId);
      invocation.setOriginalTimestamp(m_txn.timestamp);
      m_drGateway.onSuccessfulProcedureCall(m_txn.spHandle,m_txn.timestamp,true,invocation,m_txn.getResults());
    }
    hostLog.debug("COMPLETE: " + this);
  }
 else {
    m_txn.setBeginUndoToken(Site.kInvalidUndoToken);
    hostLog.debug("RESTART: " + this);
  }
}
