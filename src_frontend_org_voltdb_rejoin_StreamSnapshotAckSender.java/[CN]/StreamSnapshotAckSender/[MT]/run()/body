{
  while (true) {
    int blockIndex;
    try {
      blockIndex=m_blockIndices.take();
    }
 catch (    InterruptedException e1) {
      break;
    }
    if (blockIndex == -1) {
      rejoinLog.debug(m_blockIndices.size() + " acks remaining, " + "terminating ack sender");
      break;
    }
    ByteBuffer ack=ByteBuffer.allocate(16);
    ack.putInt(12);
    ack.putLong(m_HSId);
    ack.putInt(blockIndex);
    ack.flip();
    while (ack.hasRemaining()) {
      int written=0;
      try {
        written=m_sock.write(ack);
      }
 catch (      ClosedByInterruptException ignore) {
        break;
      }
catch (      IOException e) {
        VoltDB.crashLocalVoltDB("Unable to ack snapshot block",true,e);
      }
      if (written == -1) {
        VoltDB.crashLocalVoltDB("Unable to ack snapshot block",false,null);
      }
    }
  }
}
