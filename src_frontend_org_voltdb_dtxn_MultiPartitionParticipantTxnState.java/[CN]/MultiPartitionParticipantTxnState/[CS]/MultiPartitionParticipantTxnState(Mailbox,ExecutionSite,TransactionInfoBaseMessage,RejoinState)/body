{
  super(mbox,site,notice,rejoinState);
  m_hsId=site.getSiteId();
  m_nonCoordinatingSites=null;
  m_isCoordinator=false;
  if (notice instanceof InitiateTaskMessage) {
    m_invocation=((InitiateTaskMessage)notice).getStoredProcedureInvocation();
    if (notice.getCoordinatorHSId() == m_hsId) {
      m_isCoordinator=true;
      m_task=(InitiateTaskMessage)notice;
      m_durabilityFlag=m_task.getDurabilityFlagIfItExists();
      SiteTracker tracker=site.getSiteTracker();
      if (tracker != null) {
        m_nonCoordinatingSites=tracker.getAllSitesExcluding(m_hsId);
      }
      m_readyWorkUnits.add(new WorkUnit(tracker,m_task,null,m_hsId,null,false));
    }
 else {
      m_durabilityFlag=((InitiateTaskMessage)notice).getDurabilityFlagIfItExists();
      m_task=null;
    }
  }
 else   if (notice instanceof FragmentTaskLogMessage) {
    assert(m_rejoinState == RejoinState.REPLAYING);
    FragmentTaskLogMessage ftl=(FragmentTaskLogMessage)notice;
    m_task=null;
    m_durabilityFlag=null;
    m_invocation=null;
    for (    FragmentTaskMessage ft : ftl.getFragmentTasks()) {
      processFragmentWork(ft,null);
    }
  }
 else {
    m_task=null;
    m_durabilityFlag=null;
    m_invocation=null;
  }
}
