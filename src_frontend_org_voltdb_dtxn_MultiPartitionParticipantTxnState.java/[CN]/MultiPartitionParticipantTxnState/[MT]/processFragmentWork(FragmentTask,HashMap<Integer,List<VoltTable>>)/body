{
  assert(ftask.getFragmentCount() > 0);
  FragmentResponse response=m_site.processFragmentTask(dependencies,ftask);
  if (response.getDirtyFlag())   m_dirty=true;
  if (response.getStatusCode() != FragmentResponse.SUCCESS) {
    m_dirty=true;
    if (m_missingDependencies != null)     m_missingDependencies.clear();
    m_readyWorkUnits.clear();
    if (m_isCoordinator) {
      if (response.getException() != null) {
        throw response.getException();
      }
 else {
        throw new SimpleDtxnConnection.FragmentFailureException();
      }
    }
 else {
      m_site.rollbackTransaction(isReadOnly);
      m_done=true;
    }
  }
  if (m_isCoordinator && (response.getDestinationSiteId() == response.getExecutorSiteId())) {
    processFragmentResponseDependencies(response);
  }
 else {
    try {
      m_mbox.send(response.getDestinationSiteId(),0,response);
    }
 catch (    MessagingException e) {
      throw new RuntimeException(e);
    }
  }
}
