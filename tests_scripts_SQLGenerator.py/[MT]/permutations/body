def permutations(iterable, r=None):
    pool = tuple(iterable)
    n = len(pool)
    r = (((r is None) and n) or r)
    for indices in product(range(n), repeat=r):
        if (len(set(indices)) == r):
            yield [pool[i] for i in indices]
