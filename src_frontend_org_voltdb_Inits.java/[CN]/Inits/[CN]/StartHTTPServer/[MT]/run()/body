{
  int httpPort=-1;
  m_rvdb.m_jsonEnabled=false;
  if ((m_deployment.getHttpd() != null) && (m_deployment.getHttpd().isEnabled())) {
    httpPort=m_deployment.getHttpd().getPort();
    m_rvdb.m_jsonEnabled=m_deployment.getHttpd().getJsonapi().isEnabled();
  }
  if (httpPort == 0) {
    httpPort=8080;
    for (; true; httpPort++) {
      try {
        m_rvdb.m_adminListener=new HTTPAdminListener(m_rvdb.m_jsonEnabled,httpPort);
        break;
      }
 catch (      Exception e1) {
      }
    }
    if (httpPort == 8081)     m_rvdb.m_httpPortExtraLogMessage="HTTP admin console unable to bind to port 8080";
 else     if (httpPort > 8081)     m_rvdb.m_httpPortExtraLogMessage="HTTP admin console unable to bind to ports 8080 through " + String.valueOf(httpPort - 1);
  }
 else   if (httpPort != -1) {
    try {
      m_rvdb.m_adminListener=new HTTPAdminListener(m_rvdb.m_jsonEnabled,httpPort);
    }
 catch (    Exception e1) {
      hostLog.info("HTTP admin console unable to bind to port " + httpPort + ". Exiting.");
      System.exit(-1);
    }
  }
  m_config.m_httpPort=httpPort;
}
