{
  if (m_rvdb.m_myHostId == m_rvdb.m_hostIdWithStartupCatalog) {
    final int MAX_CATALOG_SIZE=40 * 1024 * 1024;
    if (m_rvdb.m_pathToStartupCatalog == null) {
      VoltDB.crashGlobalVoltDB("The catalog file location is missing, " + " please see usage for more information",false,null);
    }
    try {
      InputStream fin=null;
      try {
        URL url=new URL(m_rvdb.m_pathToStartupCatalog);
        fin=url.openStream();
      }
 catch (      MalformedURLException ex) {
        fin=new FileInputStream(m_rvdb.m_pathToStartupCatalog);
      }
      byte[] buffer=new byte[MAX_CATALOG_SIZE];
      int readBytes=0;
      int totalBytes=0;
      try {
        while (readBytes >= 0) {
          totalBytes+=readBytes;
          readBytes=fin.read(buffer,totalBytes,buffer.length - totalBytes - 1);
        }
      }
  finally {
        fin.close();
      }
      byte[] catalogBytes=Arrays.copyOf(buffer,totalBytes);
      hostLog.debug(String.format("Sending %d catalog bytes",catalogBytes.length));
      ByteBuffer versionAndBytes=ByteBuffer.allocate(catalogBytes.length + 4);
      versionAndBytes.putInt(0);
      versionAndBytes.put(catalogBytes);
      m_rvdb.getHostMessenger().getZK().create(VoltZK.catalogbytes,versionAndBytes.array(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
      versionAndBytes=null;
    }
 catch (    IOException e) {
      VoltDB.crashGlobalVoltDB("Unable to distribute catalog.",false,e);
    }
catch (    org.apache.zookeeper_voltpatches.KeeperException e) {
      VoltDB.crashGlobalVoltDB("Unable to publish catalog.",false,e);
    }
catch (    InterruptedException e) {
      VoltDB.crashGlobalVoltDB("Interrupted while publishing catalog.",false,e);
    }
  }
}
