{
  CatalogAndIds catalogStuff=null;
  do {
    try {
      catalogStuff=CatalogUtil.getCatalogFromZK(m_rvdb.getHostMessenger().getZK());
    }
 catch (    org.apache.zookeeper_voltpatches.KeeperException.NoNodeException e) {
    }
catch (    Exception e) {
      VoltDB.crashLocalVoltDB("System was interrupted while waiting for a catalog.",false,null);
    }
  }
 while (catalogStuff == null);
  try {
    m_rvdb.m_serializedCatalog=CatalogUtil.loadCatalogFromJar(catalogStuff.bytes,hostLog);
  }
 catch (  IOException e) {
    VoltDB.crashLocalVoltDB("Unable to load catalog",true,e);
  }
  if ((m_rvdb.m_serializedCatalog == null) || (m_rvdb.m_serializedCatalog.length() == 0))   VoltDB.crashLocalVoltDB("Catalog loading failure",false,null);
  Catalog catalog=new Catalog();
  catalog.execute(m_rvdb.m_serializedCatalog);
  try {
    m_rvdb.m_depCRC=CatalogUtil.compileDeploymentAndGetCRC(catalog,m_deployment,true,false);
    if (m_rvdb.m_depCRC < 0)     System.exit(-1);
  }
 catch (  Exception e) {
    hostLog.fatal("Error parsing deployment file",e);
    System.exit(-1);
  }
  try {
    m_rvdb.m_serializedCatalog=catalog.serialize();
    m_rvdb.m_catalogContext=new CatalogContext(catalogStuff.txnId,catalogStuff.uniqueId,catalog,catalogStuff.bytes,m_rvdb.m_depCRC,catalogStuff.version,-1);
  }
 catch (  Exception e) {
    VoltDB.crashLocalVoltDB("Error agreeing on starting catalog version",false,e);
  }
}
