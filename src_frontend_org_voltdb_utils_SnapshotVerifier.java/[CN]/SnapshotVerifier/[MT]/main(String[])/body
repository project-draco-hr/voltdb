{
  if (args.length == 0) {
  }
 else   if (args[0].equals("--help")) {
    printHelpAndQuit(0);
  }
  FileFilter filter=new SnapshotFilter();
  boolean specifiedSingle=false;
  HashSet<String> snapshotNames=new HashSet<String>();
  for (int ii=0; ii < args.length; ii++) {
    if (args[ii].equals("--dir")) {
      ii++;
      continue;
    }
    specifiedSingle=true;
    snapshotNames.add(args[ii]);
  }
  if (specifiedSingle) {
    filter=new SpecificSnapshotFilter(snapshotNames);
  }
  List<String> directories=new ArrayList<String>();
  for (int ii=0; ii < args.length; ii++) {
    if (args[ii].equals("--dir")) {
      if (ii + 1 >= args.length) {
        System.err.println("Error: No directories specified after --dir");
        printHelpAndQuit(-1);
        break;
      }
      directories.add(args[ii + 1]);
      ii++;
    }
  }
  if (directories.isEmpty()) {
    directories.add(".");
  }
  Map<String,Snapshot> snapshots=new HashMap<String,Snapshot>();
  for (  String directory : directories) {
    SnapshotUtil.retrieveSnapshotFiles(new File(directory),snapshots,filter,0,true);
  }
  if (snapshots.isEmpty()) {
    System.out.println("Snapshot corrupted");
    System.out.println("No files found");
  }
  for (  Snapshot s : snapshots.values()) {
    System.out.println(SnapshotUtil.generateSnapshotReport(s.getTxnId(),s).getSecond());
  }
}
