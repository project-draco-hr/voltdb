{
  long nanoTime=0;
  Scanner scan;
  boolean inputValid=false;
  while (!inputValid) {
    System.out.print("Enter duration of workload with units in descending order (ex. 1h2m3s4n, 3m 1n, etc.): ");
    scan=new Scanner(System.in);
    String input=scan.nextLine();
    if (input.matches("(\\d+\\s*h)?\\s*(\\d+\\s*m)?\\s*(\\d+\\s*s)?\\s*(\\d+\\s*n)?\\s*") && !input.trim().equals("")) {
      try {
        input=input.replaceAll("\\s","");
        if (input.contains("h")) {
          int index=input.indexOf('h');
          long value=Integer.parseInt(input.substring(0,index));
          if ((Long.MAX_VALUE - nanoTime) / 1000000000. / 60/ 60 < value) {
            System.out.println("Value exceeds limit of about 2.5 million total hours");
            throw new Exception();
          }
 else {
            nanoTime+=value * 1000000000 * 60* 60;
            input=input.substring(index + 1);
          }
        }
        if (input.contains("m")) {
          int index=input.indexOf('m');
          long value=Integer.parseInt(input.substring(0,index));
          if ((Long.MAX_VALUE - nanoTime) / 1000000000. / 60 < value) {
            System.out.println("Value exceeds limit of about 150 million total minutes");
            throw new Exception();
          }
 else {
            nanoTime+=value * 1000000000 * 60;
            input=input.substring(index + 1);
          }
        }
        if (input.contains("s")) {
          int index=input.indexOf('s');
          long value=Integer.parseInt(input.substring(0,index));
          if ((Long.MAX_VALUE - nanoTime) / 1000000000. < value) {
            System.out.println("Value exceeds limit of about 9 billion total seconds");
            throw new Exception();
          }
 else {
            nanoTime+=value * 1000000000;
            input=input.substring(index + 1);
          }
        }
        if (input.contains("n")) {
          int index=input.indexOf('n');
          long value=Integer.parseInt(input.substring(0,index));
          if ((Long.MAX_VALUE - nanoTime) < value) {
            System.out.println("Value exceeds limit of about 9 quintillion total nanoseconds");
            throw new Exception();
          }
 else {
            nanoTime+=value;
            input=input.substring(index + 1);
          }
        }
        inputValid=true;
      }
 catch (      Exception e) {
        System.out.println("Parse error.");
      }
    }
 else {
      System.out.println("Regex error.");
    }
  }
  return nanoTime;
}
