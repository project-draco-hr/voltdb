{
  InMemoryJarfile jarfile=CatalogUtil.loadInMemoryJarFile(oldCatalogBytes);
  String[] patterns=deletePatterns.split(",");
  ClassMatcher matcher=new ClassMatcher();
  String currentClasses="";
  for (  String classname : jarfile.getLoader().getClassNames()) {
    currentClasses=currentClasses.concat(classname + "\n");
  }
  matcher.m_classList=currentClasses;
  for (  String pattern : patterns) {
    matcher.addPattern(pattern.trim());
  }
  for (  String classname : matcher.getMatchedClassList()) {
    jarfile.removeClassFromJar(classname);
  }
  VoltCompiler compiler=new VoltCompiler();
  compiler.compileInMemoryJarfile(jarfile);
  return jarfile.getFullJarBytes();
}
