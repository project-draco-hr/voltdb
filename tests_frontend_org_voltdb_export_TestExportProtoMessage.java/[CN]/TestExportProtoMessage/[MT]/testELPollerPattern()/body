{
  final ExportProtoMessage r=new ExportProtoMessage(1,5);
  ByteBuffer data=ByteBuffer.allocate(8);
  data.putInt(100);
  data.putInt(200);
  data.flip();
  r.pollResponse(1000,data);
  final DBBPool p=new DBBPool();
  BBContainer bb=new DeferredSerialization(){
    @Override public BBContainer serialize(    DBBPool p) throws IOException {
      FastSerializer fs=new FastSerializer(p,r.serializableBytes() + 4);
      r.writeToFastSerializer(fs);
      return fs.getBBContainer();
    }
    @Override public void cancel(){
    }
  }
.serialize(p);
  ByteBuffer b=bb.b;
  assertEquals(32,b.getInt());
  FastDeserializer fds=new FastDeserializer(b);
  ExportProtoMessage m=ExportProtoMessage.readExternal(fds);
  assertEquals(1,m.m_partitionId);
  assertEquals(5,m.getTableId());
  assertTrue(m.isPollResponse());
  assertTrue(m.getData().remaining() == 8);
  assertMsgType(m,ExportProtoMessage.kPollResponse);
}
