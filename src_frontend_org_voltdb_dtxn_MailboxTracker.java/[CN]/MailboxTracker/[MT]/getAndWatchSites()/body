{
  List<String> children=m_zk.getChildren(VoltZK.mailboxes_executionsites,new Watcher(){
    @Override public void process(    WatchedEvent event){
      try {
        getAndWatchSites();
      }
 catch (      Exception e) {
        log.error(e.getMessage());
      }
    }
  }
);
  log.info("Mailboxtracker getAndWatchSites() triggered.");
  Map<Integer,ArrayList<Long>> hostsToSites=new HashMap<Integer,ArrayList<Long>>();
  Map<Integer,ArrayList<Long>> partitionsToSites=new HashMap<Integer,ArrayList<Long>>();
  Map<Long,Integer> sitesToPartitions=new HashMap<Long,Integer>();
  for (  String child : children) {
    byte[] data=m_zk.getData(VoltZK.mailboxes_executionsites + child,false,null);
    JSONObject jsObj=new JSONObject(new String(data,"UTF-8"));
    log.info("Mailboxtracker getAndWatchSites processing: " + jsObj.toString(2));
    try {
      long HSId=jsObj.getLong("HSId");
      int partitionId=jsObj.getInt("partitionId");
      int hostId=MiscUtils.getHostIdFromHSId(HSId);
      ArrayList<Long> hostSiteList=hostsToSites.get(hostId);
      if (hostSiteList == null) {
        hostSiteList=new ArrayList<Long>();
        hostsToSites.put(hostId,hostSiteList);
      }
      hostSiteList.add(HSId);
      ArrayList<Long> partSiteList=partitionsToSites.get(partitionId);
      if (partSiteList == null) {
        partSiteList=new ArrayList<Long>();
        partitionsToSites.put(partitionId,partSiteList);
      }
      partSiteList.add(HSId);
      sitesToPartitions.put(HSId,partitionId);
    }
 catch (    JSONException e) {
      log.error(e.getMessage());
    }
  }
  m_hostsToSites=hostsToSites;
  m_partitionsToSites=partitionsToSites;
  m_sitesToPartitions=sitesToPartitions;
}
