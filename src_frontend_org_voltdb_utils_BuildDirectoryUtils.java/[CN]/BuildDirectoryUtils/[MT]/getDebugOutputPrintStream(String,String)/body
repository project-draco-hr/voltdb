{
  if (m_debugRoot == null) {
    if (System.getenv("TEST_DIR") != null) {
      m_debugRoot=System.getenv("TEST_DIR") + File.separator + rootPath;
    }
 else {
      m_debugRoot=rootPath;
    }
  }
  String subFolderPath=m_debugRoot + File.separator + dir;
  if (!m_seenPaths.contains(subFolderPath)) {
    File f=new File(subFolderPath);
    f.mkdirs();
    m_seenPaths.add(subFolderPath);
  }
  String filepath=subFolderPath + File.separator + filename;
  File f=new File(filepath);
  try {
    return new PrintStream(f);
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
    return null;
  }
}
