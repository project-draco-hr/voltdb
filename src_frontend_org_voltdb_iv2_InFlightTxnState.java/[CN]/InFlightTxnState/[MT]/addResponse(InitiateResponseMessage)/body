{
  int remainingResponses=outstandingResponse.decrementAndGet();
  if (response == null) {
    response=newResponse;
  }
 else {
    ClientResponseImpl newResponseData=newResponse.getClientResponseData();
    ClientResponseImpl existingResponseData=response.getClientResponseData();
    VoltTable[] newResults=newResponseData.getResults();
    VoltTable[] existingResults=existingResponseData.getResults();
    if (existingResults.length != newResults.length) {
      String msg="Mismatched result count received for transaction ID: " + response.getTxnId();
      msg+="\n  while executing stored procedure: " + task.getStoredProcedureName();
      msg+="\n  from execution site: " + newResponse.m_sourceHSId;
      msg+="\n  Expected number of results: " + existingResults.length;
      msg+="\n  Mismatched number of results: " + newResults.length;
      VoltDB.crashGlobalVoltDB(msg,false,null);
    }
    for (int i=0; i < existingResults.length; ++i) {
      if (!existingResults[i].hasSameContents(newResults[i])) {
        String msg="Mismatched result count received for transaction ID: " + response.getTxnId();
        msg+="\n  while executing stored procedure: " + task.getStoredProcedureName();
        msg+="\n  from execution site: " + newResponse.m_sourceHSId;
        msg+="\n  Expected results: " + existingResults[i].toString();
        msg+="\n  Mismatched results: " + newResults[i].toString();
        VoltDB.crashGlobalVoltDB(msg,false,null);
      }
    }
  }
  return (remainingResponses == 0);
}
