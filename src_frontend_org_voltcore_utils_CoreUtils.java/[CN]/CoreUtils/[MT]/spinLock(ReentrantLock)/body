{
  int spins=128;
  ThreadLocalRandom randomYields=null;
  for (; ; ) {
    if (lock.tryLock()) {
      return;
    }
    if (randomYields == null) {
      randomYields=ThreadLocalRandom.current();
    }
 else     if (spins > 0) {
      --spins;
      if (randomYields.nextInt(64) == 0)       Thread.yield();
    }
 else {
      lock.lock();
      return;
    }
  }
}
