{
  if (threads < 1) {
    throw new IllegalArgumentException("Must specify > 0 threads");
  }
  if (name == null) {
    throw new IllegalArgumentException("Name cannot be null");
  }
  return MoreExecutors.listeningDecorator(new ThreadPoolExecutor(threads,threads,0L,TimeUnit.MILLISECONDS,queue,getThreadFactory(null,name,128 * 1024,threads > 1 ? true : false)));
}
