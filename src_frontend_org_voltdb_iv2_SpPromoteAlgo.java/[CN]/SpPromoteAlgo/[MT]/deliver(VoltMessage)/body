{
  if (message instanceof Iv2RepairLogResponseMessage) {
    Iv2RepairLogResponseMessage response=(Iv2RepairLogResponseMessage)message;
    if (response.getRequestId() != m_requestId) {
      tmLog.debug(m_whoami + "rejecting stale repair response." + " Current request id is: "+ m_requestId+ " Received response for request id: "+ response.getRequestId());
      return;
    }
    ReplicaRepairStruct rrs=m_replicaRepairStructs.get(response.m_sourceHSId);
    if (rrs.m_expectedResponses < 0) {
      tmLog.debug(m_whoami + "collecting " + response.getOfTotal()+ " repair log entries from "+ CoreUtils.hsIdToString(response.m_sourceHSId));
    }
    if (response.getHandle() != Long.MAX_VALUE) {
      m_maxSeenTxnId=Math.max(m_maxSeenTxnId,response.getHandle());
    }
    m_maxSeenBinaryLogSequenceNumber=Math.max(m_maxSeenBinaryLogSequenceNumber,response.getBinaryLogSequenceNumber());
    m_maxSeenBinaryLogUniqueId=Math.max(m_maxSeenBinaryLogUniqueId,response.getBinaryLogUniqueId());
    if (response.getPayload() != null) {
      m_repairLogUnion.add(response);
      if (tmLog.isTraceEnabled()) {
        tmLog.trace(m_whoami + " collected from " + CoreUtils.hsIdToString(response.m_sourceHSId)+ ", message: "+ response.getPayload());
      }
    }
    if (rrs.update(response)) {
      tmLog.debug(m_whoami + "collected " + rrs.m_receivedResponses+ " responses for "+ rrs.m_expectedResponses+ " repair log entries from "+ CoreUtils.hsIdToString(response.m_sourceHSId));
      if (areRepairLogsComplete()) {
        repairSurvivors();
      }
    }
  }
}
