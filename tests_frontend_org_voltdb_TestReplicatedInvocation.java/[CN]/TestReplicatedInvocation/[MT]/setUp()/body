{
  VoltProjectBuilder builder=new VoltProjectBuilder();
  String schema=" create table A (i integer not null, primary key (i));";
  builder.addLiteralSchema(schema);
  builder.addPartitionInfo("A","i");
  builder.addProcedures(ReplicatedProcedure.class);
  root=File.createTempFile("temp","replicatedinvocation");
  root.delete();
  assertTrue(root.mkdir());
  File cat=File.createTempFile("temp","replicatedinvocationcat");
  cat.deleteOnExit();
  assertTrue(builder.compile(cat.getAbsolutePath(),2,1,0,root.getAbsolutePath()));
  String deployment=builder.getPathToDeployment();
  server=new ServerThread(cat.getAbsolutePath(),deployment,BackendTarget.NATIVE_EE_JNI);
  server.m_config.m_replicationRole=role;
  server.start();
  server.waitForInitialization();
}
