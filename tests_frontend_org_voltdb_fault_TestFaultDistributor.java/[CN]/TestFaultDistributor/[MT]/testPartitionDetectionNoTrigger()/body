{
  MockVoltDB voltdb=new MockVoltDB();
  voltdb.addHost(0);
  voltdb.addHost(1);
  voltdb.addHost(3);
  FaultDistributor dut=new FaultDistributor(voltdb,true);
  MockFaultHandler nodeFaultHdlr=new MockFaultHandler(FaultType.NODE_FAILURE);
  MockFaultHandler clusterPartHdlr=new MockFaultHandler(FaultType.CLUSTER_PARTITION);
  dut.registerFaultHandler(FaultType.NODE_FAILURE,nodeFaultHdlr,1);
  dut.registerFaultHandler(FaultType.CLUSTER_PARTITION,clusterPartHdlr,2);
  dut.reportFault(new NodeFailureFault(0,"hostname"));
  nodeFaultHdlr.m_handledFaults.acquire();
  assertTrue(nodeFaultHdlr.m_gotFault);
  assertFalse(clusterPartHdlr.m_handledFaults.tryAcquire());
}
