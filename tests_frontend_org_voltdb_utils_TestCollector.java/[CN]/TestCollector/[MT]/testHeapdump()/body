{
  int pid=getpid(voltDbRootPath);
  File heapdumpGenerated=new File("/tmp","java_pid" + pid + ".hprof");
  heapdumpGenerated.deleteOnExit();
  String[] cmd={"jmap","-dump:file=/tmp/java_pid" + pid + ".hprof",Integer.toString(pid)};
  Process p=Runtime.getRuntime().exec(cmd);
  p.waitFor();
  client.close();
  cluster.shutDown();
  File collectionDecompressed=collect(voltDbRootPath,false);
  File heapdumpFile=new File(collectionDecompressed,"java_pid" + pid + ".hprof");
  assertTrue(heapdumpFile.exists());
}
