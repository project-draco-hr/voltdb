{
  long now=System.currentTimeMillis();
  ClientResponseImpl response=null;
  FastDeserializer fds=new FastDeserializer(buf);
  try {
    response=fds.readObject(ClientResponseImpl.class);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  ProcedureCallback cb=null;
  long callTime=0;
  int delta=0;
synchronized (this) {
    Object stuff[]=m_callbacks.remove(response.getClientHandle());
    callTime=(Long)stuff[0];
    delta=(int)(now - callTime);
    cb=(ProcedureCallback)stuff[1];
    m_invocationsCompleted++;
    final byte status=response.getStatus();
    boolean abort=false;
    boolean error=false;
    if (status == ClientResponse.USER_ABORT || status == ClientResponse.GRACEFUL_FAILURE) {
      m_invocationAborts++;
      abort=true;
    }
 else     if (status != ClientResponse.SUCCESS) {
      m_invocationErrors++;
      error=true;
    }
    updateStats((String)stuff[2],delta,response.getClusterRoundtrip(),abort,error);
  }
  if (cb != null) {
    response.setClientRoundtrip(delta);
    cb.clientCallback(response);
  }
 else   if (m_isConnected) {
    assert(false);
    System.err.println("Invalid response: no callback");
  }
}
