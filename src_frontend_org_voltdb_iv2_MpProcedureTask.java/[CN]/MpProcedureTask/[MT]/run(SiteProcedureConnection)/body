{
  hostLog.debug("STARTING: " + this);
  MpTransactionState txn=(MpTransactionState)m_txn;
  if (m_isRestart && (txn.m_task.getStoredProcedureName().startsWith("@") && !txn.m_task.getStoredProcedureName().startsWith("@AdHoc"))) {
    InitiateResponseMessage errorResp=new InitiateResponseMessage(txn.m_task);
    errorResp.setResults(new ClientResponseImpl(ClientResponse.UNEXPECTED_FAILURE,new VoltTable[]{},"Failure while running system procedure " + txn.m_task.getStoredProcedureName() + ", and system procedures can not be restarted."));
    txn.setNeedsRollback();
    completeInitiateTask(siteConnection);
    errorResp.m_sourceHSId=m_initiator.getHSId();
    m_initiator.deliver(errorResp);
    hostLog.debug("SYSPROCFAIL: " + this);
    return;
  }
  final InitiateResponseMessage response=processInitiateTask(txn.m_task,siteConnection);
  int status=response.getClientResponseData().getStatus();
  if (status != ClientResponse.TXN_RESTART || (status == ClientResponse.TXN_RESTART && m_msg.isReadOnly())) {
    if (!response.shouldCommit()) {
      txn.setNeedsRollback();
    }
    completeInitiateTask(siteConnection);
    response.m_sourceHSId=m_initiator.getHSId();
    m_initiator.deliver(response);
    execLog.l7dlog(Level.TRACE,LogKeys.org_voltdb_ExecutionSite_SendingCompletedWUToDtxn.name(),null);
    hostLog.debug("COMPLETE: " + this);
  }
 else {
    restartTransaction();
    hostLog.debug("RESTART: " + this);
  }
}
