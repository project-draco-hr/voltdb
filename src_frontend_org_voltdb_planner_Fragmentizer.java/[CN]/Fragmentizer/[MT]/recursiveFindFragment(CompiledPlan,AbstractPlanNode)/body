{
  if (currentNode instanceof ReceivePlanNode) {
    ReceivePlanNode recvNode=(ReceivePlanNode)currentNode;
    assert(recvNode.getChildCount() == 1);
    AbstractPlanNode childNode=recvNode.getChild(0);
    assert(childNode instanceof SendPlanNode);
    SendPlanNode sendNode=(SendPlanNode)childNode;
    sendNode.clearParents();
    recvNode.cacheDeterminism();
    recvNode.clearChildren();
    plan.subPlanGraph=sendNode;
    assert(plan.subPlanGraph.findAllNodesOfType(PlanNodeType.RECEIVE).size() == 0);
    return;
  }
  for (int i=0; i < currentNode.getChildCount(); i++) {
    AbstractPlanNode childNode=currentNode.getChild(i);
    recursiveFindFragment(plan,childNode);
  }
}
