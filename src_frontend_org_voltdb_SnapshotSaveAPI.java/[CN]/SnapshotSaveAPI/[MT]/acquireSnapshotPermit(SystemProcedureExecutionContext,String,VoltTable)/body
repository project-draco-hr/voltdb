{
  try {
    SnapshotSiteProcessor.m_snapshotPermits.acquire();
  }
 catch (  Exception e) {
    result.addRow(Integer.parseInt(context.getSite().getHost().getTypeName()),hostname,"","FAILURE",e.toString());
    return result;
  }
 finally {
synchronized (SnapshotSiteProcessor.m_snapshotPermits) {
      if (SnapshotSiteProcessor.m_snapshotPermits.availablePermits() == 0 && SnapshotSiteProcessor.m_snapshotCreateSetupPermit.availablePermits() == 0) {
        SnapshotSiteProcessor.m_snapshotCreateSetupPermit.release();
      }
    }
  }
  return null;
}
