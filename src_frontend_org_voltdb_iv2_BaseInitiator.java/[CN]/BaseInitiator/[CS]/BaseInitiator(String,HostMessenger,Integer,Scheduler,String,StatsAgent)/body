{
  m_zkMailboxNode=zkMailboxNode;
  m_messenger=messenger;
  m_partitionId=partition;
  m_scheduler=scheduler;
  RejoinProducer rejoinProducer=new RejoinProducer(m_partitionId,scheduler.m_tasks);
  m_initiatorMailbox=new InitiatorMailbox(m_partitionId,m_scheduler,m_messenger,m_repairLog,rejoinProducer);
  m_tickProducer=new TickProducer(m_scheduler.m_tasks);
  m_messenger.createMailbox(null,m_initiatorMailbox);
  rejoinProducer.setMailbox(m_initiatorMailbox);
  m_scheduler.setMailbox(m_initiatorMailbox);
  StarvationTracker st=new StarvationTracker(getInitiatorHSId());
  m_scheduler.setStarvationTracker(st);
  agent.registerStatsSource(SysProcSelector.STARVATION,getInitiatorHSId(),st);
  String partitionString=" ";
  if (m_partitionId != -1) {
    partitionString=" for partition " + m_partitionId + " ";
  }
  m_whoami=whoamiPrefix + " " + CoreUtils.hsIdToString(getInitiatorHSId())+ partitionString;
}
