{
  m_zkMailboxNode=zkMailboxNode;
  m_messenger=messenger;
  m_partitionId=partition;
  m_scheduler=scheduler;
  boolean isLiveRejoin=startAction == VoltDB.START_ACTION.LIVE_REJOIN;
  JoinProducerBase rejoinProducer=VoltDB.createForRejoin(startAction) ? new RejoinProducer(m_partitionId,scheduler.m_tasks,voltroot,isLiveRejoin) : null;
  if (m_partitionId == MpInitiator.MP_INIT_PID) {
    m_initiatorMailbox=new MpInitiatorMailbox(m_partitionId,m_scheduler,m_messenger,m_repairLog,rejoinProducer);
  }
 else {
    m_initiatorMailbox=new InitiatorMailbox(m_partitionId,m_scheduler,m_messenger,m_repairLog,rejoinProducer);
  }
  m_messenger.createMailbox(null,m_initiatorMailbox);
  if (rejoinProducer != null) {
    rejoinProducer.setMailbox(m_initiatorMailbox);
  }
  m_scheduler.setMailbox(m_initiatorMailbox);
  StarvationTracker st=new StarvationTracker(getInitiatorHSId());
  m_scheduler.setStarvationTracker(st);
  m_scheduler.setLock(m_initiatorMailbox);
  agent.registerStatsSource(SysProcSelector.STARVATION,getInitiatorHSId(),st);
  String partitionString=" ";
  if (m_partitionId != -1) {
    partitionString=" for partition " + m_partitionId + " ";
  }
  m_whoami=whoamiPrefix + " " + CoreUtils.hsIdToString(getInitiatorHSId())+ partitionString;
}
