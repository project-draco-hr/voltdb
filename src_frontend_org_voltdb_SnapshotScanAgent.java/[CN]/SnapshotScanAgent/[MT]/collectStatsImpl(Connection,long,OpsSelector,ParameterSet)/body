{
  JSONObject obj=new JSONObject();
  obj.put("selector","SNAPSHOTSCAN");
  String err=null;
  if (selector == OpsSelector.SNAPSHOTSCAN) {
    err=parseParams(params,obj);
  }
 else {
    err="SnapshotScanAgent received non-SNAPSHOTSCAN selector: " + selector.name();
  }
  if (err != null) {
    sendErrorResponse(c,ClientResponse.GRACEFUL_FAILURE,err,clientHandle);
    return;
  }
  String subselector=obj.getString("subselector");
  PendingOpsRequest psr=new PendingOpsRequest(selector,subselector,c,clientHandle,System.currentTimeMillis());
  distributeOpsWork(psr,obj);
}
