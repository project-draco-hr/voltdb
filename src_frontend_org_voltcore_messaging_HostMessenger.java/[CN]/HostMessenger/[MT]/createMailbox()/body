{
  final long siteId=m_nextSiteId.getAndIncrement();
  long hsId=getHostId() + (siteId << 32);
  SiteMailbox sm=new SiteMailbox(this,siteId);
  while (true) {
    HashMap<Long,Mailbox> original=m_siteMailboxes.get();
    HashMap<Long,Mailbox> update=new HashMap<Long,Mailbox>(original);
    update.put(hsId,sm);
    if (m_siteMailboxes.compareAndSet(original,update)) {
      break;
    }
  }
  return sm;
}
