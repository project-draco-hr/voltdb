import os
import sys
import warnings
import imp
import opcode
dirname = os.path.dirname
distutils_path = os.path.join(os.path.dirname(opcode.__file__), 'distutils')
if (os.path.normpath(distutils_path) == os.path.dirname(os.path.normpath(__file__))):
    warnings.warn('The virtualenv distutils package at %s appears to be in the same location as the system distutils?')
else:
    __path__.insert(0, distutils_path)
    real_distutils = imp.load_module('_virtualenv_distutils', None, distutils_path, ('', '', imp.PKG_DIRECTORY))
    try:
        __revision__ = real_distutils.__revision__
    except AttributeError:
        pass
    __version__ = real_distutils.__version__
from distutils import dist, sysconfig
try:
    basestring
except NameError:
    basestring = str
if (sys.platform == 'win32'):
    from distutils.command.build_ext import build_ext as old_build_ext


    class build_ext(old_build_ext):

        def finalize_options(self):
            if (self.library_dirs is None):
                self.library_dirs = []
            elif isinstance(self.library_dirs, basestring):
                self.library_dirs = self.library_dirs.split(os.pathsep)
            self.library_dirs.insert(0, os.path.join(sys.real_prefix, 'Libs'))
            old_build_ext.finalize_options(self)
    from distutils.command import build_ext as build_ext_module
    build_ext_module.build_ext = build_ext
old_find_config_files = dist.Distribution.find_config_files
dist.Distribution.find_config_files = find_config_files
old_get_python_inc = sysconfig.get_python_inc
sysconfig_get_python_inc.__doc__ = old_get_python_inc.__doc__
sysconfig.get_python_inc = sysconfig_get_python_inc
old_get_python_lib = sysconfig.get_python_lib
sysconfig_get_python_lib.__doc__ = old_get_python_lib.__doc__
sysconfig.get_python_lib = sysconfig_get_python_lib
old_get_config_vars = sysconfig.get_config_vars
sysconfig_get_config_vars.__doc__ = old_get_config_vars.__doc__
sysconfig.get_config_vars = sysconfig_get_config_vars
