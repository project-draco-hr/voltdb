{
  Connection con=null;
  try {
    con=DriverManager.getConnection(url,"","");
    final CallableStatement voteCS=con.prepareCall("{call Vote(?,?,?)}");
    long endTime=System.currentTimeMillis() + (1000l * this.duration);
    while (endTime > System.currentTimeMillis()) {
      PhoneCallGenerator.PhoneCall call=this.switchboard.receive();
      voteCS.setLong(1,call.phoneNumber);
      voteCS.setInt(2,call.contestantNumber);
      voteCS.setLong(3,this.maxVoteCount);
      try {
        VotingBoardResults.incrementAndGet(voteCS.executeUpdate());
      }
 catch (      Exception x) {
        VotingBoardResults.incrementAndGet(3);
      }
    }
  }
 catch (  Exception x) {
    System.err.println("Exception: " + x);
    x.printStackTrace();
  }
 finally {
    try {
      con.close();
    }
 catch (    Exception x) {
    }
  }
}
