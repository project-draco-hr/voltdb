{
  VoltMessage message=null;
  if (block) {
    message=m_mailbox.recvBlocking();
  }
 else {
    message=m_mailbox.recv();
  }
  if (message != null) {
    if (message instanceof RecoveryMessage) {
      RecoveryMessage rm=(RecoveryMessage)message;
      if (!rm.isSourceReady()) {
        VoltDB.crashLocalVoltDB("Source site " + CoreUtils.hsIdToString(m_sourceHSId) + " is not ready, concurrent rejoin is not supported",false,null);
      }
 else       if (!rm.recoveryMessagesAvailable()) {
        recoveryLog.error("Received a recovery initiate request from " + CoreUtils.hsIdToString(rm.sourceSite()) + " while a recovery was already in progress. Ignoring it.");
      }
    }
 else {
      m_messageHandler.handleMessage(message,txnId);
    }
  }
  return message != null;
}
