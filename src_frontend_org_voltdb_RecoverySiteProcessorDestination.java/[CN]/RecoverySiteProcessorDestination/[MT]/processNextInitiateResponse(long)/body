{
  final long startTime=System.currentTimeMillis();
  while (m_incoming.peek() == null && System.currentTimeMillis() - startTime < 500000000) {
    checkMailbox(false,txnId);
    Thread.yield();
  }
  if (m_incoming.peek() == null) {
    recoveryLog.fatal("Timed out waiting to read recovery initiate ack message");
    VoltDB.crashVoltDB();
  }
  if (m_iodaemon.m_lastException != null) {
    recoveryLog.fatal("There was an error while reading the recovery initiate ack message",m_iodaemon.m_lastException);
    VoltDB.crashVoltDB();
  }
  BBContainer ackMessageContainer=m_incoming.poll();
  ByteBuffer ackMessage=ackMessageContainer.b;
  final int sourceSite=ackMessage.getInt();
  final boolean stopBeforeOrSkipPast=ackMessage.get() == 0 ? true : false;
  if (stopBeforeOrSkipPast) {
    m_stopBeforeTxnId=ackMessage.getLong();
    recoveryLog.info("Recovery initiate ack received at site " + m_siteId + " from site "+ sourceSite+ " will sync after txnId "+ m_stopBeforeTxnId);
  }
 else {
    m_skipPastTxnId=ackMessage.getLong();
    recoveryLog.info("Recovery initiate ack received at site " + m_siteId + " from site "+ sourceSite+ " will delay sync until after executing txnId "+ m_skipPastTxnId);
  }
  ackMessageContainer.discard();
}
