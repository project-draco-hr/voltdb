{
  if (_outNIOBuffer == null)   return;
  int len=_outNIOBuffer.length();
  if (isBufferingOutput()) {
    int flushed=super.flush(_outNIOBuffer);
    if (_debug)     __log.debug(_session + " Flushed " + flushed+ "/"+ len);
    if (isBufferingOutput()) {
      Thread.yield();
      flushed=super.flush(_outNIOBuffer);
      if (_debug)       __log.debug(_session + " flushed " + flushed+ "/"+ len);
    }
  }
}
