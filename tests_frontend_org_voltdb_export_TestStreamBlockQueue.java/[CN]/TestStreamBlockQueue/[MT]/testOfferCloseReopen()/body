{
  assertTrue(m_sbq.isEmpty());
  StreamBlock sb=getStreamBlockWithFill((byte)1);
  m_sbq.offer(sb);
  assertEquals(sb,m_sbq.peek());
  assertFalse(m_sbq.isEmpty());
  assertEquals(m_sbq.sizeInBytes(),1024 * 1024 * 2);
  m_sbq.close();
  System.gc();
  System.gc();
  System.gc();
  System.runFinalization();
  m_sbq=new StreamBlockQueue(TEST_DIR,TEST_NONCE);
  sb=m_sbq.peek();
  assertFalse(m_sbq.isEmpty());
  assertEquals(m_sbq.sizeInBytes(),1024 * 1024 * 2 + 12);
  assertEquals(sb,m_sbq.poll());
  assertTrue(sb.uso() == g_uso);
  assertEquals(sb.totalUso(),1024 * 1024 * 2);
  assertTrue(m_sbq.isEmpty());
  assertNull(m_sbq.peek());
  assertNull(m_sbq.peek());
  assertNull(m_sbq.poll());
  assertTrue(m_sbq.isEmpty());
  ByteBuffer buffer=sb.unreleasedBuffer();
  buffer.order(ByteOrder.LITTLE_ENDIAN);
  assertEquals(buffer.getInt(),1024 * 1024 * 2);
  while (buffer.hasRemaining()) {
    assertEquals(buffer.get(),1);
  }
  sb.deleteContent();
}
