{
  final String procedureName=message.getStoredProcedureName();
  if (message.isSinglePartition()) {
    final SpProcedureTask task=new SpProcedureTask(this,this.m_loadedProcs.procs.get(procedureName),m_txnId.incrementAndGet(),message);
    m_scheduler.offer(task);
  }
 else {
    m_clerk=VoltDB.instance().getSiteTracker();
    final List<Long> partitionInitiators=m_clerk.getHSIdsForPartitionInitiators();
    System.out.println("partitionInitiators list: " + partitionInitiators.toString());
    final MpProcedureTask task=new MpProcedureTask(this,this.m_loadedProcs.procs.get(procedureName),m_txnId.incrementAndGet(),message,partitionInitiators);
    m_scheduler.offer(task);
  }
}
