{
  List<RepairLog.Item> logs=m_repairLog.contents();
  Iv2RepairLogRequestMessage req=(Iv2RepairLogRequestMessage)message;
  String whoami="SP " + CoreUtils.hsIdToString(getHSId()) + " handling repair log request id "+ req.getRequestId()+ " for "+ CoreUtils.hsIdToString(message.m_sourceHSId)+ ". ";
  int seq=0;
  int ofTotal=1;
  for (  RepairLog.Item log : logs) {
    if (!req.isMPIRequest() || log.isMP()) {
      ofTotal++;
    }
  }
  tmLog.info(whoami + "Responding with " + ofTotal+ " repair log parts.");
  Iv2RepairLogResponseMessage header=new Iv2RepairLogResponseMessage(req.getRequestId(),seq++,ofTotal,m_repairLog.getLastSpHandle(),null);
  send(message.m_sourceHSId,header);
  for (  RepairLog.Item log : logs) {
    if (!req.isMPIRequest() || log.isMP()) {
      Iv2RepairLogResponseMessage response=new Iv2RepairLogResponseMessage(req.getRequestId(),seq++,ofTotal,log.getHandle(),log.getMessage());
      send(message.m_sourceHSId,response);
    }
  }
}
