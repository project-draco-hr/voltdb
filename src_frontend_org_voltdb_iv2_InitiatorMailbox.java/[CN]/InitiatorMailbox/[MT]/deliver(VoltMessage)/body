{
  if (message instanceof Iv2InitiateTaskMessage) {
    String procedureName=((Iv2InitiateTaskMessage)message).getStoredProcedureName();
    ProcedureTask task=new ProcedureTask(this,this.loadedProcs.procs.get(procedureName),txnId.incrementAndGet(),(Iv2InitiateTaskMessage)message);
    scheduler.offer(task);
  }
 else   if (message instanceof InitiateResponseMessage) {
    InitiateResponseMessage response=(InitiateResponseMessage)message;
    Pair<Long,InitiateResponseMessage> nextResponse=role.offerResponse(response);
    if (nextResponse != null) {
      try {
        send(nextResponse.getFirst(),nextResponse.getSecond());
      }
 catch (      MessagingException e) {
        hostLog.error("Failed to deliver response from execution site.",e);
      }
    }
  }
}
