{
  if (message instanceof InitiateTaskMessage) {
synchronized (role) {
      role.offerInitiateTask((InitiateTaskMessage)message);
      if (elector.isLeader()) {
        replicateInitiation((InitiateTaskMessage)message);
      }
    }
  }
 else   if (message instanceof InitiateResponseMessage) {
    InitiateResponseMessage response=(InitiateResponseMessage)message;
    Pair<Long,InitiateResponseMessage> nextResponse=role.offerResponse(response);
    if (nextResponse != null) {
      try {
        send(nextResponse.getFirst(),nextResponse.getSecond());
      }
 catch (      MessagingException e) {
        hostLog.error("Failed to deliver response from execution site.",e);
      }
    }
  }
}
