{
  role=new ReplicatedRole(hsId);
  String electionDirForPartition=VoltZK.electionDirForPartition(partitionId);
  elector=new LeaderElector(messenger.getZK(),electionDirForPartition,Long.toString(this.hsId),null,this);
  elector.start(true);
  if (elector.isLeader()) {
    boolean success=false;
    for (int ii=0; ii < 4000; ii++) {
      List<String> children=babySitter.lastSeenChildren();
      if (children == null || children.size() < totalReplicasForPartition) {
        Thread.sleep(5);
      }
 else {
        success=true;
        break;
      }
    }
    if (!success) {
      VoltDB.crashLocalVoltDB("Not all replicas for partition " + partitionId + " are ready in time",false,null);
    }
  }
}
