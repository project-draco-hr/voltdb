{
  m_role=new ReplicatedRole(m_hsId);
  String electionDirForPartition=VoltZK.electionDirForPartition(m_partitionId);
  m_elector=new LeaderElector(m_messenger.getZK(),electionDirForPartition,Long.toString(this.m_hsId),null,this);
  m_elector.start(true);
  if (m_elector.isLeader()) {
    boolean success=false;
    for (int ii=0; ii < 4000; ii++) {
      List<String> children=m_babySitter.lastSeenChildren();
      if (children == null || children.size() < totalReplicasForPartition) {
        Thread.sleep(5);
      }
 else {
        success=true;
        break;
      }
    }
    if (!success) {
      VoltDB.crashLocalVoltDB("Not all replicas for partition " + m_partitionId + " are ready in time",false,null);
    }
  }
}
