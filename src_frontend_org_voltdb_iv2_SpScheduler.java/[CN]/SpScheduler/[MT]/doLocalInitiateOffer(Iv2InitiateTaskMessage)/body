{
  final String procedureName=msg.getStoredProcedureName();
  final SpProcedureTask task=new SpProcedureTask(m_mailbox,procedureName,m_pendingTasks,msg,m_drGateway);
  if (!msg.isReadOnly()) {
    ListenableFuture<Object> durabilityBackpressureFuture=m_cl.log(msg,msg.getSpHandle(),null,m_durabilityListener,task);
    if (durabilityBackpressureFuture != null) {
      m_pendingTasks.offer(task.setDurabilityBackpressureFuture(durabilityBackpressureFuture));
    }
  }
 else {
    m_pendingTasks.offer(task);
  }
}
