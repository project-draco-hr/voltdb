{
  if (m_replicaHSIds.length > 0 && inputDeps == null) {
    try {
      FragmentTaskMessage replmsg=new FragmentTaskMessage(m_mailbox.getHSId(),m_mailbox.getHSId(),message);
      m_mailbox.send(m_replicaHSIds,replmsg);
    }
 catch (    MessagingException e) {
      hostLog.error("Failed to deliver response from execution site.",e);
    }
  }
  TransactionState txn=m_outstandingTxns.get(message.getTxnId());
  if (txn == null) {
    long localTxnId=m_txnId.incrementAndGet();
    txn=new ParticipantTransactionState(localTxnId,message);
    m_outstandingTxns.put(message.getTxnId(),txn);
  }
  if (message.isSysProcTask()) {
    final SysprocFragmentTask task=new SysprocFragmentTask(m_mailbox,(ParticipantTransactionState)txn,m_pendingTasks,message,inputDeps);
    m_pendingTasks.offer(task);
  }
 else {
    final FragmentTask task=new FragmentTask(m_mailbox,(ParticipantTransactionState)txn,m_pendingTasks,message,inputDeps);
    m_pendingTasks.offer(task);
  }
}
