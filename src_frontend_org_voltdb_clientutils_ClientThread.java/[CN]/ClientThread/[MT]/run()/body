{
  try {
    this.initialize();
    for (int i=0; i < this.StepCount; i++)     this.CycleStepEndTime[i]=System.currentTimeMillis() + this.CycleStepDuration[i];
    while (this.Monitor.isRunning()) {
      this.processOne();
      if (this.SleepTime > 0)       Thread.sleep(this.SleepTime);
      for (int i=0; i < this.StepCount; i++) {
        this.CycleStepCount[i]++;
        if (this.CycleStepCount[i] >= this.CycleStepMaxCount[i]) {
          long sleepDuration=this.CycleStepEndTime[i] - System.currentTimeMillis() - 1;
          if (sleepDuration > 0)           Thread.sleep(sleepDuration);
          while (System.currentTimeMillis() < this.CycleStepEndTime[i])           ;
          this.CycleStepEndTime[i]=System.currentTimeMillis() + this.CycleStepDuration[i];
          this.CycleStepCount[i]=0l;
        }
      }
    }
    this.finalize();
  }
 catch (  Exception e1) {
    System.out.printf("Thread %d Failed",this.Id);
    e1.printStackTrace();
  }
 finally {
    try {
      this.Client.drain();
    }
 catch (    Exception e2) {
    }
    try {
      this.Client.close();
    }
 catch (    Exception e2) {
    }
  }
}
