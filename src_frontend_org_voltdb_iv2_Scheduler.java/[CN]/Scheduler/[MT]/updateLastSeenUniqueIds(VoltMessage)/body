{
  long sequenceWithUniqueId=Long.MIN_VALUE;
  boolean commandLog=(message instanceof TransactionInfoBaseMessage && (((TransactionInfoBaseMessage)message).isForReplay()));
  boolean drV1=((message instanceof TransactionInfoBaseMessage && ((TransactionInfoBaseMessage)message).isForDRv1()));
  boolean sentinel=message instanceof MultiPartitionParticipantMessage;
  boolean replay=commandLog || sentinel || drV1;
  assert(!(commandLog && drV1));
  if (commandLog || sentinel) {
    sequenceWithUniqueId=((TransactionInfoBaseMessage)message).getUniqueId();
  }
 else   if (drV1) {
    VoltDB.crashLocalVoltDB("DRv1 path should never be called",true,null);
    sequenceWithUniqueId=((TransactionInfoBaseMessage)message).getOriginalTxnId();
  }
  if (replay) {
    m_replaySequencer.updateLastSeenUniqueId(sequenceWithUniqueId,(TransactionInfoBaseMessage)message);
    m_replaySequencer.updateLastPolledUniqueId(sequenceWithUniqueId,(TransactionInfoBaseMessage)message);
  }
}
