{
  boolean retval=false;
  try {
    System.out.println("Attempting to bind to leader ip " + m_coordIp);
    ServerSocketChannel listenerSocket=ServerSocketChannel.open();
    listenerSocket.socket().bind(m_coordIp);
    listenerSocket.socket().setPerformancePreferences(0,2,1);
    listenerSocket.configureBlocking(false);
    m_listenerSockets.add(listenerSocket);
    System.out.println("bound");
  }
 catch (  IOException e) {
    if (!m_listenerSockets.isEmpty()) {
      try {
        m_listenerSockets.get(0).close();
        m_listenerSockets.clear();
      }
 catch (      IOException ex) {
        new VoltLogger(SocketJoiner.class.getName()).l7dlog(Level.FATAL,null,ex);
      }
    }
  }
  if (!m_listenerSockets.isEmpty()) {
    retval=true;
    if (m_hostLog != null)     m_hostLog.info("Connecting to VoltDB cluster as the leader...");
    m_es.submit(new Callable<Object>(){
      @Override public Object call() throws Exception {
        externalInitBarrier.await();
        return null;
      }
    }
);
  }
 else {
    if (m_hostLog != null) {
      m_hostLog.info("Connecting to the VoltDB cluster leader " + m_coordIp);
    }
    connectToPrimary();
  }
  m_es.submit(new Runnable(){
    @Override public void run(){
      try {
        runPrimary();
      }
 catch (      InterruptedException e) {
      }
catch (      Throwable e) {
        org.voltdb.VoltDB.crashLocalVoltDB("Error in socket joiner run loop",false,e);
      }
    }
  }
);
  return retval;
}
