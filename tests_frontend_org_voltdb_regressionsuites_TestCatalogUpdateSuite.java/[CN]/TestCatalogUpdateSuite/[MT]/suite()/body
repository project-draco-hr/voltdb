{
  MultiConfigSuiteBuilder builder=new MultiConfigSuiteBuilder(TestCatalogUpdateSuite.class);
  VoltServerConfig config=new LocalCluster("catalogupdate-cluster-base.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  TPCCProjectBuilder project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addDefaultPartitioning();
  project.addProcedures(BASEPROCS);
  boolean basecompile=config.compile(project);
  assertTrue(basecompile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-base.xml"));
  builder.addServerConfig(config);
  config=new LocalCluster("catalogupdate-cluster-basewithdeployment.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addDefaultPartitioning();
  project.addProcedures(BASEPROCS);
  boolean compile=config.compile(project,false);
  assertTrue(compile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-basewithdeployment.xml"));
  config=new LocalCluster("catalogupdate-cluster-addtables.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addSchema(TestCatalogUpdateSuite.class.getResource("testorderby-ddl.sql").getPath());
  project.addDefaultPartitioning();
  project.addPartitionInfo("O1","PKEY");
  project.addProcedures(BASEPROCS_OPROCS);
  compile=config.compile(project,false);
  assertTrue(compile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-addtables.xml"));
  try {
    config=new LocalCluster("catalogupdate-cluster-addtableswithmatview.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
    project=new TPCCProjectBuilder();
    project.addDefaultSchema();
    project.addSchema(TestCatalogUpdateSuite.class.getResource("testorderby-ddl.sql").getPath());
    project.addLiteralSchema("CREATE VIEW MATVIEW_O1(C1,NUM) AS SELECT A_INT, COUNT(*) FROM O1 GROUP BY A_INT;");
    project.addDefaultPartitioning();
    project.addPartitionInfo("O1","PKEY");
    project.addProcedures(BASEPROCS_OPROCS);
    compile=config.compile(project,false);
    assertTrue(compile);
    copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-addtableswithmatview.xml"));
  }
 catch (  IOException e) {
    fail();
  }
  config=new LocalCluster("catalogupdate-cluster-expanded.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addDefaultPartitioning();
  project.addProcedures(EXPANDEDPROCS);
  compile=config.compile(project,false);
  assertTrue(compile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-expanded.xml"));
  config=new LocalCluster("catalogupdate-cluster-conflict.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addDefaultPartitioning();
  project.addProcedures(CONFLICTPROCS);
  compile=config.compile(project,false);
  assertTrue(compile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-conflict.xml"));
  config=new LocalCluster("catalogupdate-cluster-many.jar",2,2,1,BackendTarget.NATIVE_EE_JNI);
  project=new TPCCProjectBuilder();
  project.addDefaultSchema();
  project.addDefaultPartitioning();
  project.addProcedures(SOMANYPROCS);
  compile=config.compile(project,false);
  assertTrue(compile);
  copyFile(project.getPathToDeployment(),Configuration.getPathToCatalogForTest("catalogupdate-cluster-many.xml"));
  return builder;
}
