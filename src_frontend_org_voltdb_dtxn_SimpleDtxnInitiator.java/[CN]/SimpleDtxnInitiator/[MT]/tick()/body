{
  final long txnId=m_idManager.getNextUniqueTransactionId();
  final long now=m_idManager.getLastUsedTime();
  int[] outOfDateSites=VoltDB.instance().getCatalogContext().siteTracker.getUpExecutionSites();
  try {
    for (    int siteId : outOfDateSites) {
      long newestSafeTxnId=m_safetyState.getNewestSafeTxnIdForExecutorBySiteId(siteId);
      HeartbeatMessage tickNotice=new HeartbeatMessage(m_siteId,txnId,newestSafeTxnId);
      m_mailbox.send(siteId,VoltDB.DTXN_MAILBOX_ID,tickNotice);
    }
  }
 catch (  MessagingException e) {
    throw new RuntimeException(e);
  }
  m_lastTickTime=now;
  return now;
}
