{
  long txnId=m_idManager.getNextUniqueTransactionId();
  ArrayList<Integer> site_ids=m_siteTracker.getAllSitesForPartition(partition);
  ArrayList<InFlightTxnState> txn_states=new ArrayList<InFlightTxnState>();
  increaseBackpressure(messageSize);
  for (  int site_id : site_ids) {
    InFlightTxnState txn=new InFlightTxnState(txnId,site_id,null,isReadOnly,true,invocation.getShallowCopy(),clientData,messageSize,now,connectionId,connectionHostname);
    txn_states.add(txn);
    m_queue.addPendingTxn(txn);
  }
  for (  InFlightTxnState txn_state : txn_states) {
    sendTransactionToCoordinator(txn_state);
  }
}
