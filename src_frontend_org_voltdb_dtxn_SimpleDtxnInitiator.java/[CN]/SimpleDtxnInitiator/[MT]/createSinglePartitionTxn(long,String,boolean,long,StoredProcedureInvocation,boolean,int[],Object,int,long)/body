{
  List<Long> siteIds;
  SiteTracker siteTracker=VoltDB.instance().getSiteTracker();
  if (partitions.length == 1) {
    siteIds=siteTracker.getSitesForPartition(partitions[0]);
  }
 else {
    siteIds=siteTracker.getSitesForPartitions(partitions);
  }
  increaseBackpressure(messageSize);
  InFlightTxnState state=new InFlightTxnState(txnId,siteIds.get(0),null,null,isReadOnly,true,invocation.getShallowCopy(),clientData,messageSize,now,connectionId,connectionHostname,adminConnection,false);
  for (  long siteId : siteIds) {
    state.addCoordinator(siteId);
  }
  m_mailbox.addPendingTxn(state);
  for (  long coordId : state.outstandingCoordinators) {
    sendTransactionToCoordinator(state,coordId);
  }
}
