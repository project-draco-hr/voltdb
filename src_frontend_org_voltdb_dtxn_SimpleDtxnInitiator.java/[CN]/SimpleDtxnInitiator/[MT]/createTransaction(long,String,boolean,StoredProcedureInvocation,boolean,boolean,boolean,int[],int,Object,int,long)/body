{
  long txnId;
  if (invocation.getType() == ProcedureInvocationType.REPLICATED) {
    txnId=invocation.getTxnId();
    m_idManager.updateState(txnId);
  }
 else {
    txnId=m_idManager.getNextUniqueTransactionId();
  }
  createTransaction(connectionId,connectionHostname,adminConnection,txnId,invocation,isReadOnly,isSinglePartition,isEveryPartition,partitions,numPartitions,clientData,messageSize,now);
}
