{
  long txnCount=0;
  for (  String client : results.getClientNames()) {
    for (    String txn : results.getTransactionNames()) {
      Result[] rs=results.getResultsForClientAndTransaction(client,txn);
      for (      Result r : rs)       txnCount+=r.transactionCount;
    }
  }
  long txnDelta=0;
  for (  String client : results.getClientNames()) {
    for (    String txn : results.getTransactionNames()) {
      Result[] rs=results.getResultsForClientAndTransaction(client,txn);
      Result r=rs[rs.length - 1];
      txnDelta+=r.transactionCount;
    }
  }
  int pollIndex=results.getCompletedIntervalCount();
  long duration=results.getTotalDuration();
  long pollCount=duration / results.getIntervalDuration();
  long currentTime=pollIndex * results.getIntervalDuration();
  System.out.printf("\nAt time %d out of %d (%d%%):\n",currentTime,duration,currentTime * 100 / duration);
  System.out.printf("  In the past %d ms:\n",duration / pollCount);
  System.out.printf("    Completed %d txns at a rate of %.2f txns/s\n",txnDelta,txnDelta / (double)(results.getIntervalDuration()) * 1000.0);
  System.out.printf("  Since the benchmark began:\n");
  System.out.printf("    Completed %d txns at a rate of %.2f txns/s\n",txnCount,txnCount / (double)(pollIndex * results.getIntervalDuration()) * 1000.0);
  if ((pollIndex * results.getIntervalDuration()) >= duration) {
    System.out.println("\n============================== BENCHMARK RESULTS ==============================");
    System.out.printf("Time: %d ms\n",duration);
    System.out.printf("Total transactions: %d\n",txnCount);
    System.out.printf("Transactions per second: %.2f\n",txnCount / (double)duration * 1000.0);
    for (    String transactionName : results.getTransactionNames()) {
      txnCount=getTotalCountForTransaction(transactionName,results);
      System.out.printf("%23s: %10d total %12.2f txn/s %12.2f txn/m\n",transactionName,txnCount,txnCount / (double)duration * 1000.0,txnCount / (double)duration * 1000.0 * 60.0);
    }
    System.out.println("Breakdown by client:");
    for (    String clientName : results.getClientNames()) {
      txnCount=getTotalCountForClient(clientName,results);
      System.out.printf("%23s: %10d total %12.2f txn/s %12.2f txn/m\n",clientName,txnCount,txnCount / (double)duration * 1000.0,txnCount / (double)duration * 1000.0 * 60.0);
    }
    System.out.println("===============================================================================\n");
  }
  System.out.flush();
}
