{
  try {
    JSONArray mailboxes=null;
    if (!m_mailboxes.has(type.name())) {
      mailboxes=new JSONArray();
      m_mailboxes.put(type.name(),mailboxes);
    }
 else {
      mailboxes=m_mailboxes.getJSONArray(type.name());
    }
    for (int ii=0; ii < mailboxes.length(); ii++) {
      if (mailboxes.getJSONObject(ii).getLong("HSId") == mnc.HSId) {
        throw new RuntimeException("Mailbox with HSId " + mnc.HSId + " is already registered");
      }
    }
    JSONObject mailbox=new JSONObject();
    mailbox.put("HSId",mnc.HSId);
    if (mnc.partitionId != null) {
      mailbox.put("partitionId",mnc.partitionId);
    }
    mailboxes.put(mailbox);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
