def _under_prefix(location):
    if ('install' not in sys.argv):
        return True
    args = sys.argv[(sys.argv.index('install') + 1):]
    for (index, arg) in enumerate(args):
        for option in ('--root', '--prefix'):
            if arg.startswith(('%s=' % option)):
                top_dir = arg.split('root=')[(-1)]
                return location.startswith(top_dir)
            elif (arg == option):
                if (len(args) > index):
                    top_dir = args[(index + 1)]
                    return location.startswith(top_dir)
        if ((arg == '--user') and (USER_SITE is not None)):
            return location.startswith(USER_SITE)
    return True
