def _fake_setuptools():
    log.warn('Scanning installed packages')
    try:
        import pkg_resources
    except ImportError:
        log.warn('Setuptools or Distribute does not seem to be installed.')
        return
    ws = pkg_resources.working_set
    try:
        setuptools_dist = ws.find(pkg_resources.Requirement.parse('setuptools', replacement=False))
    except TypeError:
        setuptools_dist = ws.find(pkg_resources.Requirement.parse('setuptools'))
    if (setuptools_dist is None):
        log.warn('No setuptools distribution found')
        return
    setuptools_location = setuptools_dist.location
    log.warn('Setuptools installation detected at %s', setuptools_location)
    if (not _under_prefix(setuptools_location)):
        log.warn('Not patching, --root or --prefix is installing Distribute in another location')
        return
    if (not setuptools_location.endswith('.egg')):
        log.warn('Non-egg installation')
        res = _remove_flat_installation(setuptools_location)
        if (not res):
            return
    else:
        log.warn('Egg installation')
        pkg_info = os.path.join(setuptools_location, 'EGG-INFO', 'PKG-INFO')
        if (os.path.exists(pkg_info) and _same_content(pkg_info, SETUPTOOLS_PKG_INFO)):
            log.warn('Already patched.')
            return
        log.warn('Patching...')
        res = _patch_egg_dir(setuptools_location)
        if (not res):
            return
    log.warn('Patching complete.')
    _relaunch()
