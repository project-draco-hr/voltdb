{
  client.callProcedure("NonDeterministicSPProc",0,NonDeterministicSPProc.MISMATCH_INSERTION);
  try {
    client.callProcedure("@AdHoc","select * from kv order by key");
  }
 catch (  ProcCallException e) {
    fail("Deterministic ad hoc query succeeded for non-deterministic results?");
  }
}
