{
  ImmutableMap.Builder<TypeVariable<?>,Type> builder=ImmutableMap.builder();
  builder.putAll(map);
  for (  Map.Entry<? extends TypeVariable<?>,? extends Type> mapping : mappings.entrySet()) {
    TypeVariable<?> variable=mapping.getKey();
    Type type=mapping.getValue();
    checkArgument(!variable.equals(type),"Type variable %s bound to itself",variable);
    builder.put(variable,type);
  }
  return new TypeTable(builder.build());
}
