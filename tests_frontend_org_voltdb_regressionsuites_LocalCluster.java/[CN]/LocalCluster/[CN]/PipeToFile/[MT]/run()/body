{
  assert(m_writer != null);
  assert(m_input != null);
  int location=0;
  boolean eof=false;
  while (!eof) {
    try {
      int data=m_input.read();
      if (data == -1) {
        eof=true;
      }
 else {
        if (!m_witnessedReady.get() && m_token[location] == data) {
          location++;
          if (location == m_token.length) {
synchronized (this) {
              m_witnessedReady.set(true);
              this.notifyAll();
            }
          }
        }
 else {
          location=0;
        }
        m_writer.write(data);
        m_writer.flush();
      }
    }
 catch (    IOException ex) {
      eof=true;
    }
  }
}
