{
  assert(m_writer != null);
  assert(m_input != null);
  boolean initLocationFound=false;
  while (!m_eof) {
    try {
      String data=m_input.readLine();
      if (data == null) {
        m_eof=true;
        continue;
      }
      if (data.contains(m_initiatorID)) {
        String[] split=data.split(" ");
synchronized (this) {
          m_hostId=Integer.parseInt(split[split.length - 1]);
        }
      }
      if (!m_witnessedReady.get() && data.contains(m_token)) {
synchronized (this) {
          m_witnessedReady.set(true);
          this.notifyAll();
        }
      }
      if (!initLocationFound && data.contains(m_initToken)) {
        initLocationFound=true;
        m_initTime=System.currentTimeMillis();
      }
      m_writer.write(data + "\n");
      m_writer.flush();
    }
 catch (    IOException ex) {
      m_eof=true;
    }
  }
synchronized (this) {
    notify();
  }
  try {
    m_writer.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}
