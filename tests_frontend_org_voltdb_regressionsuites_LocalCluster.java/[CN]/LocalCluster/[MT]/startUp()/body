{
  assert(!m_running);
  if (m_running) {
    return;
  }
  boolean logtime=false;
  long startTime=0;
  if (logtime) {
    startTime=System.currentTimeMillis();
    System.out.println("********** Starting cluster at: " + startTime);
  }
  Configuration config=new Configuration();
  config.m_backend=m_target;
  config.m_noLoadLibVOLTDB=(m_target == BackendTarget.HSQLDB_BACKEND);
  config.m_pathToCatalog=m_jarFileName;
  config.m_profilingLevel=ProcedureProfiler.Level.DISABLED;
  config.m_port=VoltDB.DEFAULT_PORT;
  config.m_eltPort=RawProcessor.DEFAULT_LISTENER_PORT;
  m_localServer=new ServerThread(config);
  m_localServer.start();
  for (int i=1; i < m_hostCount; i++) {
    try {
      m_procBuilder.command().set(m_portOffset,String.valueOf(VoltDB.DEFAULT_PORT + i));
      if (m_useElt) {
        m_procBuilder.command().set(m_eltPortOffset,String.valueOf(RawProcessor.DEFAULT_LISTENER_PORT + i));
      }
      Process proc=m_procBuilder.start();
      m_cluster.add(proc);
      String testoutputdir=m_buildDir + File.separator + "testoutput";
      File dir=new File(testoutputdir);
      if (dir.exists()) {
        assert(dir.isDirectory());
      }
 else {
        boolean status=dir.mkdirs();
        assert(status);
      }
      PipeToFile ptf=new PipeToFile(testoutputdir + File.separator + getName()+ "-"+ i+ ".txt",proc.getInputStream());
      m_pipes.add(ptf);
      Thread t=new Thread(ptf);
      t.setName("ClusterPipe:" + String.valueOf(i));
      t.start();
    }
 catch (    IOException ex) {
      System.out.println("Failed to start cluster process:" + ex.getMessage());
      Logger.getLogger(LocalCluster.class.getName()).log(Level.SEVERE,null,ex);
      assert(false);
    }
  }
  boolean allReady;
  do {
    if (logtime)     System.out.println("********** pre witness: " + (System.currentTimeMillis() - startTime) + " ms");
    allReady=true;
    for (    PipeToFile pipeToFile : m_pipes) {
      if (pipeToFile.m_witnessedReady.get() != true) {
        try {
synchronized (pipeToFile) {
            pipeToFile.wait();
          }
        }
 catch (        InterruptedException ex) {
          Logger.getLogger(LocalCluster.class.getName()).log(Level.SEVERE,null,ex);
        }
        allReady=false;
        break;
      }
    }
  }
 while (allReady == false);
  if (logtime)   System.out.println("********** post witness: " + (System.currentTimeMillis() - startTime) + " ms");
  m_localServer.waitForInitialization();
  if (logtime)   System.out.println("********** DONE: " + (System.currentTimeMillis() - startTime) + " ms");
  m_running=true;
}
