{
  String original=compile("base",BASEPROCS);
  Catalog catOriginal=catalogForJar(original);
  String updated=compile("expanded",EXPANDEDPROCS);
  Catalog catUpdated=catalogForJar(updated);
  String updatedSerialized=catUpdated.serialize();
  CatalogDiffEngine diff=new CatalogDiffEngine(catOriginal,catUpdated);
  assertTrue(diff.supported());
  catOriginal.execute(diff.commands());
  String updatedOriginalSerialized=catOriginal.serialize();
  assertEquals(updatedOriginalSerialized,updatedSerialized);
}
