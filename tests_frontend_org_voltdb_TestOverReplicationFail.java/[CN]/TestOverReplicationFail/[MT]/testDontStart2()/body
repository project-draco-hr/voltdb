{
  LocalCluster cluster=null;
  Client client=null;
  try {
    VoltProjectBuilder builder=getBuilderForTest();
    builder.setSecurityEnabled(true);
    cluster=new LocalCluster("rejoin.jar",3,3,1,BackendTarget.NATIVE_EE_JNI,false,false);
    cluster.overrideAnyRequestForValgrind();
    cluster.setHasLocalServer(false);
    cluster.setMaxHeap(256);
    boolean success=cluster.compile(builder);
    assertTrue(success);
    MiscUtils.copyFile(builder.getPathToDeployment(),Configuration.getPathToCatalogForTest("rejoin.xml"));
    boolean threw=false;
    try {
      cluster.startUp();
    }
 catch (    RuntimeException rte) {
      if (rte.getMessage().contains("failed to start")) {
        threw=true;
      }
    }
    assertTrue(threw);
  }
  finally {
    if (client != null)     client.close();
    if (cluster != null)     cluster.shutDown();
  }
}
