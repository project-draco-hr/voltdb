{
  String simpleSchema="create table blah (" + "ival bigint default 0 not null, " + "PRIMARY KEY(ival));";
  File schemaFile=VoltProjectBuilder.writeStringToTempFile(simpleSchema);
  String schemaPath=schemaFile.getPath();
  schemaPath=URLEncoder.encode(schemaPath,"UTF-8");
  VoltProjectBuilder builder=new VoltProjectBuilder();
  builder.addSchema(schemaPath);
  builder.addPartitionInfo("blah","ival");
  builder.addStmtProcedure("Insert","insert into blah values (?);");
  boolean success=builder.compile("rejoin.jar",1,2,1,"localhost");
  assertTrue(success);
  LocalCluster cluster=new LocalCluster("rejoin.jar",1,2,1,BackendTarget.NATIVE_EE_JNI);
  cluster.compile(builder);
  cluster.setHasLocalServer(false);
  cluster.startUp();
  cluster.shutDownSingleHost(0);
  VoltDB.Configuration config=new VoltDB.Configuration();
  config.m_pathToCatalog="rejoin.jar";
  config.m_rejoinToHostAndPort="localhost";
  ServerThread localServer=new ServerThread(config);
  localServer.start();
  localServer.waitForInitialization();
  Thread.sleep(100);
  localServer.shutdown();
  cluster.shutDown();
}
