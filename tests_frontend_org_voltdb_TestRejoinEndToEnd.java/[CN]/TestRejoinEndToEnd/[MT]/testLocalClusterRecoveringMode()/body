{
  VoltProjectBuilder builder=getBuilderForTest();
  LocalCluster cluster=new LocalCluster("rejoin.jar",2,2,1,BackendTarget.NATIVE_EE_JNI,LocalCluster.FailureState.ONE_FAILURE,false,false,m_useIv2);
  cluster.overrideAnyRequestForValgrind();
  cluster.setMaxHeap(256);
  boolean success=cluster.compile(builder);
  assertTrue(success);
  MiscUtils.copyFile(builder.getPathToDeployment(),Configuration.getPathToCatalogForTest("rejoin.xml"));
  cluster.setHasLocalServer(false);
  cluster.startUp();
  Thread.sleep(100);
  cluster.shutDown();
  cluster=new LocalCluster("rejoin.jar",2,3,1,BackendTarget.NATIVE_EE_JNI,LocalCluster.FailureState.ONE_RECOVERING,false,true,m_useIv2);
  cluster.setMaxHeap(256);
  cluster.overrideAnyRequestForValgrind();
  success=cluster.compile(builder);
  assertTrue(success);
  MiscUtils.copyFile(builder.getPathToDeployment(),Configuration.getPathToCatalogForTest("rejoin.xml"));
  cluster.setHasLocalServer(false);
  cluster.startUp();
  Thread.sleep(100);
  cluster.shutDown();
}
