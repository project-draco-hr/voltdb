{
  if (isStopping() || isStopped())   return;
  Thread thread=Thread.currentThread();
  ClassLoader old_loader=thread.getContextClassLoader();
  ListIterator itor=sessionIds.listIterator();
  try {
    while (itor.hasNext()) {
      String sessionId=(String)itor.next();
      if (Log.isDebugEnabled())       Log.debug("Expiring session id " + sessionId);
      Session session=(Session)_sessions.get(sessionId);
      if (session != null) {
        session.timeout();
        itor.remove();
      }
 else {
        if (Log.isDebugEnabled())         Log.debug("Unrecognized session id=" + sessionId);
      }
    }
  }
 catch (  Throwable t) {
    if (t instanceof ThreadDeath)     throw ((ThreadDeath)t);
 else     Log.warn("Problem expiring sessions",t);
  }
 finally {
    thread.setContextClassLoader(old_loader);
  }
}
