{
  Catalog newCatalog=catalog.deepCopy();
  newCatalog.execute(diffCommands);
  int incValue=incrementVersion ? 1 : 0;
  long realDepCRC=deploymentCRC > 0 ? deploymentCRC : this.deploymentCRC;
  String realPathToNewJar=pathToNewJar;
  if (realPathToNewJar.startsWith(NO_PATH)) {
    realPathToNewJar=this.pathToCatalogJar;
  }
  CatalogContext retval=new CatalogContext(newCatalog,realPathToNewJar,realDepCRC,catalogVersion + incValue,catalogCRC);
  return retval;
}
