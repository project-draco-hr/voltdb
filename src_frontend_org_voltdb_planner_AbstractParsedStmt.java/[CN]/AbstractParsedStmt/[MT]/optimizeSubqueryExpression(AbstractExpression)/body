{
  ExpressionType exprType=expr.getExpressionType();
  if (ExpressionType.CONJUNCTION_AND == exprType || ExpressionType.CONJUNCTION_OR == exprType) {
    AbstractExpression optimizedLeft=optimizeSubqueryExpression(expr.getLeft());
    expr.setLeft(optimizedLeft);
    AbstractExpression optimizedRight=optimizeSubqueryExpression(expr.getRight());
    expr.setRight(optimizedRight);
    return expr;
  }
  if (expr instanceof ComparisonExpression) {
    QuantifierType quantifer=((ComparisonExpression)expr).getQuantifier();
    if (ExpressionType.COMPARE_EQUAL == expr.getExpressionType() && quantifer == QuantifierType.ANY) {
      expr=optimizeInExpression(expr);
    }
  }
  if (ExpressionType.OPERATOR_EXISTS == expr.getExpressionType()) {
    optimizeExistsExpression(expr);
  }
  return expr;
}
