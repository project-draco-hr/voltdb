{
  final StringBuffer url=new StringBuffer(48);
synchronized (url) {
    String scheme=getScheme();
    int port=getServerPort();
    url.append(scheme);
    url.append("://");
    url.append(getServerName());
    if (_port > 0 && ((scheme.equalsIgnoreCase(URIUtil.HTTP) && port != 80) || (scheme.equalsIgnoreCase(URIUtil.HTTPS) && port != 443))) {
      url.append(':');
      url.append(_port);
    }
    url.append(getRequestURI());
    return url;
  }
}
