{
  AbstractJoinPlanNode retval=null;
  if (nljAccessPlan instanceof IndexScanPlanNode) {
    NestLoopIndexPlanNode nlijNode=new NestLoopIndexPlanNode();
    nlijNode.setJoinType(JoinType.INNER);
    @SuppressWarnings("unused") IndexScanPlanNode innerNode=(IndexScanPlanNode)nljAccessPlan;
    nlijNode.addInlinePlanNode(nljAccessPlan);
    nlijNode.addAndLinkChild(subPlan);
    nlijNode.generateOutputSchema(m_db);
    retval=nlijNode;
  }
 else {
    ArrayList<AbstractExpression> joinClauses=accessPath.joinExprs;
    NestLoopPlanNode nljNode=new NestLoopPlanNode();
    if ((joinClauses != null) && (joinClauses.size() > 0))     nljNode.setJoinPredicate(ExpressionUtil.combine(joinClauses));
    nljNode.setJoinType(JoinType.INNER);
    nljNode.addAndLinkChild(nljAccessPlan);
    nljNode.addAndLinkChild(subPlan);
    nljNode.generateOutputSchema(m_db);
    retval=nljNode;
  }
  return retval;
}
