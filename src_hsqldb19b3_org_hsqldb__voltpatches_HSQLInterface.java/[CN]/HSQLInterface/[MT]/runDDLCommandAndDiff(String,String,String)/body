{
  runDDLCommand(ddl);
  if (expectedIndexAffected != null) {
    assert(expectedTableAffected == null);
    expectedTableAffected=tableNameForIndexName(expectedIndexAffected);
  }
 else {
    assert(expectedIndexAffected == null);
  }
  VoltXMLElement tableXMLNew=getXMLForTable(expectedTableAffected);
  VoltXMLElement tableXMLOld=lastSchema.get(expectedTableAffected);
  if (tableXMLNew == null) {
    tableXMLNew=emptySchema;
  }
  if (tableXMLOld == null) {
    tableXMLOld=emptySchema;
  }
  VoltXMLDiff diff=VoltXMLElement.computeDiff(tableXMLOld,tableXMLNew);
  diff.m_elementOrder.clear();
  lastSchema.put(expectedTableAffected,tableXMLNew.duplicate());
  return diff;
}
