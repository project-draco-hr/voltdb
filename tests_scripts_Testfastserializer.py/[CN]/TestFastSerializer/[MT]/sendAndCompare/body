def sendAndCompare(self, type, value):
    self.fs.writeWireType(type, value)
    self.fs.prependLength()
    self.fs.flush()
    self.fs.bufferForRead()
    self.assertEqual(self.fs.readByte(), type)
    self.assertEqual(self.fs.read(type), value)
