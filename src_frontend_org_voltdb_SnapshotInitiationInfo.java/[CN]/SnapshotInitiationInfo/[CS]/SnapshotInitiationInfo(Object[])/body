{
  m_format=SnapshotFormat.NATIVE;
  m_data=null;
  if (params.length == 3) {
    parseLegacyParams(params);
  }
 else   if (params.length == 1) {
    parseJsonParams(params);
  }
 else {
    throw new Exception("@SnapshotSave requires 3 parameters or alternatively a single JSON blob. " + "Path, nonce, and blocking");
  }
  if (m_nonce.contains("-") || m_nonce.contains(",")) {
    throw new Exception("Provided nonce " + m_nonce + " contains a prohibited character (- or ,)");
  }
}
