{
  m_path=null;
  m_nonce=null;
  m_blocking=true;
  m_format=SnapshotFormat.NATIVE;
  m_data=null;
  m_truncationRequest=false;
  if (params.length == 3) {
    parseLegacyParams(params);
  }
 else   if (params.length == 1) {
    parseJsonParams(params);
  }
 else {
    throw new Exception("@SnapshotSave requires 3 parameters " + "(Path, nonce, and blocking) or alternatively a single JSON blob. ");
  }
  if (m_nonce != null && (m_nonce.contains("-") || m_nonce.contains(","))) {
    throw new Exception("Provided nonce " + m_nonce + " contains a prohibited character (- or ,)");
  }
}
