{
  SSHTools ssh=new SSHTools(username,null);
  try {
    HostAndPort hostAndPort=HostAndPort.fromString(host);
    if (hostAndPort.hasPort()) {
      ssh.getSftpSession(username,password,null,hostAndPort.getHostText(),hostAndPort.getPort(),null);
    }
 else {
      ssh.getSftpSession(username,password,null,host,null);
    }
  }
 catch (  SFTPException e) {
    String errorMsg=e.getCause().getMessage();
    Pattern pattern=Pattern.compile("(?<ExceptionClass>java.*Exception: )(?<Message>.*)");
    Matcher matcher=pattern.matcher(errorMsg);
    if (matcher.matches()) {
      if (errorMsg.startsWith("java.net.UnknownHostException")) {
        throw new Exception("Unknown host: " + matcher.group(2));
      }
 else {
        throw new Exception(matcher.group(2));
      }
    }
 else {
      if (errorMsg.equals("Auth cancel")) {
        throw new Exception("Authorization rejected");
      }
 else {
        throw new Exception(errorMsg.substring(0,1).toUpperCase() + errorMsg.substring(1));
      }
    }
  }
catch (  Exception e) {
    String errorMsg=e.getMessage();
    throw new Exception(errorMsg.substring(0,1).toUpperCase() + errorMsg.substring(1));
  }
}
