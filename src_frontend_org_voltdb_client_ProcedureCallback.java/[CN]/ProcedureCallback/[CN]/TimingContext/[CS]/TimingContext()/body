{
  if (measureLatency) {
    Thread logTimesThread=new Thread(){
      @Override public void run(){
        final File timesFile=new File(hostname + "-latency-distribution-total.png");
        final Thread t1=logTimes(totalTimes,timesFile);
        try {
          t1.join();
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
;
    logTimesThread.setDaemon(false);
    Runtime.getRuntime().addShutdownHook(logTimesThread);
  }
}
