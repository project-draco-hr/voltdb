{
  String commands=Encoder.decodeBase64AndDecompress(catalogDiffCommands);
  ZooKeeper zk=VoltDB.instance().getHostMessenger().getZK();
  zk.setData(VoltZK.catalogbytes,catalogBytes,-1,new ZKUtil.StatCallback(),null);
  zk.setData(VoltZK.deploymentBytes,deploymentString.getBytes("UTF-8"),-1,new ZKUtil.StatCallback(),null);
  CatalogContext context=VoltDB.instance().catalogUpdate(commands,catalogBytes,expectedCatalogVersion,getTransactionId(),deploymentCRC);
  ctx.getExecutionSite().updateCatalog(commands,context);
  VoltTable result=new VoltTable(VoltSystemProcedure.STATUS_SCHEMA);
  result.addRow(VoltSystemProcedure.STATUS_OK);
  return (new VoltTable[]{result});
}
