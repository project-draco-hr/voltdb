{
  Throwable th=(Throwable)request.getAttribute("javax.servlet_voltpatches.error.exception");
  while (th != null) {
    writer.write("<h3>Caused by:</h3><pre>");
    StringWriter sw=new StringWriter();
    PrintWriter pw=new PrintWriter(sw);
    th.printStackTrace(pw);
    pw.flush();
    write(writer,sw.getBuffer().toString());
    writer.write("</pre>\n");
    th=th.getCause();
  }
}
