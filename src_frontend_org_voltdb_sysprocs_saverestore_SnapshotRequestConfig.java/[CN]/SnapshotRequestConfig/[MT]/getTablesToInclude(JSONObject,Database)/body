{
  final List<Table> tables=SnapshotUtil.getTablesToSave(catalogDatabase);
  final Set<String> tableNamesToInclude=new HashSet<String>();
  if (jsData != null) {
    JSONArray tableNames=jsData.optJSONArray("tableNames");
    if (tableNames != null) {
      for (int i=0; i < tableNames.length(); i++) {
        try {
          tableNamesToInclude.add(tableNames.getString(i));
        }
 catch (        JSONException e) {
          SNAP_LOG.warn("Unable to parse tables to include for stream snapshot",e);
        }
      }
    }
  }
  ListIterator<Table> iter=tables.listIterator();
  while (iter.hasNext()) {
    Table table=iter.next();
    if (!tableNamesToInclude.contains(table.getTypeName())) {
      iter.remove();
    }
  }
  return tables.toArray(new Table[0]);
}
