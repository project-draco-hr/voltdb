{
  if (haveShutdownAlready) {
    return;
  }
  haveShutdownAlready=true;
  m_shouldContinue=false;
  boolean finished=false;
  while (!finished) {
    try {
      m_transactionQueue.shutdown();
      m_partitionDRGateway=null;
      if (hsql != null) {
        HsqlBackend.shutdownInstance();
      }
      if (ee != null) {
        ee.release();
      }
      finished=true;
    }
 catch (    final InterruptedException e) {
      e.printStackTrace();
    }
  }
  try {
    m_snapshotter.shutdown();
  }
 catch (  InterruptedException e) {
    hostLog.warn("Interrupted during shutdown",e);
  }
}
