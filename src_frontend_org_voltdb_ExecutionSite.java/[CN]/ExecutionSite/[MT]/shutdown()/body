{
  if (haveShutdownAlready) {
    return;
  }
  haveShutdownAlready=true;
  m_shouldContinue=false;
  boolean finished=false;
  while (!finished) {
    try {
      if (m_watchdog.isAlive()) {
        m_watchdog.m_shouldContinue=false;
        m_watchdog.interrupt();
        m_watchdog.join();
      }
      m_transactionQueue.shutdown();
      m_partitionDRGateway.shutdown();
      if (hsql != null) {
        hsql.shutdown();
      }
      if (ee != null) {
        ee.release();
      }
      finished=true;
    }
 catch (    final InterruptedException e) {
      e.printStackTrace();
    }
  }
  m_snapshotter.shutdown();
}
