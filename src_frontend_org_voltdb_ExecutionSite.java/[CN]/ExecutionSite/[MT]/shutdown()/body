{
  if (haveShutdownAlready) {
    return;
  }
  haveShutdownAlready=true;
  m_shouldContinue=false;
  boolean finished=false;
  while (!finished) {
    try {
      m_transactionQueue.shutdown();
      m_partitionDRGateway.shutdown();
      if (hsql != null) {
        hsql.shutdown();
      }
      if (ee != null) {
        ee.release();
      }
      finished=true;
    }
 catch (    final InterruptedException e) {
      e.printStackTrace();
    }
  }
  m_snapshotter.shutdown();
}
