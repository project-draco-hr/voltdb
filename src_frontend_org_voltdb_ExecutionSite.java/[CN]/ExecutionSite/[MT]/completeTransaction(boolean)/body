{
  if (!readOnly) {
    assert(latestUndoToken != kInvalidUndoToken);
    assert(txnBeginUndoToken != kInvalidUndoToken);
    assert(latestUndoToken >= txnBeginUndoToken);
    if (latestUndoToken > txnBeginUndoToken) {
      ee.releaseUndoToken(latestUndoToken);
    }
    txnBeginUndoToken=kInvalidUndoToken;
    batchBeginUndoToken=kInvalidUndoToken;
  }
}
