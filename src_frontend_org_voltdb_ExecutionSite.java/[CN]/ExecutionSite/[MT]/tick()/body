{
  final long time=EstTime.currentTimeMillis();
  if ((time - lastTickTime) >= 1000) {
    if ((lastTickTime != 0) && (ee != null)) {
      ee.tick(time,lastCommittedTxnId);
    }
    lastTickTime=time;
  }
  m_snapshotter.doSnapshotWork(ee);
  m_watchdog.pet();
  if (m_tableStats != null && (time - lastTickTime) >= StatsManager.POLL_INTERVAL / 3) {
    CatalogMap<Table> tables=m_context.database.getTables();
    List<Integer> tmpIds=new ArrayList<Integer>();
    for (    Table table : tables) {
      if (!CatalogUtil.isTableExportOnly(m_context.database,table))       tmpIds.add(table.getRelativeIndex());
    }
    int[] tableIds=new int[tmpIds.size()];
    int i=0;
    for (    Integer id : tmpIds)     tableIds[i++]=id;
    final VoltTable[] s=ee.getStats(SysProcSelector.TABLE,tableIds,false,System.currentTimeMillis());
    if (s != null)     m_tableStats.setStatsTable(s[0]);
  }
}
