{
  final long time=EstTime.currentTimeMillis();
  final long prevLastTickTime=lastTickTime;
  if ((time - lastTickTime) >= 1000) {
    if ((lastTickTime != 0) && (ee != null)) {
      ee.tick(time,lastCommittedTxnId);
    }
    lastTickTime=time;
  }
  m_snapshotter.doSnapshotWork(ee);
  m_watchdog.pet();
  if (m_tableStats != null && (time - prevLastTickTime) >= StatsManager.POLL_INTERVAL * 2) {
    CatalogMap<Table> tables=m_context.database.getTables();
    int[] tableIds=new int[tables.size()];
    int i=0;
    for (    Table table : tables) {
      tableIds[i++]=table.getRelativeIndex();
    }
    final VoltTable[] s1=ee.getStats(SysProcSelector.TABLE,tableIds,false,time);
    if (s1 != null) {
      m_tableStats.setStatsTable(s1[0]);
    }
    final VoltTable[] s2=ee.getStats(SysProcSelector.INDEX,tableIds,false,time);
    if ((s2 != null) && (s2.length > 0)) {
      m_indexStats.setStatsTable(s2[0]);
    }
  }
}
