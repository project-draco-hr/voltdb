{
  final long time=EstTime.currentTimeMillis();
  if ((time - lastTickTime) >= 1000) {
    if ((lastTickTime != 0) && (ee != null)) {
      ee.tick(time,lastCommittedTxnId);
    }
    lastTickTime=time;
  }
  if (ee != null && m_haveToUpdateLogLevels) {
    m_haveToUpdateLogLevels=false;
    ee.setLogLevels(org.voltdb.jni.EELoggers.getLogLevels());
  }
  m_watchdog.pet();
  m_currentTxnId=txnId;
  if (!readOnly) {
    assert(txnBeginUndoToken == kInvalidUndoToken);
    assert(batchBeginUndoToken == kInvalidUndoToken);
    txnBeginUndoToken=latestUndoToken;
  }
}
