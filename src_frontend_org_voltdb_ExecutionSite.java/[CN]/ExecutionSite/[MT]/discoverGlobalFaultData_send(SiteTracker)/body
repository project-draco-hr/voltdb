{
  int expectedResponses=0;
  Set<Long> survivors=newTracker.getAllSites();
  m_recoveryLog.info("Sending fault data " + MiscUtils.hsIdCollectionToString(m_pendingFailedSites) + " to "+ MiscUtils.hsIdCollectionToString(survivors)+ " survivors with lastKnownGloballyCommitedMultiPartTxnId "+ lastKnownGloballyCommitedMultiPartTxnId);
  try {
    for (    Long site : m_pendingFailedSites) {
      Long txnId=m_transactionQueue.getNewestSafeTransactionForInitiator(site);
      if (txnId != null) {
        FailureSiteUpdateMessage srcmsg=new FailureSiteUpdateMessage(m_pendingFailedSites,site,txnId != null ? txnId : Long.MIN_VALUE,lastKnownGloballyCommitedMultiPartTxnId);
        m_mailbox.send(MiscUtils.toLongArray(survivors),srcmsg);
        expectedResponses+=(survivors.size());
      }
    }
  }
 catch (  MessagingException e) {
    VoltDB.crashLocalVoltDB(e.getMessage(),true,e);
  }
  m_recoveryLog.info("Sent fault data. Expecting " + expectedResponses + " responses.");
  return expectedResponses;
}
