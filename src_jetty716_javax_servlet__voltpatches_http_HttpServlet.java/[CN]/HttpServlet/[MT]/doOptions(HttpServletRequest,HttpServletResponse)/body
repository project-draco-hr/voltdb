{
  Method[] methods=getAllDeclaredMethods(this.getClass());
  boolean ALLOW_GET=false;
  boolean ALLOW_HEAD=false;
  boolean ALLOW_POST=false;
  boolean ALLOW_PUT=false;
  boolean ALLOW_DELETE=false;
  boolean ALLOW_TRACE=true;
  boolean ALLOW_OPTIONS=true;
  for (int i=0; i < methods.length; i++) {
    Method m=methods[i];
    if (m.getName().equals("doGet")) {
      ALLOW_GET=true;
      ALLOW_HEAD=true;
    }
    if (m.getName().equals("doPost"))     ALLOW_POST=true;
    if (m.getName().equals("doPut"))     ALLOW_PUT=true;
    if (m.getName().equals("doDelete"))     ALLOW_DELETE=true;
  }
  String allow=null;
  if (ALLOW_GET)   if (allow == null)   allow=METHOD_GET;
  if (ALLOW_HEAD)   if (allow == null)   allow=METHOD_HEAD;
 else   allow+=", " + METHOD_HEAD;
  if (ALLOW_POST)   if (allow == null)   allow=METHOD_POST;
 else   allow+=", " + METHOD_POST;
  if (ALLOW_PUT)   if (allow == null)   allow=METHOD_PUT;
 else   allow+=", " + METHOD_PUT;
  if (ALLOW_DELETE)   if (allow == null)   allow=METHOD_DELETE;
 else   allow+=", " + METHOD_DELETE;
  if (ALLOW_TRACE)   if (allow == null)   allow=METHOD_TRACE;
 else   allow+=", " + METHOD_TRACE;
  if (ALLOW_OPTIONS)   if (allow == null)   allow=METHOD_OPTIONS;
 else   allow+=", " + METHOD_OPTIONS;
  resp.setHeader("Allow",allow);
}
