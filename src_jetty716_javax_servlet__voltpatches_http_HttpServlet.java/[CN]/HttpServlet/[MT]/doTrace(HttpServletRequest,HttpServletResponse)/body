{
  int responseLength;
  String CRLF="\r\n";
  String responseString="TRACE " + req.getRequestURI() + " "+ req.getProtocol();
  Enumeration reqHeaderEnum=req.getHeaderNames();
  while (reqHeaderEnum.hasMoreElements()) {
    String headerName=(String)reqHeaderEnum.nextElement();
    responseString+=CRLF + headerName + ": "+ req.getHeader(headerName);
  }
  responseString+=CRLF;
  responseLength=responseString.length();
  resp.setContentType("message/http");
  resp.setContentLength(responseLength);
  ServletOutputStream out=resp.getOutputStream();
  out.print(responseString);
  out.close();
  return;
}
