{
synchronized (m_lock) {
    if (!m_repairRan) {
      try {
        String whoami="MP leader repair " + CoreUtils.hsIdToString(m_mailbox.getHSId()) + " ";
        RepairAlgo algo=new MpPromoteAlgo(m_spMasters,m_mailbox,whoami);
        m_mailbox.setRepairAlgo(algo);
        Long txnid=Long.MIN_VALUE;
        boolean success=false;
        try {
          txnid=algo.start().get();
          success=true;
        }
 catch (        CancellationException e) {
        }
        if (success) {
          tmLog.info(whoami + "finished repair.");
        }
 else {
          tmLog.info(whoami + "interrupted during repair.  Retrying.");
        }
      }
 catch (      InterruptedException ie) {
      }
catch (      Exception e) {
        VoltDB.crashLocalVoltDB("Terminally failed MPI repair.",true,e);
      }
 finally {
        m_repairRan=true;
      }
    }
  }
}
