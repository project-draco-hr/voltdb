{
  final int now=Shared.init(this,key);
  voltQueueSQL(check,key,now);
  VoltTable checkResult=voltExecuteSQL()[1];
  if (checkResult.getRowCount() == 0)   return VoltCacheResult.NOT_FOUND;
  if (checkResult.fetchRow(0).getLong(0) != casVersion)   return VoltCacheResult.EXISTS;
  voltQueueSQL(update,Shared.expires(this,expires),flags,value,key,casVersion);
  voltExecuteSQL(true);
  return VoltCacheResult.STORED;
}
