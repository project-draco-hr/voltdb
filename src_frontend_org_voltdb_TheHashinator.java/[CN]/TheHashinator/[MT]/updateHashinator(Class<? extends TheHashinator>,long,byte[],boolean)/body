{
  while (true) {
    final Pair<Long,? extends TheHashinator> snapshot=instance.get();
    if (version > snapshot.getFirst()) {
      Pair<Long,? extends TheHashinator> update=Pair.of(version,constructHashinator(hashinatorImplementation,configBytes,cooked));
      if (instance.compareAndSet(snapshot,update)) {
        return update.getSecond().getConfigBytes();
      }
    }
 else {
      return snapshot.getSecond().getConfigBytes();
    }
  }
}
