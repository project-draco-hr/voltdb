{
  SnapshotDaemon daemon=getBasicDaemon();
  long handle=m_initiator.clientData;
  assertTrue("@SnapshotScan".equals(m_initiator.procedureName));
  assertEquals(1,m_initiator.params.length);
  assertTrue("/tmp".equals(m_initiator.params[0]));
  m_initiator.clear();
  Thread.sleep(60);
  assertNull(m_initiator.params);
  daemon.processClientResponse(getFailureResponse(handle));
  Thread.sleep(60);
  assertNull(m_initiator.params);
  daemon.processClientResponse(null);
  Thread.sleep(60);
  assertNull(m_initiator.params);
  daemon=getBasicDaemon();
  assertNotNull(m_initiator.params);
  daemon.processClientResponse(getErrMsgResponse(m_initiator.clientData)).get();
  assertEquals(SnapshotDaemon.State.FAILURE,daemon.getState());
}
