{
  if (m_daemon != null) {
    m_daemon.shutdown();
    m_mockVoltDB.shutdown(null);
  }
  m_mockVoltDB=new MockVoltDB();
  VoltDB.replaceVoltDBInstanceForTest(m_mockVoltDB);
  m_initiator=new Initiator();
  m_daemon=new SnapshotDaemon();
  m_daemon.init(m_initiator,m_mockVoltDB.getHostMessenger().getZK(),null,null);
  return m_daemon;
}
