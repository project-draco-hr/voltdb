{
  checkPermits(permits);
synchronized (mutex) {
    return reserveNextTicket(permits,readSafeMicros());
  }
}
