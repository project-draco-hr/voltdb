{
  VoltDBInterface mockVolt=mock(VoltDBInterface.class);
  CommandLog cl=mock(CommandLog.class);
  when(cl.isEnabled()).thenReturn(false);
  when(mockVolt.getCommandLog()).thenReturn(cl);
  VoltDB.replaceVoltDBInstanceForTest(mockVolt);
  SnapshotInitiationInfo dut;
  JSONStringer stringer=new JSONStringer();
  stringer.object();
  stringer.key("service").value("log_truncation");
  stringer.endObject();
  Object[] params=new Object[1];
  params[0]=stringer.toString();
  try {
    dut=new SnapshotInitiationInfo(params);
  }
 catch (  Exception e) {
    assertTrue(e.getMessage(),e.getMessage().contains("command logging is not present or enabled"));
  }
  when(cl.isEnabled()).thenReturn(true);
  dut=new SnapshotInitiationInfo(params);
  assertTrue(dut.isTruncationRequest());
}
