{
  final LocalObjectMessage wrapper=(LocalObjectMessage)message;
  if (wrapper.payload instanceof AdHocPlannerWork) {
    final AdHocPlannerWork w=(AdHocPlannerWork)(wrapper.payload);
    final AsyncCompilerResult result=compileAdHocPlan(w);
    if (w.completionHandler != null) {
      w.completionHandler.onCompletion(result);
    }
 else {
      m_mailbox.send(message.m_sourceHSId,new LocalObjectMessage(result));
    }
  }
 else   if (wrapper.payload instanceof CatalogChangeWork) {
    final CatalogChangeWork w=(CatalogChangeWork)(wrapper.payload);
    final AsyncCompilerResult result=prepareApplicationCatalogDiff(w);
    if (w.completionHandler != null) {
      w.completionHandler.onCompletion(result);
    }
 else {
      m_mailbox.send(message.m_sourceHSId,new LocalObjectMessage(result));
    }
  }
}
