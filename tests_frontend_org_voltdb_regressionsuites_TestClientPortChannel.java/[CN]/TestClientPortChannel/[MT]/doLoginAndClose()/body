{
  System.out.println("Testing valid login message");
  channel.connect();
  ByteBuffer buf=ByteBuffer.allocate(41);
  buf.putInt(37);
  buf.put((byte)'0');
  buf.putInt(8);
  buf.put("database".getBytes("UTF-8"));
  buf.putInt(0);
  buf.put("".getBytes("UTF-8"));
  buf.put(ConnectionUtil.getHashedPassword(""));
  buf.flip();
  channel.write(buf);
  ByteBuffer resp=ByteBuffer.allocate(4);
  channel.read(resp,4);
  resp.flip();
  int length=resp.getInt();
  resp=ByteBuffer.allocate(length);
  channel.read(resp,length);
  resp.flip();
  byte code=resp.get();
  assertEquals(code,0);
  byte rcode=resp.get();
  assertEquals(rcode,0);
  resp.getInt();
  resp.getLong();
  resp.getLong();
  resp.getInt();
  int buildStringLength=resp.getInt();
  byte buildStringBytes[]=new byte[buildStringLength];
  resp.get(buildStringBytes);
  System.out.println("Authenticated to server: " + new String(buildStringBytes,"UTF-8"));
  channel.close();
}
