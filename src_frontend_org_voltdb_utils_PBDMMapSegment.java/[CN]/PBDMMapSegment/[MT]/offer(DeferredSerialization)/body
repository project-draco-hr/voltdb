{
  if (m_closed)   throw new IOException("closed");
  final ByteBuffer mbuf=m_buf.b();
  if (mbuf.remaining() < ds.getSerializedSize() + OBJECT_HEADER_BYTES)   return -1;
  m_syncedSinceLastEdit=false;
  int written=PBDUtils.writeDeferredSerialization(mbuf,ds);
  incrementNumEntries(written);
  return written;
}
