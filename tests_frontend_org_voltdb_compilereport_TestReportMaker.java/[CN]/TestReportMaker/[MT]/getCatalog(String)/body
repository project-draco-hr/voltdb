{
  TPCCProjectBuilder builder=new TPCCProjectBuilder();
  builder.addDefaultSchema();
  builder.addDefaultPartitioning();
  builder.addStmtProcedure("NeedsEscape","SELECT COUNT(*) FROM ORDER_LINE WHERE OL_QUANTITY<10 AND OL_QUANTITY>5");
  String testDir=BuildDirectoryUtils.getBuildDirectoryPath();
  String retval=testDir + File.separator + "test-reportmaker-"+ name+ ".jar";
  builder.compile(retval);
  byte[] bytes=MiscUtils.fileToBytes(new File(retval));
  String serializedCatalog=CatalogUtil.getSerializedCatalogStringFromJar(CatalogUtil.loadAndUpgradeCatalogFromJar(bytes).getFirst());
  assertNotNull(serializedCatalog);
  Catalog c=new Catalog();
  c.execute(serializedCatalog);
  return c;
}
