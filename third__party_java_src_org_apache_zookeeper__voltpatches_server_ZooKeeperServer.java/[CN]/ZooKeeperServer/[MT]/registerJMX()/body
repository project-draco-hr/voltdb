{
  try {
    jmxServerBean=new ZooKeeperServerBean(this);
    MBeanRegistry.getInstance().register(jmxServerBean,null);
    try {
      jmxDataTreeBean=new DataTreeBean(zkDb.getDataTree());
      MBeanRegistry.getInstance().register(jmxDataTreeBean,jmxServerBean);
    }
 catch (    Exception e) {
      LOG.warn("Failed to register with JMX",e);
      jmxDataTreeBean=null;
    }
  }
 catch (  Exception e) {
    LOG.warn("Failed to register with JMX",e);
    jmxServerBean=null;
  }
}
