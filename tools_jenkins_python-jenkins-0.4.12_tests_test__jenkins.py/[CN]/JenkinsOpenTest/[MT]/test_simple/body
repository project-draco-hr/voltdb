@patch('jenkins.urlopen')
def test_simple(self, jenkins_mock):
    data = {'foo': 'bar', }
    jenkins_mock.side_effect = [get_mock_urlopen_return_value(self.crumb_data), get_mock_urlopen_return_value(data)]
    request = jenkins.Request(self.make_url('job/TestJob'))
    response = self.j.jenkins_open(request)
    self.assertEqual(jenkins_mock.call_args[0][0].get_full_url(), self.make_url('job/TestJob'))
    self.assertEqual(response, json.dumps(data))
    self.assertEqual(self.j.crumb, self.crumb_data)
    self.assertEqual(request.headers['.crumb'], self.crumb_data['crumb'])
    self._check_requests(jenkins_mock.call_args_list)
