{
  final VoltDBInterface voltdb=VoltDB.instance();
  if (voltdb.getMode() == OperationMode.SHUTTINGDOWN) {
    return false;
  }
  if (voltdb.isShuttingdown()) {
    return procedure.getAllowedinshutdown();
  }
  if (voltdb.getMode() != OperationMode.PAUSED || handler.isAdmin()) {
    return true;
  }
  if (procedure.getSystemproc() && ("@AdHoc".equals(invocation.getProcName()) || "@AdHocSpForTest".equals(invocation.getProcName()))) {
    return true;
  }
 else {
    return procedure.getReadonly();
  }
}
