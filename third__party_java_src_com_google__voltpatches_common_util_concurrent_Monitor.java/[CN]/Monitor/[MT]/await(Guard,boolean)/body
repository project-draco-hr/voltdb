{
  if (signalBeforeWaiting) {
    signalNextWaiter();
  }
  beginWaitingFor(guard);
  try {
    do {
      guard.condition.await();
    }
 while (!guard.isSatisfied());
  }
  finally {
    endWaitingFor(guard);
  }
}
