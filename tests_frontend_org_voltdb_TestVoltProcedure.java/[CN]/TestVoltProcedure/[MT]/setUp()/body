{
  manager=new MockVoltDB();
  final long executionSiteId=CoreUtils.getHSIdFromHostAndSite(0,42);
  this.executionSiteId=executionSiteId;
  manager.addSite(executionSiteId,0);
  agent=new MockStatsAgent();
  manager.setStatsAgent(agent);
  VoltDB.replaceVoltDBInstanceForTest(manager);
  manager.addProcedureForTest(DateProcedure.class.getName());
  manager.addProcedureForTest(TimestampProcedure.class.getName());
  manager.addProcedureForTest(StringProcedure.class.getName());
  manager.addProcedureForTest(DecimalProcedure.class.getName());
  manager.addProcedureForTest(ByteProcedure.class.getName());
  manager.addProcedureForTest(ShortProcedure.class.getName());
  manager.addProcedureForTest(IntegerProcedure.class.getName());
  manager.addProcedureForTest(LongProcedure.class.getName());
  manager.addProcedureForTest(DoubleProcedure.class.getName());
  manager.addProcedureForTest(BoxedByteProcedure.class.getName());
  manager.addProcedureForTest(BoxedShortProcedure.class.getName());
  manager.addProcedureForTest(BoxedIntegerProcedure.class.getName());
  manager.addProcedureForTest(BoxedLongProcedure.class.getName());
  manager.addProcedureForTest(BoxedDoubleProcedure.class.getName());
  manager.addProcedureForTest(LongArrayProcedure.class.getName());
  manager.addProcedureForTest(NPEProcedure.class.getName());
  manager.addProcedureForTest(LargeNumberOfTablesProc.class.getName());
  manager.addProcedureForTest(UnexpectedFailureFourProcedure.class.getName());
  manager.addProcedureForTest(GetClusterIdProcedure.class.getName());
  site=mock(SiteProcedureConnection.class);
  doReturn(42).when(site).getCorrespondingPartitionId();
  doReturn(executionSiteId).when(site).getCorrespondingSiteId();
  doReturn(expectedClusterId).when(site).getCorrespondingClusterId();
  nullParam=ParameterSet.fromArrayNoCopy(new Object[]{null});
}
