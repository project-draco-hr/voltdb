{
  if (!_mutableWhenRunning && isStarted())   throw new IllegalStateException(STARTED);
  Handler[] old_handlers=_handlers == null ? null : _handlers.clone();
  if (getServer() != null)   getServer().getContainer().update(this,old_handlers,handlers,"handler");
  Server server=getServer();
  MultiException mex=new MultiException();
  for (int i=0; handlers != null && i < handlers.length; i++) {
    if (handlers[i].getServer() != server)     handlers[i].setServer(server);
  }
  _handlers=handlers;
  for (int i=0; old_handlers != null && i < old_handlers.length; i++) {
    if (old_handlers[i] != null) {
      try {
        if (old_handlers[i].isStarted())         old_handlers[i].stop();
      }
 catch (      Throwable e) {
        mex.add(e);
      }
    }
  }
  mex.ifExceptionThrowRuntime();
}
