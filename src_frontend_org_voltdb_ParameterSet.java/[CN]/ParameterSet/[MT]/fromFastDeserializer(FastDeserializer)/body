{
  int startPos=in.getPosition();
  short count=in.readShort();
  Object[] params=new Object[count];
  byte[][] encodedStrings=null;
  byte[][][] encodedStringArrays=null;
  for (int i=0; i < count; ++i) {
    OneParamInfo opi=readOneParameter(in);
    params[i]=opi.value;
    if (opi.encodedString != null) {
      if (encodedStrings == null) {
        encodedStrings=new byte[count][];
      }
      encodedStrings[i]=opi.encodedString;
    }
    if (opi.encodedStringArray != null) {
      if (encodedStringArrays == null) {
        encodedStringArrays=new byte[count][][];
      }
      encodedStringArrays[i]=opi.encodedStringArray;
    }
  }
  int size=in.getPosition() - startPos;
  return new ParameterSet(params,size,encodedStrings,encodedStringArrays);
}
