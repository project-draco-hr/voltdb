{
  Multimap<Class<?>,EventHandler> methodsInListener=finder.findAllHandlers(object);
  for (  Entry<Class<?>,Collection<EventHandler>> entry : methodsInListener.asMap().entrySet()) {
    Class<?> eventType=entry.getKey();
    Collection<EventHandler> eventMethodsInListener=entry.getValue();
    handlersByTypeLock.writeLock().lock();
    try {
      Set<EventHandler> currentHandlers=handlersByType.get(eventType);
      if (!currentHandlers.containsAll(eventMethodsInListener)) {
        throw new IllegalArgumentException("missing event handler for an annotated method. Is " + object + " registered?");
      }
      currentHandlers.removeAll(eventMethodsInListener);
    }
  finally {
      handlersByTypeLock.writeLock().unlock();
    }
  }
}
