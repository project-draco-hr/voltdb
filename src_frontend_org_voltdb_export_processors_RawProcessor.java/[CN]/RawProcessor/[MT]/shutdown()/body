{
  if (m_thread != null) {
    m_shouldContinue.set(false);
    if (m_thread != Thread.currentThread()) {
      m_thread.interrupt();
      try {
        m_thread.join();
      }
 catch (      InterruptedException e) {
        m_logger.error("Interruption not expected",e);
      }
    }
    m_generation=null;
    m_shouldContinue.set(true);
    m_thread=null;
  }
  if (m_currentConnection != null) {
    m_currentConnection.unregister();
    m_currentConnection=null;
  }
}
