{
  if (value == null)   throw new IllegalArgumentException("null value");
  if (!(name instanceof BufferCache.CachedBuffer))   name=HttpHeaders.CACHE.lookup(name);
  Field field=_bufferMap.get(name);
  Field last=null;
  if (field != null) {
    while (field != null && field._revision == _revision) {
      last=field;
      field=field._next;
    }
  }
  if (field != null)   field.reset(value,numValue,_revision);
 else {
    field=new Field(name,value,numValue,_revision);
    if (last != null) {
      field._prev=last;
      last._next=field;
    }
 else     _bufferMap.put(field.getNameBuffer(),field);
    _fields.add(field);
  }
}
