{
  voltQueueSQL(CHECK_SEAT,fid,seatnum);
  voltQueueSQL(CHECK_CID,fid,cid);
  final VoltTable[] results=voltExecuteSQL();
  assert(results.length == 2);
  if (results[0].getRowCount() > 0) {
    throw new VoltAbortException("Seat reservation conflict");
  }
  if (results[1].getRowCount() > 1) {
    throw new VoltAbortException("Customer owns multiple reservations");
  }
  voltQueueSQL(RESERVE_SEAT,seatnum,fid,cid);
  VoltTable[] updates=voltExecuteSQL();
  assert(updates.length == 1);
  return updates;
}
