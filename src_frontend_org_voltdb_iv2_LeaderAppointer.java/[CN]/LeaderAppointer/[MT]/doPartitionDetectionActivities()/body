{
  assert(!m_partitionDetected);
  List<Integer> currentNodes=null;
  try {
    currentNodes=m_hostMessenger.getLiveHostIds();
  }
 catch (  Exception e) {
  }
  Set<Integer> currentHosts=new HashSet<Integer>(currentNodes);
  Set<Integer> previousHosts=readPriorKnownLiveNodes();
  boolean partitionDetectionTriggered=makePPDDecision(previousHosts,currentHosts);
  if (partitionDetectionTriggered) {
    m_partitionDetected=true;
    if (m_usingCommandLog) {
      VoltDB.crashGlobalVoltDB("Use of command logging detected, no additional database snapshot will " + "be generated.  Please use the 'recover' action to restore the database if necessary.",false,null);
    }
 else {
      SnapshotUtil.requestSnapshot(0L,m_partSnapshotSchedule.getPath(),m_partSnapshotSchedule.getPrefix() + System.currentTimeMillis(),true,SnapshotFormat.NATIVE,null,m_snapshotHandler,true);
    }
  }
 else   if (!currentHosts.equals(previousHosts)) {
    writeKnownLiveNodes(currentNodes);
  }
}
