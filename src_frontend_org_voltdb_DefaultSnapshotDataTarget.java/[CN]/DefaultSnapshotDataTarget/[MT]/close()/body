{
  m_es.shutdown();
  m_es.awaitTermination(1,TimeUnit.DAYS);
  m_channel.force(true);
  m_fos.getFD().sync();
  m_channel.position(4);
  ByteBuffer completed=ByteBuffer.allocate(1);
  completed.put((byte)1).flip();
  m_channel.write(completed);
  m_fos.getFD().sync();
  m_channel.close();
  if (m_onCloseHandler != null) {
    m_onCloseHandler.run();
  }
}
