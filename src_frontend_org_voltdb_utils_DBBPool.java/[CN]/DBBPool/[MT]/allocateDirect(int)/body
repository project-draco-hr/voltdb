{
  ArrayDeque<ByteBuffer> buffers=m_availableBufferStock.get(capacity);
  ByteBuffer retval=null;
  if (buffers != null) {
    retval=buffers.poll();
  }
  if (retval != null) {
    retval.clear();
  }
 else {
    retval=ByteBuffer.allocateDirect(capacity);
    ArrayList<ByteBuffer> bufferStock=m_bufferStock.get(capacity);
    if (bufferStock == null) {
      bufferStock=new ArrayList<ByteBuffer>();
      m_bufferStock.put(capacity,bufferStock);
    }
    bufferStock.add(retval);
  }
  return retval;
}
