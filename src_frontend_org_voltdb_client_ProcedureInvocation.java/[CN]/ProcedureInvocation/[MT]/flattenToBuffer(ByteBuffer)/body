{
  buf.put(m_type.getValue());
  if (m_type == ProcedureInvocationType.REPLICATED) {
    buf.putLong(m_originalTxnId);
    buf.putLong(m_originalTs);
  }
  FastSerializer.writeString(m_procNameBytes,buf);
  buf.putLong(m_clientHandle);
  m_parameters.flattenToBuffer(buf);
  return buf;
}
