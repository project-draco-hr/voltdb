{
  TransactionState retval=super.peek();
  if ((retval != null) && (retval.txnId <= m_newestSafeTransaction)) {
    m_txnsPopped++;
    m_lastTxnPopped=retval.txnId;
    return retval;
  }
  return null;
}
