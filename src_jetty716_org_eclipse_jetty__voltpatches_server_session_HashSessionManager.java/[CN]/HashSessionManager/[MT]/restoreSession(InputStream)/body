{
  DataInputStream in=new DataInputStream(is);
  String clusterId=in.readUTF();
  String nodeId=in.readUTF();
  boolean idChanged=in.readBoolean();
  long created=in.readLong();
  long cookieSet=in.readLong();
  long accessed=in.readLong();
  long lastAccessed=in.readLong();
  int requests=in.readInt();
  Session session=(Session)newSession(created,clusterId);
  session._cookieSet=cookieSet;
  session._lastAccessed=lastAccessed;
  int size=in.readInt();
  if (size > 0) {
    ArrayList keys=new ArrayList();
    for (int i=0; i < size; i++) {
      String key=in.readUTF();
      keys.add(key);
    }
    ClassLoadingObjectInputStream ois=new ClassLoadingObjectInputStream(in);
    for (int i=0; i < size; i++) {
      Object value=ois.readObject();
      session.setAttribute((String)keys.get(i),value);
    }
    ois.close();
  }
 else   session.initValues();
  in.close();
  return session;
}
