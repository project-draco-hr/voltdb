{
  checkNotNull(delegate);
  checkNotNull(separator);
  checkArgument(afterEveryChars > 0);
  return new CharOutput(){
    int charsUntilSeparator=afterEveryChars;
    @Override public void write(    char c) throws IOException {
      if (charsUntilSeparator == 0) {
        for (int i=0; i < separator.length(); i++) {
          delegate.write(separator.charAt(i));
        }
        charsUntilSeparator=afterEveryChars;
      }
      delegate.write(c);
      charsUntilSeparator--;
    }
    @Override public void flush() throws IOException {
      delegate.flush();
    }
    @Override public void close() throws IOException {
      delegate.close();
    }
  }
;
}
