{
  ByteBuffer buf=ByteBuffer.allocate(4 + (m_tokenCount * 8));
  buf.putInt(m_tokenCount);
  int lastToken=Integer.MIN_VALUE;
  for (int ii=0; ii < m_tokenCount; ii++) {
    int token=unsafe.getInt(m_tokens + (ii * 8));
    Preconditions.checkArgument(token >= lastToken);
    lastToken=token;
    buf.putInt(token);
  }
  for (int ii=0; ii < m_tokenCount; ii++) {
    buf.putInt(unsafe.getInt(m_tokens + (ii * 8) + 4));
  }
  ByteArrayOutputStream bos=new ByteArrayOutputStream(buf.array().length);
  DeflaterOutputStream dos=new DeflaterOutputStream(bos);
  try {
    dos.write(buf.array());
    dos.close();
  }
 catch (  IOException e) {
    throw new RuntimeException(String.format("Failed to deflate cooked bytes: %s",e.toString()));
  }
  return bos.toByteArray();
}
