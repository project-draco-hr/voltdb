{
  m_siteIdToZKPort=new TreeMap<Integer,Integer>();
  m_clients=new ArrayList<ZooKeeper>();
  m_messengers=new ArrayList<HostMessenger>();
  for (int ii=0; ii < sites; ii++) {
    HostMessenger.Config config=new HostMessenger.Config();
    config.internalPort+=ii;
    int externalPort=m_ports.next();
    config.zkInterface="127.0.0.1:" + externalPort;
    m_siteIdToZKPort.put(ii,externalPort);
    config.networkThreads=1;
    HostMessenger hm=new HostMessenger(config);
    hm.start();
    m_messengers.add(hm);
  }
}
