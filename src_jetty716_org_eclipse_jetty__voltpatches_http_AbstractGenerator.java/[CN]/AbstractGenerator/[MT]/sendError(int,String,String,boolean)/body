{
  if (close)   _persistent=false;
  if (!isCommitted()) {
    setResponse(code,reason);
    if (content != null) {
      completeHeader(null,false);
      addContent(new View(new ByteArrayBuffer(content)),Generator.LAST);
    }
 else {
      completeHeader(null,true);
    }
    complete();
  }
}
