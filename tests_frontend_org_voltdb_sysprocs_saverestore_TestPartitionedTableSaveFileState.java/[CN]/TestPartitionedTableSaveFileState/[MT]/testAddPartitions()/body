{
  int original_partitions=4;
  Set<Integer> partitionsToDistribute=new HashSet<Integer>();
  for (int i=0; i < original_partitions; ++i) {
    addSiteToTestData(i,i,i,4);
    partitionsToDistribute.add(i);
    addSiteInfoToCatalog(i,i,i,true);
  }
  addSiteInfoToCatalog(original_partitions,original_partitions,original_partitions,true);
  addSiteInfoToCatalog(original_partitions + 1,original_partitions + 1,original_partitions + 1,true);
  m_voltDB.addSite(CoreUtils.getHSIdFromHostAndSite(0,original_partitions + 2),MailboxType.Initiator);
  m_voltDB.addSite(CoreUtils.getHSIdFromHostAndSite(1,original_partitions + 3),MailboxType.Initiator);
  m_siteInput.resetRowPosition();
  while (m_siteInput.advanceRow()) {
    try {
      m_state.addHostData(m_siteInput);
    }
 catch (    IOException e) {
      e.printStackTrace();
      assertTrue(false);
    }
  }
  Table test_table=m_voltDB.getTable(TABLE_NAME);
  SynthesizedPlanFragment[] test_plan=m_state.generateRestorePlan(test_table,VoltDB.instance().getSiteTracker());
  checkPlanFragments(test_plan,partitionsToDistribute);
}
