{
  int totalToCurrentIJ=0;
  int countAtPercentile=new Double(Math.floor(((percentile / 100.0D) * this.totalCount) + 0.5D)).intValue();
  for (int i=0; i < this.bucketCount; i++) {
    int j=(i == 0) ? 0 : (this.subBucketCount / 2);
    for (; j < this.subBucketCount; j++) {
      totalToCurrentIJ+=this.getCountAt(i,j);
      if (totalToCurrentIJ >= countAtPercentile) {
        double valueAtIndex=this.valueFromIndex(i,j);
        return valueAtIndex / 1000.0D;
      }
    }
  }
  return 0D;
}
