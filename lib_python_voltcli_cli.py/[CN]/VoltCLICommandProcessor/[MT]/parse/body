def parse(self, cmdargs):
    '\n        Parse command line.\n        '
    self.preproc.preprocess(cmdargs)
    allow_no_verb = (self.preproc.get_option('-h', '--help', '--version') is not None)
    if ((self.preproc.verb is None) and (not allow_no_verb)):
        self._abort('No verb was specified.')
    if (self.preproc.verb is None):
        verb = None
    else:
        if (self.preproc.verb not in self.verbs):
            self._abort(('Unknown command: %s' % self.preproc.verb))
        verb = self.verbs[self.preproc.verb]
    (outer_opts, outer_args) = optparse.OptionParser.parse_args(self, self.preproc.outer_opts)
    assert (len(outer_args) == 0)
    verb_parser = self.create_verb_parser(verb)
    if self.preproc.verb:
        if verb.cli_spec.passthrough:
            verb_args = self.preproc.verb_cmdargs
            verb_opts = None
        else:
            (verb_opts, verb_args) = verb_parser.parse_args(self.preproc.verb_cmdargs)
            self.check_verb_options(verb, verb_opts)
            verb_args = self.process_verb_arguments(verb, verb_args, verb_opts)
    else:
        verb_opts = None
        args = []
    return ParsedCommand(self, outer_opts, verb_parser, verb_opts, verb_args, verb)
