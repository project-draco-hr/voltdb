{
  ReplaySequencer dut=new ReplaySequencer();
  TransactionInfoBaseMessage sntl=makeSentinel(1L);
  TransactionInfoBaseMessage frag=makeFragment(1L);
  TransactionInfoBaseMessage frag2=makeFragment(1L);
  assertTrue(dut.offer(1L,sntl));
  assertTrue(dut.offer(1L,frag));
  assertEquals(frag,dut.poll());
  assertEquals(null,dut.poll());
  assertNull(dut.drain());
  assertFalse(dut.offer(1L,frag2));
  assertEquals(null,dut.poll());
  assertNull(dut.drain());
  assertTrue(dut.offer(1L,sntl));
  assertFalse(dut.offer(1L,frag));
  assertFalse(dut.offer(1L,frag2));
  assertEquals(null,dut.poll());
  assertNull(dut.drain());
}
