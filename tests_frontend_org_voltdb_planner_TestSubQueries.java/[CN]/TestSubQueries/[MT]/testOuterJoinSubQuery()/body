{
{
    List<AbstractPlanNode> lpn=compileToFragments("SELECT A, C FROM R1 LEFT JOIN (SELECT A, C FROM P1) TEMP ON TEMP.C = R1.C ");
    assertTrue(lpn.size() == 2);
    AbstractPlanNode n=lpn.get(0).getChild(0).getChild(0);
    assertTrue(n instanceof NestLoopPlanNode);
    assertEquals(JoinType.LEFT,((NestLoopPlanNode)n).getJoinType());
    n=n.getChild(0);
    assertTrue(n instanceof SeqScanPlanNode);
    assertEquals("R1",((SeqScanPlanNode)n).getTargetTableName());
    n=lpn.get(1).getChild(0);
    assertTrue(n instanceof SeqScanPlanNode);
    assertEquals("TEMP",((SeqScanPlanNode)n).getTargetTableName());
    assertEquals(1,n.getChildCount());
    n=n.getChild(0);
    assertTrue(n instanceof ProjectionPlanNode);
    assertTrue(n.getChild(0) instanceof IndexScanPlanNode);
  }
}
