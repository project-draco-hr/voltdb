{
  AbstractPlanNode pn;
  pn=compile("select A, SUM(D) FROM (SELECT A, D FROM R1 WHERE A > 3 ORDER BY D Limit 3 ) T1 Group by A");
  pn=pn.getChild(0);
  assertTrue(pn instanceof HashAggregatePlanNode);
  pn=pn.getChild(0);
  checkSimpleSubSelects(pn,"T1","A","D");
  pn=pn.getChild(0);
  assertTrue(pn instanceof ProjectionPlanNode);
  pn=pn.getChild(0);
  assertTrue(pn instanceof LimitPlanNode);
  pn=pn.getChild(0);
  assertTrue(pn instanceof OrderByPlanNode);
  pn=pn.getChild(0);
  checkSimpleSubSelects(pn,"R1","A","C","D");
  checkPredicateComparisonExpression(pn,"R1");
  assertEquals(((SeqScanPlanNode)pn).getInlinePlanNodes().size(),0);
}
