{
  List<AbstractPlanNode> planNodes;
  AbstractPlanNode pn, nlpn;
  planNodes=compileToFragments("select T1.A, P1.A FROM (SELECT A FROM R1) T1, P1, P2 " + "WHERE P2.A = P1.A and T1.A = P1.C ");
  assertTrue(planNodes.size() == 2);
  pn=planNodes.get(0).getChild(0);
  assertTrue(pn instanceof ProjectionPlanNode);
  pn=pn.getChild(0);
  assertTrue(pn instanceof ReceivePlanNode);
  pn=planNodes.get(1);
  assertTrue(pn instanceof SendPlanNode);
  nlpn=pn.getChild(0);
  assertTrue(nlpn instanceof NestLoopPlanNode);
  pn=nlpn.getChild(1);
  checkSeqScanSubSelects(pn,"T1","A");
  pn=pn.getChild(0);
  checkSeqScanSubSelects(pn,"R1","A");
  nlpn=nlpn.getChild(0);
  assertTrue(nlpn instanceof NestLoopIndexPlanNode);
  pn=nlpn.getChild(0);
  checkSeqScanSubSelects(pn,"P1","A","C");
  assertEquals(nlpn.getInlinePlanNodes().size(),1);
  pn=nlpn.getInlinePlanNode(PlanNodeType.INDEXSCAN);
  checkIndexedSubSelects(pn,"P2","SYS_IDX_P2_PK_TREE","A");
}
