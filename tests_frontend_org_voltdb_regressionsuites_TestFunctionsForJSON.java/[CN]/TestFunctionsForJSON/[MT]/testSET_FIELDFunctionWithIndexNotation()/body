{
  Client client=getClient();
  loadJS1(client);
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr[0]",0);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr[0]",-1);
  testProcWithValidJSON(TABLE_ROW2,client,"IdFieldProc","arr[1]",2);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr[1]",-2);
  testProcWithValidJSON(TABLE_ROWS123,client,"NotNullFieldProc","arr[2]");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr[2]",100);
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr[3]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr[4]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr[5]");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr3d[0]",0);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[0]",-1);
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr3d[1][0]","One");
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[1][0]","Four");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr3d[1][1][0]",2);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[1][1][0]",-2);
  testProcWithValidJSON(TABLE_ROW1,client,"IdFieldProc","arr3d[1][1][1]",1);
  testProcWithValidJSON(TABLE_ROW3,client,"IdFieldProc","arr3d[1][1][1]",3);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[1][1][1]",-3);
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr3d[1][1][3]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr3d[1][1][4]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr3d[1][1][5]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[0]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[1]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[2]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[3]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[4]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[5]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[0]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[1]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[2]");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","bracket]\\[\\[] \\[ ] chars","[foo]");
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","bracket]\\[\\[] \\[ ] chars","[bar]");
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr[0]",-1,1);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr[3]",-4,1);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr[-1]",-4,2);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr[4]",-5,3);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[0]",-1,1);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[1][0]","\"Four\"",2);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[1][1][0]",-2,2);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[1][1][1]",-3,3);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[1][1][-1]",-4,3);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","arr3d[1][1][3]",-5,1);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","newarr[2]",7,4);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","newarr[-1]","true",4);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","newarr[-1]","\"newvalue\"",4);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","newarr3d[1][1][1]",7,4);
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","newarr3d[1][1][-1]",8,4);
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr[1]', '-2') WHERE ID = 2");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr[4]', '-5') WHERE ID = 1");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr[-1]', '-5') WHERE ID = 2");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr[-1]', '-6') WHERE ID = 3");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[0]', '-1') WHERE ID = 2");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[1][0]', '\"Four\"') WHERE ID = 3");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[1][1][0]', '-2') WHERE ID = 3");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[1][1][1]', '-3') WHERE ID = 1");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[1][1][-1]', '-6') WHERE ID = 1");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'arr3d[1][1][3]', '-5') WHERE ID = 2");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'newarr[3]', 'true') WHERE ID = 7");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'newarr[-1]', '\"newvalue\"') WHERE ID = 7");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'newarr[2]', '7') WHERE ID = 7");
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'newarr3d[-1][-1][-1]', '9') WHERE ID = 7");
  testProcWithValidJSON(UPDATED_1ROW,client,"UpdateSetFieldProc","bracket]\\[\\[] \\[ ] chars","\"[bar]\"",1);
  testProcWithValidJSON(UPDATED_1ROW,client,"@AdHoc","UPDATE JS1 SET DOC = SET_FIELD(DOC, 'bracket]\\[\\[] \\[ ] chars', '\"[bar]\"') WHERE ID = 2");
  debugPrintJsonDoc("with new array values",client,1,2,3,4,7);
  testProcWithValidJSON(TABLE_ROWS23,client,"IdFieldProc","arr[0]",0);
  testProcWithValidJSON(TABLE_ROW1,client,"IdFieldProc","arr[0]",-1);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr[1]",2);
  testProcWithValidJSON(TABLE_ROW2,client,"IdFieldProc","arr[1]",-2);
  testProcWithValidJSON(TABLE_ROWS123,client,"NotNullFieldProc","arr[2]");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr[2]",100);
  testProcWithValidJSON(TABLE_ROWS12,client,"NotNullFieldProc","arr[3]");
  testProcWithValidJSON(TABLE_ROWS12,client,"IdFieldProc","arr[3]",-4);
  testProcWithValidJSON(TABLE_ROWS123,client,"NotNullFieldProc","arr[4]");
  testProcWithValidJSON(TABLE_ROWS123,client,"IdFieldProc","arr[4]",-5);
  testProcWithValidJSON(TABLE_ROW3,client,"NotNullFieldProc","arr[5]");
  testProcWithValidJSON(TABLE_ROW3,client,"IdFieldProc","arr[5]",-6);
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr[6]");
  testProcWithValidJSON(TABLE_ROW3,client,"IdFieldProc","arr3d[0]",0);
  testProcWithValidJSON(TABLE_ROWS12,client,"IdFieldProc","arr3d[0]",-1);
  testProcWithValidJSON(TABLE_ROW1,client,"IdFieldProc","arr3d[1][0]","One");
  testProcWithValidJSON(TABLE_ROWS23,client,"IdFieldProc","arr3d[1][0]","Four");
  testProcWithValidJSON(TABLE_ROW1,client,"IdFieldProc","arr3d[1][1][0]",2);
  testProcWithValidJSON(TABLE_ROWS23,client,"IdFieldProc","arr3d[1][1][0]",-2);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[1][1][1]",1);
  testProcWithValidJSON(EMPTY_TABLE,client,"IdFieldProc","arr3d[1][1][1]",3);
  testProcWithValidJSON(TABLE_ROWS13,client,"IdFieldProc","arr3d[1][1][1]",-3);
  testProcWithValidJSON(TABLE_ROWS123,client,"NotNullFieldProc","arr3d[1][1][2]");
  testProcWithValidJSON(TABLE_ROWS123,client,"NumericFieldProc","arr3d[1][1][2]","4.5","4.50");
  testProcWithValidJSON(TABLE_ROWS123,client,"NotNullFieldProc","arr3d[1][1][3]");
  testProcWithValidJSON(TABLE_ROW3,client,"IdFieldProc","arr3d[1][1][3]",-4);
  testProcWithValidJSON(TABLE_ROWS12,client,"IdFieldProc","arr3d[1][1][3]",-5);
  testProcWithValidJSON(TABLE_ROW1,client,"NotNullFieldProc","arr3d[1][1][4]");
  testProcWithValidJSON(TABLE_ROW1,client,"IdFieldProc","arr3d[1][1][4]",-6);
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","arr3d[1][1][5]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[0]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[1]");
  testProcWithValidJSON(TABLE_ROWS47,client,"NotNullFieldProc","newarr[2]");
  testProcWithValidJSON(TABLE_ROWS47,client,"IdFieldProc","newarr[2]",7);
  testProcWithValidJSON(TABLE_ROWS47,client,"NotNullFieldProc","newarr[3]");
  testProcWithValidJSON(TABLE_ROWS47,client,"IdFieldProc","newarr[3]","true");
  testProcWithValidJSON(TABLE_ROWS47,client,"NotNullFieldProc","newarr[4]");
  testProcWithValidJSON(TABLE_ROWS47,client,"IdFieldProc","newarr[4]","newvalue");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr[5]");
  testProcWithValidJSON(TABLE_ROW7,client,"NotNullFieldProc","newarr3d[0]");
  testProcWithValidJSON(TABLE_ROW7,client,"NotNullFieldProc","newarr3d[0][0]");
  testProcWithValidJSON(TABLE_ROW7,client,"NotNullFieldProc","newarr3d[0][0][0]");
  testProcWithValidJSON(TABLE_ROW7,client,"IdFieldProc","newarr3d[0][0][0]",9);
  testProcWithValidJSON(TABLE_ROW4,client,"NotNullFieldProc","newarr3d[1]");
  testProcWithValidJSON(TABLE_ROW4,client,"NotNullFieldProc","newarr3d[1][1]");
  testProcWithValidJSON(TABLE_ROW4,client,"NotNullFieldProc","newarr3d[1][1][1]");
  testProcWithValidJSON(TABLE_ROW4,client,"IdFieldProc","newarr3d[1][1][1]",7);
  testProcWithValidJSON(TABLE_ROW4,client,"NotNullFieldProc","newarr3d[1][1][2]");
  testProcWithValidJSON(TABLE_ROW4,client,"IdFieldProc","newarr3d[1][1][2]",8);
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[2]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[1][2]");
  testProcWithValidJSON(EMPTY_TABLE,client,"NotNullFieldProc","newarr3d[1][1][3]");
  testProcWithValidJSON(TABLE_ROW3,client,"IdFieldProc","bracket]\\[\\[] \\[ ] chars","[foo]");
  testProcWithValidJSON(TABLE_ROWS12,client,"IdFieldProc","bracket]\\[\\[] \\[ ] chars","[bar]");
}
