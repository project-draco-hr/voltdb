{
  ArrayList<CompiledPlan> input=new ArrayList<CompiledPlan>();
  ArrayList<CompiledPlan> retval=new ArrayList<CompiledPlan>();
  retval.add(plan);
  for (  MicroOptimization opt : optimizations) {
    ArrayList<CompiledPlan> temp=input;
    input=retval;
    retval=temp;
    retval.clear();
    for (    CompiledPlan inPlan : input) {
      List<CompiledPlan> newPlans=opt.apply(inPlan,db);
      assert(newPlans != null);
      assert(newPlans.size() >= 1);
      retval.addAll(newPlans);
    }
  }
  return retval;
}
