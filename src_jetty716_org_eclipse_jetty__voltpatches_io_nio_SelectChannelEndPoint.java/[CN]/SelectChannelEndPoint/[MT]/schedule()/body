{
synchronized (this) {
    if (_key == null || !_key.isValid()) {
      _readBlocked=false;
      _writeBlocked=false;
      this.notifyAll();
      return;
    }
    if (_readBlocked || _writeBlocked) {
      if (_readBlocked && _key.isReadable())       _readBlocked=false;
      if (_writeBlocked && _key.isWritable())       _writeBlocked=false;
      this.notifyAll();
      _key.interestOps(0);
      return;
    }
    if (!isReadyForDispatch()) {
      _key.interestOps(0);
      return;
    }
    if ((_key.readyOps() & SelectionKey.OP_WRITE) == SelectionKey.OP_WRITE && (_key.interestOps() & SelectionKey.OP_WRITE) == SelectionKey.OP_WRITE) {
      _interestOps=_key.interestOps() & ~SelectionKey.OP_WRITE;
      _key.interestOps(_interestOps);
      _writable=true;
    }
    if (_dispatched)     _key.interestOps(0);
 else     dispatch();
  }
}
