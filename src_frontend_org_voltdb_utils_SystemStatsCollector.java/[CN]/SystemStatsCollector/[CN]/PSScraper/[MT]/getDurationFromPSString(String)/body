{
  String[] parts;
  duration=duration.trim();
  parts=duration.split("-");
  assert(parts.length > 0);
  assert(parts.length <= 2);
  String dayString="0";
  if (parts.length == 2)   dayString=parts[0];
  String subDayString=parts[parts.length - 1];
  long days=Long.parseLong(dayString);
  subDayString=subDayString.trim();
  parts=subDayString.split("\\.");
  assert(parts.length > 0);
  assert(parts.length <= 2);
  String fractionString="0";
  if (parts.length == 2)   fractionString=parts[parts.length - 1];
  subDayString=parts[0];
  while (fractionString.length() < 3)   fractionString+="0";
  long miliseconds=Long.parseLong(fractionString);
  parts=subDayString.split(":");
  assert(parts.length > 0);
  assert(parts.length <= 3);
  String hoursString="0";
  if (parts.length == 3)   hoursString=parts[parts.length - 3];
  String minutesString="0";
  if (parts.length >= 2)   minutesString=parts[parts.length - 2];
  String secondsString=parts[parts.length - 1];
  long hours=Long.parseLong(hoursString);
  long minutes=Long.parseLong(minutesString);
  long seconds=Long.parseLong(secondsString);
  hours=hours + (days * 24);
  minutes=minutes + (hours * 60);
  seconds=seconds + (minutes * 60);
  miliseconds=miliseconds + (seconds * 1000);
  return miliseconds;
}
