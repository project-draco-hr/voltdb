{
  Properties properties=(Properties)p.clone();
  String str=properties.getProperty(PORT_CONFIG);
  if (str == null || str.trim().length() == 0) {
    throw new RuntimeException(PORT_CONFIG + " must be specified as a log4j socket importer property");
  }
  m_port=Integer.parseInt(str);
  closeServerSocket();
  try {
    m_serverSocket=new ServerSocket(m_port);
    info("Log4j socket appender listener listening on port: " + m_port);
  }
 catch (  IOException e) {
    error("IOException opening server socket on port " + m_port + " - "+ e.getMessage());
    throw new RuntimeException(e);
  }
  m_tableName=properties.getProperty(EVENT_TABLE_CONFIG);
  if (m_tableName == null || m_tableName.trim().length() == 0) {
    throw new RuntimeException(EVENT_TABLE_CONFIG + " must be specified as a log4j socket importer property");
  }
}
