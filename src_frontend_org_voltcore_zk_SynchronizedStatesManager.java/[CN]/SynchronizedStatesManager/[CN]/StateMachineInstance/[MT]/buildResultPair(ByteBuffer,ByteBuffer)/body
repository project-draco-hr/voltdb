{
  ByteBuffer states=ByteBuffer.allocate(proposedState.remaining() + existingState.remaining() + 2);
  states.putShort((short)existingState.remaining());
  states.put(existingState);
  existingState.rewind();
  states.put(proposedState);
  proposedState.rewind();
  states.flip();
  return states;
}
