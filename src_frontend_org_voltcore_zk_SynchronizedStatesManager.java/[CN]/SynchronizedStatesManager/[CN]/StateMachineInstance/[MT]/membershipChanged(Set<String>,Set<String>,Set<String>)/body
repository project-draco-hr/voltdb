{
  lockLocalState();
  m_knownMembers=knownHosts;
  m_membershipChangePending=false;
  m_log.info(m_stateMachineId + " community membership changed " + (addedMembers != null && addedMembers.isEmpty() ? "" : ("added " + addedMembers.toString()))+ (removedMembers != null && removedMembers.isEmpty() ? "" : ("removed " + removedMembers.toString())));
  boolean notInitializing=m_requestedInitialState == null;
  if (m_pendingProposal != null && m_memberResults != null && Sets.difference(m_knownMembers,m_memberResults).isEmpty()) {
    processResultQuorum(m_memberResults);
  }
 else {
    unlockLocalState();
  }
  if (notInitializing) {
    membershipChanged(addedMembers,removedMembers);
  }
  assert(debugIsLocalStateUnlocked());
}
