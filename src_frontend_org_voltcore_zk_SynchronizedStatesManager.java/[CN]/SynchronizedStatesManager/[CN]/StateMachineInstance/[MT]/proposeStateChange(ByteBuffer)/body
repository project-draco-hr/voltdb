{
  assert(proposedState != null);
  assert(proposedState.remaining() < Short.MAX_VALUE);
  lockLocalState();
  assert(m_requestedInitialState == null);
  m_pendingProposal=ByteBuffer.allocate(proposedState.remaining());
  m_pendingProposal.put(proposedState.array(),proposedState.arrayOffset() + proposedState.position(),proposedState.remaining());
  m_pendingProposal.flip();
  m_stateChangeInitiator=true;
  m_currentRequestType=REQUEST_TYPE.STATE_CHANGE_REQUEST;
  ByteBuffer stateChange=buildProposal(REQUEST_TYPE.STATE_CHANGE_REQUEST,m_synchronizedState,m_pendingProposal);
  m_lastProposalVersion=wakeCommunityWithProposal(stateChange.array());
  assignStateChangeAgreement(true);
}
