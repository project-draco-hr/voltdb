{
  assert(oldAndNewState != null);
  ByteBuffer states=ByteBuffer.wrap(oldAndNewState);
  int oldStateSize=states.getShort();
  states.position(oldStateSize + 2);
  ByteBuffer proposedState=states.slice();
  states.flip();
  states.position(2);
  return new Pair<ByteBuffer,ByteBuffer>(states,proposedState);
}
