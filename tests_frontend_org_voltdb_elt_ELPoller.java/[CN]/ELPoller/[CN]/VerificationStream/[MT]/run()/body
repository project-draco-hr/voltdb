{
  try {
    open();
    while (m_done == false) {
      final ELTProtoMessage m=nextMessage();
      System.out.println("Poller: handling message: " + m);
      assert(!m.isOpen());
      assert(!m.isPoll());
      assert(!m.isAck());
      if (m.isOpenResponse()) {
        handleOpenResponse(m);
      }
      if (m.isPollResponse()) {
        handlePollResponse(m);
      }
      if (m.isError()) {
        m_done=true;
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
