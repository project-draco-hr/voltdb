{
  try {
    final DBBPool pool=m_pool.get();
    if (readyForRead()) {
      int read=0;
      do {
        final int maxRead=m_handler.getMaxRead();
        if (maxRead > 0) {
          read=fillReadStream(maxRead,pool);
        }
 else {
          break;
        }
        ByteBuffer message;
        while ((message=m_handler.retrieveNextMessage(this)) != null) {
          m_handler.handleMessage(message,this);
        }
      }
 while (read > 0);
    }
    drainWriteStream(pool);
  }
  finally {
synchronized (m_lock) {
      assert m_running=true;
      m_running=false;
    }
  }
  return this;
}
