{
  try {
    URL url=HTTPAdminListener.class.getResource("admintemplate.html");
    File f=new File(url.getFile());
    FileInputStream fis=new FileInputStream(f);
    BufferedReader r=new BufferedReader(new InputStreamReader(fis));
    StringBuilder sb=new StringBuilder();
    String line=null;
    while ((line=r.readLine()) != null) {
      sb.append(line);
    }
    r.close();
    fis.close();
    String template=sb.toString();
    for (    Entry<String,String> e : params.entrySet()) {
      template=template.replace("#" + e.getKey().toUpperCase() + "#",e.getValue());
    }
    return template;
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return "<html><body>An unrecoverable error was encountered while generating this page.</body></html>";
}
