{
  m_mustListen=mustListen;
  try {
    loadTemplate(HTTPAdminListener.class,"admintemplate.html");
  }
 catch (  Exception e) {
    VoltLogger logger=new VoltLogger("HOST");
    logger.error("Unable to load HTML templates from jar for admin pages.",e);
    throw e;
  }
  SocketConnector connector=null;
  try {
    connector=new SocketConnector();
    if (intf != null && intf.length() > 0) {
      connector.setHost(intf);
    }
    connector.setPort(port);
    connector.statsReset();
    connector.setName("VoltDB-HTTPD");
    connector.open();
    m_server.addConnector(connector);
    ContextHandler dbMonitorHandler=new ContextHandler("/");
    dbMonitorHandler.setHandler(new DBMonitorHandler());
    ContextHandler apiRequestHandler=new ContextHandler("/api/1.0");
    apiRequestHandler.setHandler(new APIRequestHandler());
    ContextHandler catalogRequestHandler=new ContextHandler("/catalog");
    catalogRequestHandler.setHandler(new CatalogRequestHandler());
    ContextHandler ddlRequestHandler=new ContextHandler("/ddl");
    ddlRequestHandler.setHandler(new DDLRequestHandler());
    ContextHandler deploymentRequestHandler=new ContextHandler("/deployment");
    DeploymentRequestHandler dh=new DeploymentRequestHandler();
    deploymentRequestHandler.setHandler(dh);
    ContextHandlerCollection handlers=new ContextHandlerCollection();
    handlers.setHandlers(new Handler[]{apiRequestHandler,catalogRequestHandler,ddlRequestHandler,deploymentRequestHandler,dbMonitorHandler});
    m_server.setHandler(handlers);
    final QueuedThreadPool qtp=new QueuedThreadPool();
    qtp.setMaxIdleTimeMs(15000);
    qtp.setMinThreads(1);
    m_server.setThreadPool(qtp);
    m_jsonEnabled=jsonEnabled;
  }
 catch (  Exception e) {
    try {
      connector.close();
    }
 catch (    Exception e2) {
    }
    try {
      m_server.destroy();
    }
 catch (    Exception e2) {
    }
    throw new Exception(e);
  }
}
