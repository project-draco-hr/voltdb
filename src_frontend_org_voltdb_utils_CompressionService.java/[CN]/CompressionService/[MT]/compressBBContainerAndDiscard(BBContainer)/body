{
  return submitCompressionTask(new Callable<byte[]>(){
    @Override public byte[] call() throws Exception {
      try {
        if (cont.b.isDirect()) {
          return CompressionService.compressBuffer(cont.b);
        }
 else {
          return CompressionService.compressBytes(cont.b.array(),cont.b.arrayOffset() + cont.b.position(),cont.b.remaining());
        }
      }
  finally {
        cont.discard();
      }
    }
  }
);
}
