{
  if (thrown == null) {
    buffer.append("null");
  }
 else {
    buffer.append('\n');
    format(buffer,thrown.toString());
    StackTraceElement[] elements=thrown.getStackTrace();
    for (int i=0; elements != null && i < elements.length; i++) {
      buffer.append("\n\tat ");
      format(buffer,elements[i].toString());
    }
    Throwable cause=thrown.getCause();
    if (cause != null && cause != thrown) {
      buffer.append("\nCaused by: ");
      format(buffer,cause);
    }
  }
}
