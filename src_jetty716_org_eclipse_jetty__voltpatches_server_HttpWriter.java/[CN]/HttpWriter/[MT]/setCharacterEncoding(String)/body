{
  if (encoding == null || StringUtil.__ISO_8859_1.equalsIgnoreCase(encoding)) {
    _writeMode=WRITE_ISO1;
  }
 else   if (StringUtil.__UTF8.equalsIgnoreCase(encoding)) {
    _writeMode=WRITE_UTF8;
  }
 else {
    _writeMode=WRITE_CONV;
    if (_out._characterEncoding == null || !_out._characterEncoding.equalsIgnoreCase(encoding))     _out._converter=null;
  }
  _out._characterEncoding=encoding;
  if (_out._bytes == null)   _out._bytes=new ByteArrayOutputStream2(MAX_OUTPUT_CHARS);
}
