{
  InitiateTaskMessage task=null;
  if (m_currentTxnState instanceof SinglePartitionTxnState) {
    task=((SinglePartitionTxnState)m_currentTxnState).getInitiateTaskMessage();
  }
 else   if (m_currentTxnState instanceof MultiPartitionParticipantTxnState) {
    task=((MultiPartitionParticipantTxnState)m_currentTxnState).getInitiateTaskMessage();
  }
  long txnId=m_currentTxnState.txnId;
  if (task != null) {
    txnId=task.getStoredProcedureInvocation().getOriginalTxnId();
  }
  return txnId == -1 ? m_currentTxnState.txnId : txnId;
}
