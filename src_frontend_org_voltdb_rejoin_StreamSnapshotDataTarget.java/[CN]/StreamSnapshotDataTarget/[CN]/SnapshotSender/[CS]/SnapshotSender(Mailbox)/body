{
  Preconditions.checkArgument(mb != null);
  m_mb=mb;
  m_workQueue=new LinkedBlockingQueue<SendWork>();
  m_expectedEOFs=new AtomicInteger();
  m_bytesSent=Collections.synchronizedMap(new HashMap<Long,AtomicLong>());
}
