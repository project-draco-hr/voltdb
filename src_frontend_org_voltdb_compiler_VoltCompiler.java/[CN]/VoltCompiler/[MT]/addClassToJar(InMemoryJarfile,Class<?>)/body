{
  if (cachedAddedClasses.contains(cls)) {
    return false;
  }
 else {
    cachedAddedClasses.add(cls);
  }
  for (  final Class<?> nested : getInnerClasses(cls)) {
    addClassToJar(jarOutput,nested);
  }
  String packagePath=cls.getName();
  packagePath=packagePath.replace('.','/');
  packagePath+=".class";
  String realName=cls.getName();
  realName=realName.substring(realName.lastIndexOf('.') + 1);
  realName+=".class";
  byte[] classBytes=null;
  try {
    classBytes=getClassAsBytes(cls);
  }
 catch (  Exception e) {
    final String msg="Unable to locate classfile for " + realName;
    throw new VoltCompilerException(msg);
  }
  jarOutput.put(packagePath,classBytes);
  return true;
}
