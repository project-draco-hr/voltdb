{
  m_warnings.clear();
  m_infos.clear();
  m_errors.clear();
  DatabaseType database=new DatabaseType();
  final InMemoryJarfile jarOutput=new InMemoryJarfile();
  final Catalog catalog=compileCatalogInternal(database,null,jarOutput);
  if (catalog == null) {
    return null;
  }
  addBuildInfo(jarOutput);
  final String catalogCommands=catalog.serialize();
  byte[] catalogBytes=catalogCommands.getBytes(Constants.UTF8ENCODING);
  jarOutput.put(CatalogUtil.CATALOG_FILENAME,catalogBytes);
  assert(!hasErrors());
  if (hasErrors()) {
    return null;
  }
  return jarOutput;
}
