{
  try {
    if (_invalid)     throw new IllegalStateException();
    while (_values != null && _values.size() > 0) {
      ArrayList keys;
synchronized (this) {
        keys=new ArrayList(_values.keySet());
      }
      Iterator iter=keys.iterator();
      while (iter.hasNext()) {
        String key=(String)iter.next();
        Object value;
synchronized (this) {
          value=_values.remove(key);
        }
        unbindValue(key,value);
        if (_sessionAttributeListeners != null) {
          HttpSessionBindingEvent event=new HttpSessionBindingEvent(this,key,value);
          for (int i=0; i < LazyList.size(_sessionAttributeListeners); i++)           ((HttpSessionAttributeListener)LazyList.get(_sessionAttributeListeners,i)).attributeRemoved(event);
        }
      }
    }
  }
  finally {
    _invalid=true;
  }
}
