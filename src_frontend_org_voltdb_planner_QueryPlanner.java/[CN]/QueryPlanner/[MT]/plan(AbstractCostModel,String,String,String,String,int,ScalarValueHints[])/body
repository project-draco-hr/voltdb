{
  assert(costModel != null);
  assert(stmtName != null);
  assert(procName != null);
  m_recentErrorMsg=null;
  if (m_parameterizedXmlSQL != null) {
    try {
      CompiledPlan plan=compileFromXML(m_parameterizedXmlSQL,costModel,sql,joinOrder,stmtName,procName,maxTablesPerJoin,paramHints);
      m_partitionValue=plan.getPartitioningKey();
      setRealParamTypes(plan.parameters);
      plan.extractedParamValues.setParameters(m_extractedParams);
      plan.setPartitioningKey(m_partitionValue);
      plan.partitioningKeyIndex=m_partitionIndex;
      m_wasParameterizedPlan=true;
      return plan;
    }
 catch (    Exception e) {
    }
  }
  m_recentErrorMsg=null;
  CompiledPlan plan=compileFromXML(m_xmlSQL,costModel,sql,joinOrder,stmtName,procName,maxTablesPerJoin,paramHints);
  if (plan != null) {
    m_partitionValue=plan.getPartitioningKey();
    plan.partitioningKeyIndex=m_partitionIndex;
  }
  return plan;
}
