{
  m_recentErrorMsg=null;
  if (m_paramzInfo != null) {
    try {
      CompiledPlan plan=compileFromXML(m_paramzInfo.parameterizedXmlSQL,m_paramzInfo.paramLiteralValues);
      Pair<Integer,Object[]> info=buildParameterSetFromExtractedLiteralsAndReturnPartitionIndex(plan.parameterTypes());
      plan.partitioningKeyIndex=info.getFirst();
      if (info.getSecond().length > CompiledPlan.MAX_PARAM_COUNT) {
        throw new PlanningErrorException("Throw and catch to force a non-parameterized plan");
      }
      plan.extractedParamValues=ParameterSet.fromArrayNoCopy(info.getSecond());
      if (plan.partitioningKeyIndex >= 0) {
        plan.setPartitioningKey(plan.extractedParamValues.toArray()[plan.partitioningKeyIndex]);
      }
      m_wasParameterizedPlan=true;
      return plan;
    }
 catch (    Exception e) {
      m_recentErrorMsg=null;
    }
  }
  CompiledPlan plan=compileFromXML(m_xmlSQL,null);
  if (plan == null) {
    throw new PlanningErrorException(m_recentErrorMsg);
  }
  return plan;
}
