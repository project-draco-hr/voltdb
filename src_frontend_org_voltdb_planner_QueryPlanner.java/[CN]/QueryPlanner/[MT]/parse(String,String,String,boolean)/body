{
  assert(sql != null);
  assert(stmtName != null);
  assert(procName != null);
  m_recentErrorMsg=null;
  AbstractPlanNode.resetPlanNodeIds();
  try {
    m_xmlSQL=m_HSQL.getXMLCompiledStatement(sql);
  }
 catch (  HSQLParseException e) {
    m_recentErrorMsg=e.getMessage();
    return null;
  }
  if (!m_quietPlanner && m_fullDebug) {
    outputCompiledStatement(stmtName,procName,m_xmlSQL);
  }
  if (parameterize) {
    m_parameterizedXmlSQL=m_xmlSQL.duplicate();
    Parameterizer pzer=new Parameterizer(m_parameterizedXmlSQL);
    int preExistingParams=pzer.countParams();
    if (preExistingParams == 0) {
      m_extractedParams=pzer.parameterize();
      if (!m_quietPlanner && m_fullDebug) {
        outputParameterizedCompiledStatement(stmtName,procName,m_parameterizedXmlSQL);
      }
      return m_parameterizedXmlSQL.toMinString();
    }
  }
  return m_xmlSQL.toMinString();
}
