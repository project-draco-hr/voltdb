{
  if (res.getStatus() != ClientResponse.SUCCESS) {
    if (m_state == State.RESTORE && res.getStatus() == ClientResponse.USER_ABORT) {
      LOG.info("No snapshot to restore from");
    }
 else {
      LOG.fatal("Failed to truncate command logs by snapshot: " + res.getStatusString());
      VoltDB.crashVoltDB();
    }
  }
  if (m_state == State.RESTORE) {
    m_replayAgent.replay();
    m_state=State.REPLAY;
  }
 else   if (m_state == State.TRUNCATE) {
    VoltDB.instance().onRestoreCompletion();
  }
}
