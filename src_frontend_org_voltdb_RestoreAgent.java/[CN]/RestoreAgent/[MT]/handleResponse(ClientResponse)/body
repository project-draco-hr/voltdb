{
  boolean failure=false;
  if (res.getStatus() != ClientResponse.SUCCESS) {
    failure=true;
  }
  VoltTable[] results=res.getResults();
  if (results == null || results.length != 1) {
    failure=true;
  }
  while (!failure && results[0].advanceRow()) {
    String resultStatus=results[0].getString("RESULT");
    if (!resultStatus.equalsIgnoreCase("success")) {
      failure=true;
    }
  }
  if (failure) {
    LOG.fatal("Failed to restore from snapshot: " + res.getStatusString());
    VoltDB.crashVoltDB();
  }
 else {
    if (m_state == State.RESTORE) {
      m_hasRestored=true;
    }
    changeState();
  }
}
