{
  if (m_replayAgent.hasReplayed()) {
    if (VoltDB.instance().getHostMessenger() != null) {
      int lowestSite=m_context.siteTracker.getLowestLiveNonExecSiteId();
      int lowestHost=m_context.siteTracker.getHostForSite(lowestSite);
      if (VoltDB.instance().getHostMessenger().getHostId() == lowestHost) {
        String path=m_context.cluster.getLogconfig().get("log").getInternalsnapshotpath();
        initSnapshotWork(null,Pair.of("@SnapshotSave",new Object[]{path,CL_NONCE,1}));
      }
    }
    m_state=State.TRUNCATE;
  }
 else {
    VoltDB.instance().onRestoreCompletion();
  }
}
