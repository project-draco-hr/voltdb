{
  long txnId=0;
  while (true) {
    LOG.debug("Waiting for the initiator to send the snapshot txnid");
    try {
      if (m_zk.exists(SNAPSHOT_ID,false) == null) {
        Thread.sleep(200);
        continue;
      }
 else {
        byte[] data=m_zk.getData(SNAPSHOT_ID,false,null);
        txnId=ByteBuffer.wrap(data).getLong();
        break;
      }
    }
 catch (    KeeperException e2) {
      VoltDB.crashGlobalVoltDB(e2.getMessage(),false,e2);
    }
catch (    InterruptedException e2) {
      continue;
    }
  }
  if (txnId != 0) {
    m_hasRestored=true;
  }
  m_replayAgent.setSnapshotTxnId(txnId);
}
