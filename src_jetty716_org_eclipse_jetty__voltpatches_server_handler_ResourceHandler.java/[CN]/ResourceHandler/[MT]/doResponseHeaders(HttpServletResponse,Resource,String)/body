{
  if (mimeType != null)   response.setContentType(mimeType);
  long length=resource.length();
  if (response instanceof Response) {
    HttpFields fields=((Response)response).getHttpFields();
    if (length > 0)     fields.putLongField(HttpHeaders.CONTENT_LENGTH_BUFFER,length);
    if (_cacheControl != null)     fields.put(HttpHeaders.CACHE_CONTROL_BUFFER,_cacheControl);
  }
 else {
    if (length > 0)     response.setHeader(HttpHeaders.CONTENT_LENGTH,Long.toString(length));
    if (_cacheControl != null)     response.setHeader(HttpHeaders.CACHE_CONTROL,_cacheControl.toString());
  }
}
