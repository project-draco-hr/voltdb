{
  CatalogType copy=null;
  try {
    copy=getClass().newInstance();
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new RuntimeException(e);
  }
  assert(parent.getCatalog() == catalog);
  copy.setBaseValues(catalog,parent,m_path,m_typename);
  copy.m_relativeIndex=m_relativeIndex;
  copyFields(copy);
  for (  Entry<String,CatalogMap<? extends CatalogType>> e : m_childCollections.entrySet()) {
    CatalogMap<? extends CatalogType> mapCopy=copy.m_childCollections.get(e.getKey());
    mapCopy.copyFrom(e.getValue());
  }
  catalog.registerGlobally(copy);
  return copy;
}
