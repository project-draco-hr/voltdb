{
  VoltDB.replaceVoltDBInstanceForTest(m_volt);
  doReturn(m_statsAgent).when(m_volt).getStatsAgent();
  doReturn(mock(SnapshotCompletionMonitor.class)).when(m_volt).getSnapshotCompletionMonitor();
  doReturn(m_messenger).when(m_volt).getHostMessenger();
  doReturn(mock(Configuration.class)).when(m_volt).getConfig();
  AgreementSite agreementSite=mock(AgreementSite.class);
  doReturn(AGREEMENT_SITE_ID).when(agreementSite).siteId();
  doReturn(agreementSite).when(m_volt).getAgreementSite();
  buildCatalog();
}
