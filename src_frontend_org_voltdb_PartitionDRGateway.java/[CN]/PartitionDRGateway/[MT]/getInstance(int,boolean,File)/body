{
  final VoltDBInterface vdb=VoltDB.instance();
  LicenseApi api=vdb.getLicenseApi();
  final boolean licensedToDR=api.isDrReplicationAllowed();
  PartitionDRGateway pdrg=null;
  if (licensedToDR) {
    try {
      Class<?> pdrgiClass=Class.forName("org.voltdb.dr.PartitionDRGatewayImpl");
      Object obj=pdrgiClass.newInstance();
      pdrg=(PartitionDRGateway)obj;
    }
 catch (    Exception e) {
    }
  }
  if (pdrg == null) {
    pdrg=new PartitionDRGateway();
  }
  try {
    pdrg.init(partitionId,replicationActive,overflowDir);
  }
 catch (  IOException e) {
    VoltDB.crashLocalVoltDB(e.getMessage(),false,e);
  }
  return pdrg;
}
