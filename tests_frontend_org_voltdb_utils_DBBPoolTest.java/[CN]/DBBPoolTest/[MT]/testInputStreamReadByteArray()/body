{
  DBBPool p1=new DBBPool();
  BBInputStream is=new BBInputStream();
  int numbufs=5;
  byte val=0;
  for (int i=0; i < numbufs; ++i) {
    DBBPool.BBContainer p1c=p1.acquire(8096);
    for (int j=0; j < 50; ++j) {
      p1c.b.put(val);
      if (val == 255) {
        val=0;
      }
 else {
        val++;
      }
    }
    p1c.b.flip();
    is.offer(p1c);
  }
  byte content[]=new byte[50 * numbufs];
  try {
    int bytes_read=is.read(content,0,50 * numbufs);
    assertEquals(50 * numbufs,bytes_read);
  }
 catch (  Throwable e) {
    throw new RuntimeException(e);
  }
  val=0;
  for (int j=0; j < 50 * numbufs; ++j) {
    Byte b1=new Byte(val);
    Byte b2=new Byte(content[j]);
    assertEquals(0,b1.compareTo(b2));
    if (val == 255) {
      val=0;
    }
 else {
      val++;
    }
  }
  p1.clear();
}
