{
  int avail=4096;
  int bytes_read=0;
  byte content[]=new byte[avail];
  byte read[]=new byte[avail];
  DBBPool p=new DBBPool();
  DBBPool.BBContainer pc=p.acquire(avail);
  Random random=new Random(0);
  random.nextBytes(content);
  pc.b.put(content);
  pc.b.flip();
  BBInputStream is=new BBInputStream();
  is.offer(pc);
  is.EOF();
  try {
    bytes_read=is.read(read,0,4000);
    assertEquals(4000,bytes_read);
    assertEquals(96,is.available());
    for (int i=0; i < 4000; i++) {
      assertEquals(content[i],read[i]);
    }
    bytes_read=is.read(read,0,4000);
    assertEquals(96,bytes_read);
    assertEquals(0,is.available());
    for (int i=0; i < 96; i++) {
      assertEquals(content[i + 4000],read[i]);
    }
    bytes_read=is.read(read,0,200);
    assertEquals(-1,bytes_read);
    assertEquals(0,is.available());
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
  p.clear();
}
