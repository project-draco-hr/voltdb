{
  if (m_coreBindId != null) {
    PosixJNAAffinity.INSTANCE.setAffinity(m_coreBindId);
  }
  try {
    while (m_shouldStop == false) {
      try {
        while (m_shouldStop == false) {
          int readyKeys=0;
          if (m_networkId == 0) {
            readyKeys=m_selector.select(5);
          }
 else {
            readyKeys=m_selector.select();
          }
          Runnable task=null;
          while ((task=m_tasks.poll()) != null) {
            task.run();
          }
          if (readyKeys > 0) {
            invokeCallbacks();
          }
          task=null;
          while ((task=m_tasks.poll()) != null) {
            task.run();
          }
          if (m_networkId == 0) {
            if (EstTimeUpdater.update(System.currentTimeMillis())) {
              m_logger.warn("Network was more than two seconds late in updating the estimated time");
            }
          }
        }
      }
 catch (      Throwable ex) {
        ex.printStackTrace();
        m_logger.error(null,ex);
      }
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
 finally {
    try {
      p_shutdown();
    }
 catch (    Throwable t) {
      t.printStackTrace();
    }
  }
}
