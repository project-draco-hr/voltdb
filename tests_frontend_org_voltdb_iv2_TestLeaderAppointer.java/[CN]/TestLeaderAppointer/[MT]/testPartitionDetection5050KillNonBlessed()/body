{
  configure(2,1,1,true);
  VoltDB.ignoreCrash=true;
  Thread dutthread=new Thread(){
    @Override public void run(){
      try {
        m_dut.acceptPromotion();
      }
 catch (      Exception e) {
      }
    }
  }
;
  dutthread.start();
  Thread.sleep(1000);
  addReplica(0,CoreUtils.getHSIdFromHostAndSite(0,0));
  addReplica(0,CoreUtils.getHSIdFromHostAndSite(1,0));
  waitForAppointee(0);
  registerLeader(0,m_cache.pointInTimeCache().get(0));
  dutthread.join();
  m_hostIds.clear();
  m_hostIds.add(0);
  deleteReplica(0,CoreUtils.getHSIdFromHostAndSite(1,0));
  Thread.sleep(2000);
  assertFalse(VoltDB.wasCrashCalled);
}
