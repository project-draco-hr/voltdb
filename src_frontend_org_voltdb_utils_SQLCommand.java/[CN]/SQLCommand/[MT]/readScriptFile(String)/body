{
  try {
    StringBuilder query=new StringBuilder();
    BufferedReader script=new BufferedReader(new FileReader(filePath));
    String line;
    while ((line=script.readLine()) != null) {
      if (!(RecallToken.matcher(line).matches() || ExitToken.matcher(line).matches() || GoToken.matcher(line).matches())) {
        if (FileToken.matcher(line).matches()) {
          Matcher m=FileToken.matcher(line);
          if (m.find()) {
            line=readScriptFile(m.group(1));
            if (line == null) {
              return null;
            }
            query.append(line);
            query.append("\n");
          }
 else {
            System.err.print("Invalid FILE command: '" + line + "'.");
            return null;
          }
        }
 else {
          query.append(line);
          query.append("\n");
        }
      }
    }
    script.close();
    return query.toString().trim();
  }
 catch (  FileNotFoundException e) {
    System.err.println("Script file '" + filePath + "' could not be found.");
    return null;
  }
catch (  Exception x) {
    System.err.println(x.getMessage());
    return null;
  }
}
