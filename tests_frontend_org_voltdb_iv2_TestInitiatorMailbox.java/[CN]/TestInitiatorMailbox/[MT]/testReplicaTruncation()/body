{
  createElectionNodes(2,false);
  mb.start(2);
  generateTasks(false);
  VoltTable[] results=new VoltTable[]{new VoltTable(new ColumnInfo("T",VoltType.BIGINT))};
  InitiateTaskMessage localTask;
  while ((localTask=(InitiateTaskMessage)mb.recv()) != null) {
    InitiateResponseMessage localResponse=new InitiateResponseMessage(localTask);
    ClientResponseImpl resp=new ClientResponseImpl(ClientResponse.SUCCESS,results,"");
    localResponse.setResults(resp);
    mb.deliver(localResponse);
  }
  ReplicatedRole role=(ReplicatedRole)mb.role;
  assertEquals(0,role.getOldestInFlightTxnId());
  InitiateTaskMessage message=new InitiateTaskMessage(100,100,3000,0,0,false,true,null);
  message.setTruncationTxnId(1000);
  mb.deliver(message);
  assertEquals(1001,role.getOldestInFlightTxnId());
}
