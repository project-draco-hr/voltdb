{
  DBBPool pool=new DBBPool();
  StoredProcedureInvocation spi=new StoredProcedureInvocation();
  spi.setClientHandle(25);
  spi.setProcName("elmerfudd");
  spi.setParams(57,"wrascallywabbit");
  InitiateTaskMessage itask=new InitiateTaskMessage(23,8,100045,true,false,spi,2101);
  itask.setNonCoordinatorSites(new int[]{5,2003});
  VoltTable table=new VoltTable(new VoltTable.ColumnInfo("foobar",VoltType.STRING));
  table.addRow("howmanylicksdoesittaketogettothecenterofatootsiepop");
  InitiateResponseMessage iresponse=new InitiateResponseMessage(itask);
  iresponse.setResults(new ClientResponseImpl(ClientResponseImpl.GRACEFUL_FAILURE,new VoltTable[]{table},"knockknockbananna",new EEException(1)));
  iresponse.setClientHandle(99);
  InitiateResponseMessage iresponse2=(InitiateResponseMessage)checkVoltMessage(iresponse,pool);
  assertEquals(iresponse.getTxnId(),iresponse2.getTxnId());
  assertEquals(iresponse.getLastReceivedTxnId(),iresponse2.getLastReceivedTxnId());
  iresponse.discard();
  iresponse2.discard();
  pool.clear();
}
