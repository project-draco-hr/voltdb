{
  StreamSnapshotDataTarget dut1=makeDataTarget(1000);
  StreamSnapshotDataTarget dut2=makeDataTarget(1001);
  writeAndVerify(dut1,0,true);
  writeAndVerify(dut2,1,true);
  assertEquals(1,dut1.m_outstandingWorkCount.get());
  assertEquals(1,dut2.m_outstandingWorkCount.get());
  ack(dut1);
  while (dut1.m_outstandingWorkCount.get() != 0) {
    Thread.yield();
  }
  ack(dut2);
  while (dut2.m_outstandingWorkCount.get() != 0) {
    Thread.yield();
  }
  dut1.close();
  dut2.close();
}
