{
  try {
    if (message instanceof LocalObjectMessage) {
      LocalObjectMessage lom=(LocalObjectMessage)message;
      ((Runnable)lom.payload).run();
    }
 else     if (message instanceof BinaryPayloadMessage) {
      BinaryPayloadMessage bpm=(BinaryPayloadMessage)message;
      byte payload[]=CompressionService.decompressBytes(bpm.m_payload);
      if (bpm.m_metadata[0] == JSON_PAYLOAD) {
        String jsonString=new String(payload,"UTF-8");
        JSONObject obj=new JSONObject(jsonString);
        handleJSONMessage(obj);
      }
 else       if (bpm.m_metadata[0] == STATS_PAYLOAD) {
        handleStatsResponse(payload);
      }
    }
  }
 catch (  Throwable e) {
    hostLog.error("Exception processing message in stats agent " + message,e);
  }
}
