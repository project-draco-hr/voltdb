{
  super.doStart();
  if (_threadPool == null) {
    _threadPool=getServer().getThreadPool();
    _privateThreadPool=false;
  }
  if (_threadPool instanceof LifeCycle && !((LifeCycle)_threadPool).isRunning())   ((LifeCycle)_threadPool).start();
  _selectorManager.start();
  _threadPool.dispatch(new Runnable(){
    public void run(){
      while (isRunning()) {
        try {
          _selectorManager.doSelect(0);
        }
 catch (        IOException x) {
          _logger.warn("Unexpected exception",x);
        }
      }
    }
  }
);
}
