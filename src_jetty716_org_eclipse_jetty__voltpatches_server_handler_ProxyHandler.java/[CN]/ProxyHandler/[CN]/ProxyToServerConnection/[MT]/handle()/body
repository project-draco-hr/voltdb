{
  _logger.debug("ProxyToServer: begin reading from server");
  try {
    if (_data != null) {
      int written=write(_endPoint,_data,_context);
      _logger.debug("ProxyToServer: written to server {} bytes",written);
      _data=null;
    }
    while (true) {
      int read=read(_endPoint,_buffer,_context);
      if (read == -1) {
        _logger.debug("ProxyToServer: server closed connection {}",_endPoint);
        close();
        break;
      }
      if (read == 0)       break;
      _logger.debug("ProxyToServer: read from server {} bytes {}",read,_endPoint);
      int written=write(_toClient._endPoint,_buffer,_context);
      _logger.debug("ProxyToServer: written to client {} bytes",written);
    }
    return this;
  }
 catch (  IOException x) {
    _logger.warn("ProxyToServer: Unexpected exception",x);
    close();
    throw x;
  }
catch (  RuntimeException x) {
    _logger.warn("ProxyToServer: Unexpected exception",x);
    close();
    throw x;
  }
 finally {
    _logger.debug("ProxyToServer: end reading from server");
  }
}
