{
  ArrayDeque<JoinNode> joinNodes=new ArrayDeque<JoinNode>();
  ArrayDeque<AbstractExpression> in=new ArrayDeque<AbstractExpression>();
  ArrayDeque<AbstractExpression> out=new ArrayDeque<AbstractExpression>();
  if (m_root != null) {
    joinNodes.add(m_root);
  }
  while (!joinNodes.isEmpty()) {
    JoinNode joinNode=joinNodes.poll();
    if (joinNode.m_joinExpr != null) {
      in.add(joinNode.m_joinExpr);
    }
    if (joinNode.m_whereExpr != null) {
      in.add(joinNode.m_whereExpr);
    }
    if (joinNode.m_leftNode != null) {
      joinNodes.add(joinNode.m_leftNode);
    }
    if (joinNode.m_rightNode != null) {
      joinNodes.add(joinNode.m_rightNode);
    }
  }
  AbstractExpression inExpr=null;
  while ((inExpr=in.poll()) != null) {
    if (inExpr.getExpressionType() == ExpressionType.CONJUNCTION_AND) {
      in.add(inExpr.getLeft());
      in.add(inExpr.getRight());
    }
 else {
      out.add(inExpr);
    }
  }
  return out;
}
