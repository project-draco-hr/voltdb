{
  FastDeserializer in=new FastDeserializer(buf);
  byte version=in.readByte();
  type=ProcedureInvocationType.typeFromByte(version);
  if (type == ProcedureInvocationType.REPLICATED) {
    originalTxnId=in.readLong();
    originalUniqueId=in.readLong();
  }
  procName=in.readString();
  clientHandle=in.readLong();
  serializedParams=in.remainder();
  final ByteBuffer duplicate=serializedParams.duplicate();
  params=new FutureTask<ParameterSet>(new Callable<ParameterSet>(){
    @Override public ParameterSet call() throws Exception {
      FastDeserializer fds=new FastDeserializer(duplicate);
      return fds.readObject(ParameterSet.class);
    }
  }
);
}
