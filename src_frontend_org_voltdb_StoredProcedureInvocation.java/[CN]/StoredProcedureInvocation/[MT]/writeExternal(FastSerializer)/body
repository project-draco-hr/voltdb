{
  if (debug) {
    hostLog.info("UAC writeExternal for: " + toStringLite());
  }
  int startPos=out.getPosition();
  assert(!((params == null) && (serializedParams == null)));
  assert((params != null) || (serializedParams != null));
  out.write(type.getValue());
  if (type == ProcedureInvocationType.REPLICATED) {
    out.writeLong(originalTxnId);
    out.writeLong(originalUniqueId);
  }
  out.writeString(procName);
  out.writeLong(clientHandle);
  int beforeParamPos=out.getPosition();
  if (serializedParams != null)   out.write(serializedParams.duplicate());
 else   if (params != null) {
    out.writeObject(getParams());
  }
  int endPos=out.getPosition();
  if (debug) {
    hostLog.info(String.format("UAC Invocation writeExternal serialized %d param bytes and %d total.",endPos - beforeParamPos,endPos - startPos));
  }
}
