{
  int timeoutSize=0;
  if (type.getValue() >= BatchTimeoutOverrideType.BATCH_TIMEOUT_VERSION) {
    timeoutSize=1 + (batchTimeout == BatchTimeoutOverrideType.NO_TIMEOUT ? 0 : 4);
  }
  int size=1 + timeoutSize + 4+ procName.length()+ 8;
  if (ProcedureInvocationType.isDeprecatedInternalDRType(type)) {
    size+=8 + 8;
  }
  if (serializedParams != null) {
    size+=serializedParams.remaining();
  }
 else   if (params != null) {
    ParameterSet pset=getParams();
    assert(pset != null);
    int serializedSize=pset.getSerializedSize();
    if ((pset.size() > 0) && (serializedSize <= 2)) {
      throw new IllegalStateException(String.format("Parameter set for invocation " + "%s doesn't have the proper size (currently = %s)",getProcName(),serializedSize));
    }
    size+=pset.getSerializedSize();
  }
  return size;
}
