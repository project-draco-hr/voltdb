{
  int batchExtensionSize=m_batchTimeout != BatchTimeoutOverrideType.NO_TIMEOUT ? 6 : 0;
  int allPartitionExtensionSize=m_allPartition ? 2 : 0;
  int serializedParamSize=0;
  if (serializedParams != null) {
    serializedParamSize=serializedParams.remaining();
  }
 else   if (params != null) {
    ParameterSet pset=getParams();
    assert(pset != null);
    serializedParamSize=pset.getSerializedSize();
    if ((pset.size() > 0) && (serializedParamSize <= 2)) {
      throw new IllegalStateException(String.format("Parameter set for invocation " + "%s doesn't have the proper size (currently = %s)",getProcName(),serializedParamSize));
    }
  }
 else {
    throw new IllegalStateException("StoredProcedureInvocation instance params in invalid state.");
  }
  int size=1 + 4 + getProcNameBytes().length+ 8+ 1+ batchExtensionSize+ allPartitionExtensionSize+ serializedParamSize;
  assert(size > 0);
  return size;
}
