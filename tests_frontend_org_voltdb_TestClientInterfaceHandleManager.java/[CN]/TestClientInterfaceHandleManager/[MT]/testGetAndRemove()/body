{
  Connection mockConnection=mock(Connection.class);
  ClientInterfaceHandleManager dut=new ClientInterfaceHandleManager(false,mockConnection,AdmissionControlGroup.getDummy());
  List<Long> handles=new ArrayList<Long>();
  for (int i=0; i < 10; i++) {
    handles.add(dut.getHandle(true,7,31337 + i,10,10l,"fooyankee",i % 2 == 0 ? true : false));
  }
  System.out.println("Removing handle: " + handles.get(5));
  dut.removeHandle(handles.get(5));
  for (int i=0; i < 10; i++) {
    System.out.println("Looking for handle: " + handles.get(i));
    ClientInterfaceHandleManager.Iv2InFlight inflight=dut.findHandle(handles.get(i));
    if (i != 5) {
      assertEquals((long)handles.get(i),i % 2 == 0 ? inflight.m_ciHandle | (1L << 63) : inflight.m_ciHandle);
    }
 else {
      assertEquals(null,inflight);
    }
  }
}
