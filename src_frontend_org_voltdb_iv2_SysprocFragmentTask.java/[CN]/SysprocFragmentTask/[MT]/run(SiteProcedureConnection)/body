{
  if (!m_txn.isReadOnly()) {
    if (m_txn.getBeginUndoToken() == Site.kInvalidUndoToken) {
      m_txn.setBeginUndoToken(siteConnection.getLatestUndoToken());
    }
  }
  if (m_task.isSysProcTask() && SysProcFragmentId.isSnapshotSaveFragment(m_task.getFragmentId(0)) && VoltDB.instance().rejoinDataPending()) {
    final FragmentResponseMessage response=new FragmentResponseMessage(m_task,m_initiator.getHSId());
    response.setRecovering(true);
    response.setStatus(FragmentResponseMessage.SUCCESS,null);
    m_initiator.deliver(response);
    return;
  }
  final FragmentResponseMessage response=processFragmentTask(siteConnection);
  response.m_sourceHSId=m_initiator.getHSId();
  m_initiator.deliver(response);
}
