{
  taskLog.logTask(m_task);
  if (m_task.isSysProcTask()) {
    System.out.println("Got sysproc fragment " + m_task.getFragmentId(0));
  }
  if (m_task.isSysProcTask() && m_task.getFragmentId(0) == SysProcFragmentId.PF_createSnapshotTargets) {
    System.out.println("Got fragment");
synchronized (SnapshotSiteProcessor.m_snapshotCreateLock) {
      if (SnapshotSiteProcessor.m_snapshotCreateSetupBarrier == null) {
        final int numLocalSites=VoltDB.instance().getSiteTrackerForSnapshot().getLocalSites().length;
        SnapshotSiteProcessor.m_snapshotCreateFinishBarrier=new CyclicBarrier(numLocalSites);
        SnapshotSiteProcessor.m_snapshotCreateSetupBarrier=new CyclicBarrier(numLocalSites,SnapshotSiteProcessor.m_snapshotCreateSetupBarrierAction);
      }
 else       if (SnapshotSiteProcessor.m_snapshotCreateSetupBarrier.isBroken()) {
        SnapshotSiteProcessor.m_snapshotCreateSetupBarrier.reset();
        SnapshotSiteProcessor.m_snapshotCreateFinishBarrier.reset();
      }
    }
    try {
      SnapshotSiteProcessor.m_snapshotCreateSetupBarrier.await();
      SnapshotSiteProcessor.m_snapshotCreateFinishBarrier.await();
    }
 catch (    Exception e) {
      Throwables.propagate(e);
    }
  }
  final FragmentResponseMessage response=new FragmentResponseMessage(m_task,m_initiator.getHSId());
  response.setRecovering(true);
  response.setStatus(FragmentResponseMessage.SUCCESS,null);
  m_initiator.deliver(response);
}
