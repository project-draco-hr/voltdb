{
  taskLog.logTask(m_task);
  if (m_task.isSysProcTask() && m_task.getFragmentId(0) == SysProcFragmentId.PF_createSnapshotTargets) {
    final int numLocalSites=VoltDB.instance().getSiteTrackerForSnapshot().getLocalSites().length;
    SnapshotSiteProcessor.readySnapshotSetupBarriers(numLocalSites);
    try {
      SnapshotSiteProcessor.m_snapshotCreateSetupBarrier.await();
      SnapshotSiteProcessor.m_snapshotCreateFinishBarrier.await();
    }
 catch (    Exception e) {
      Throwables.propagate(e);
    }
  }
  final FragmentResponseMessage response=new FragmentResponseMessage(m_task,m_initiator.getHSId());
  response.setRecovering(true);
  response.setStatus(FragmentResponseMessage.SUCCESS,null);
  m_initiator.deliver(response);
}
