def _NeedToReturnNothingDiagnoser(msg):
    'Diagnoses the NRN disease, given the error messages by the compiler.'
    gcc_regex = (_GCC_FILE_LINE_RE + "instantiated from here\\n.*gmock-actions\\.h.*error: instantiation of \\'testing::internal::ReturnAction<R>::Impl<F>::value_\\' as type \\'void\\'")
    clang_regex1 = (("error: field has incomplete type \\'Result\\' \\(aka \\'void\\'\\)(\\r)?\\n(.*\\n)*?" + _CLANG_NON_GMOCK_FILE_LINE_RE) + "note: in instantiation of function template specialization \\'testing::internal::ReturnAction<(?P<return_type>.*)>::operator Action<void \\(.*\\)>\\' requested here")
    clang_regex2 = (("error: field has incomplete type \\'Result\\' \\(aka \\'void\\'\\)(\\r)?\\n(.*\\n)*?" + _CLANG_NON_GMOCK_FILE_LINE_RE) + "note: in instantiation of function template specialization \\'testing::internal::DoBothAction<.*>::operator Action<(?P<return_type>.*) \\(.*\\)>\\' requested here")
    diagnosis = '\nYou are using an action that returns %(return_type)s, but it needs to return\nvoid.  Please use a void-returning action instead.\n\nAll actions but the last in DoAll(...) must return void.  Perhaps you need\nto re-arrange the order of actions in a DoAll(), if you are using one?'
    return _GenericDiagnoser('NRN', 'Need to Return Nothing', [(gcc_regex, (diagnosis % {'return_type': '*something*', })), (clang_regex1, diagnosis), (clang_regex2, diagnosis)], msg)
