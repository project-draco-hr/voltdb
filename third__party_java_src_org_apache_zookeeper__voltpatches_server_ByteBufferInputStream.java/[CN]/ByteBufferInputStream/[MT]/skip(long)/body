{
  long newPos=bb.position() + n;
  if (newPos > bb.remaining()) {
    n=bb.remaining();
  }
  bb.position(bb.position() + (int)n);
  return n;
}
