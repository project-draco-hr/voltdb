{
  assert(flattened.length >= getSerializedSize());
  ByteBuffer buff=ByteBuffer.wrap(flattened);
  buff.putLong(m_lastAckedDrId);
  buff.putLong(m_lastSpUniqueId);
  buff.putLong(m_lastMpUniqueId);
  buff.putInt(m_map.size());
  for (  Map.Entry<Long,Long> entry : m_map.entrySet()) {
    buff.putLong(entry.getKey());
    buff.putLong(entry.getValue());
  }
}
