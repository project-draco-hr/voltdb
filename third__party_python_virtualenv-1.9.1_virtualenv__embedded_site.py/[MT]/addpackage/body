def addpackage(sitedir, name, known_paths):
    "Add a new path to known_paths by combining sitedir and 'name' or execute\n    sitedir if it starts with 'import'"
    if (known_paths is None):
        _init_pathinfo()
        reset = 1
    else:
        reset = 0
    fullname = os.path.join(sitedir, name)
    try:
        f = open(fullname, 'rU')
    except IOError:
        return
    try:
        for line in f:
            if line.startswith('#'):
                continue
            if line.startswith('import'):
                exec line
                continue
            line = line.rstrip()
            (dir, dircase) = makepath(sitedir, line)
            if ((not (dircase in known_paths)) and os.path.exists(dir)):
                sys.path.append(dir)
                known_paths.add(dircase)
    finally:
        f.close()
    if reset:
        known_paths = None
    return known_paths
