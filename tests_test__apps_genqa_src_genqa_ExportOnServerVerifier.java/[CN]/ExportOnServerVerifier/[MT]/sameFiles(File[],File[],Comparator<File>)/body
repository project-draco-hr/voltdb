{
  boolean same=true;
  if (a == null || b == null) {
    return b == a;
  }
 else   if (a.length != b.length) {
    return false;
  }
 else {
    Arrays.sort(a,comparator);
    Arrays.sort(b,comparator);
    for (int i=0; same && i < a.length; ++i) {
      if (a[i] == null) {
        same=b[i] == null;
      }
 else {
        same=a[i].equals(b[i]);
      }
    }
  }
  return same;
}
