{
  AbstractPlanNode pn=compile("select max(r2.c) from r2 group by r2.c having (count(*), max(r2.c)) = (select a,c from r1);");
  pn=pn.getChild(0).getChild(0);
  assertEquals(PlanNodeType.SEQSCAN,pn.getPlanNodeType());
  AggregatePlanNode aggNode=AggregatePlanNode.getInlineAggregationNode(pn);
  AbstractExpression aggExpr=aggNode.getPostPredicate();
  assertEquals(ExpressionType.SELECT_SUBQUERY,aggExpr.getRight().getExpressionType());
}
