{
  assert(catalogBytes != null);
  String serializedCatalog=null;
  String voltVersionString=null;
  InMemoryJarfile jarfile=new InMemoryJarfile(catalogBytes);
  byte[] serializedCatalogBytes=jarfile.get(CATALOG_FILENAME);
  if (null == serializedCatalogBytes) {
    throw new IOException("Database catalog not found - please build your application using the current version of VoltDB.");
  }
  serializedCatalog=new String(serializedCatalogBytes,"UTF-8");
  byte[] buildInfoBytes=jarfile.get(CATALOG_BUILDINFO_FILENAME);
  if (buildInfoBytes == null) {
    throw new IOException("Catalog build information not found - please build your application using the current version of VoltDB.");
  }
  String buildInfo=new String(buildInfoBytes,"UTF-8");
  String[] buildInfoLines=buildInfo.split("\n");
  if (buildInfoLines.length != 5) {
    throw new IOException("Catalog built with an old version of VoltDB - please build your application using the current version of VoltDB.");
  }
  voltVersionString=buildInfoLines[0].trim();
  if (!isCatalogCompatible(voltVersionString)) {
    upgradeCatalog(jarfile,buildInfoLines,log);
  }
  return serializedCatalog;
}
