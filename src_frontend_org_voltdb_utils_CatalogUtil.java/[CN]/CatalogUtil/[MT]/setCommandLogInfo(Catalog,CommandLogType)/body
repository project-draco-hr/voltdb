{
  int fsyncInterval=200;
  int maxTxnsBeforeFsync=Integer.MAX_VALUE;
  boolean enabled=false;
  boolean sync=false;
  org.voltdb.catalog.CommandLog config=catalog.getClusters().get("cluster").getLogconfig().get("log");
  if (commandlog != null) {
    String mode=commandlog.getMode();
    if (mode.equalsIgnoreCase("sync")) {
      sync=true;
    }
 else     if (mode.equalsIgnoreCase("async")) {
      sync=false;
    }
 else {
      throw new RuntimeException("Invalid command log mode \"" + mode + "\" specified in deployment file");
    }
    enabled=commandlog.isEnabled();
    Frequency freq=commandlog.getFrequency();
    if (freq != null) {
      long maxTxnsBeforeFsyncTemp=freq.getMaxtransactions().longValue();
      if (maxTxnsBeforeFsyncTemp < 1 || maxTxnsBeforeFsyncTemp > Integer.MAX_VALUE) {
        throw new RuntimeException("Invalid command log max txns before fsync (" + maxTxnsBeforeFsync + ") specified. Supplied value must be between 1 and (2^31 - 1) txns");
      }
      maxTxnsBeforeFsync=(int)maxTxnsBeforeFsyncTemp;
      fsyncInterval=freq.getFsyncinterval().intValue();
      if (fsyncInterval < 1 | fsyncInterval > 5000) {
        throw new RuntimeException("Invalid command log fsync interval(" + fsyncInterval + ") specified. Supplied value must be between 1 and 5000 milliseconds");
      }
    }
  }
  config.setEnabled(enabled);
  config.setSynchronous(sync);
  config.setFsyncinterval(fsyncInterval);
  config.setMaxtxns(maxTxnsBeforeFsync);
}
