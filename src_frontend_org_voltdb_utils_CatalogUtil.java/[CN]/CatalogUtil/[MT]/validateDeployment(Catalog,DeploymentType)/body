{
  if (deployment.getUsers() == null) {
    return true;
  }
  boolean isPro=VoltDB.instance().getConfig().m_isEnterprise;
  Cluster cluster=catalog.getClusters().get("cluster");
  Database database=cluster.getDatabases().get("database");
  Set<String> validGroups=new HashSet<String>();
  for (  Group group : database.getGroups()) {
    validGroups.add(group.getTypeName());
  }
  for (  UsersType.User user : deployment.getUsers().getUser()) {
    if (!isPro && !user.isPlaintext()) {
      hostLog.error("Masked passwords are a VoltDB Enterprise edition only feature");
      return false;
    }
    if (user.getGroups() == null && user.getRoles() == null)     continue;
    for (    String group : mergeUserRoles(user)) {
      if (!validGroups.contains(group)) {
        hostLog.error("Cannot assign user \"" + user.getName() + "\" to non-existent group \""+ group+ "\"");
        return false;
      }
    }
  }
  return true;
}
