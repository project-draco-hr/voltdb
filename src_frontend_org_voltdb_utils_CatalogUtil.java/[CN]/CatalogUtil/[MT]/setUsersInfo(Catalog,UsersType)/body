{
  if (users == null) {
    return;
  }
  Database db=catalog.getClusters().get("cluster").getDatabases().get("database");
  SecureRandom sr=new SecureRandom();
  for (  UsersType.User user : users.getUser()) {
    String sha1hex=user.getPassword();
    if (user.isPlaintext()) {
      sha1hex=extractPassword(user.getPassword());
    }
    org.voltdb.catalog.User catUser=db.getUsers().add(user.getName());
    String hashedPW=BCrypt.hashpw(sha1hex,BCrypt.gensalt(BCrypt.GENSALT_DEFAULT_LOG2_ROUNDS,sr));
    catUser.setShadowpassword(hashedPW);
    for (    final String role : extractUserRoles(user)) {
      final Group catalogGroup=db.getGroups().get(role);
      if (catalogGroup != null) {
        final GroupRef groupRef=catUser.getGroups().add(role);
        groupRef.setGroup(catalogGroup);
      }
 else {
        hostLog.warn("User \"" + user.getName() + "\" is assigned to non-existent role \""+ role+ "\" "+ "and may not have the expected database permissions.");
      }
    }
  }
}
