{
  PartitionDetectionType pd=deployment.getPartitionDetection();
  if (pd == null) {
    pd=new PartitionDetectionType();
    pd.setEnabled(true);
    deployment.setPartitionDetection(pd);
  }
  if (pd.getSnapshot() == null) {
    PartitionDetectionType.Snapshot sshot=new PartitionDetectionType.Snapshot();
    sshot.setPrefix("partition_detection");
    pd.setSnapshot(sshot);
  }
  if (deployment.getAdminMode() == null) {
    AdminModeType amode=new AdminModeType();
    amode.setPort(VoltDB.DEFAULT_ADMIN_PORT);
    deployment.setAdminMode(amode);
  }
  if (deployment.getHeartbeat() == null) {
    HeartbeatType hb=new HeartbeatType();
    hb.setTimeout(org.voltcore.common.Constants.DEFAULT_HEARTBEAT_TIMEOUT_SECONDS);
    deployment.setHeartbeat(hb);
  }
  if (deployment.getHttpd() == null) {
    HttpdType httpd=new HttpdType();
    httpd.setEnabled(false);
    httpd.setPort(-1);
    HttpdType.Jsonapi jsonApi=new HttpdType.Jsonapi();
    jsonApi.setEnabled(false);
    httpd.setJsonapi(jsonApi);
    deployment.setHttpd(httpd);
  }
  if (deployment.getReplication() == null) {
    ReplicationType repl=new ReplicationType();
    deployment.setReplication(repl);
  }
  if (deployment.getSnapshot() == null) {
    SnapshotType snap=new SnapshotType();
    snap.setFrequency("10m");
    snap.setPrefix("SNAPSHOTNONCE");
    snap.setRetain(1);
    snap.setEnabled(false);
    deployment.setSnapshot(snap);
  }
  if (deployment.getSecurity() == null) {
    SecurityType sec=new SecurityType();
    sec.setEnabled(false);
    sec.setProvider(SecurityProviderString.HASH);
    deployment.setSecurity(sec);
  }
  if (deployment.getPaths() == null) {
    PathsType paths=new PathsType();
    deployment.setPaths(paths);
  }
  PathsType paths=deployment.getPaths();
  if (paths.getVoltdbroot() == null) {
    PathsType.Voltdbroot root=new PathsType.Voltdbroot();
    root.setPath("voltdbroot");
    paths.setVoltdbroot(root);
  }
  if (paths.getSnapshots() == null) {
    PathEntry snap=new PathEntry();
    snap.setPath("snapshots");
    paths.setSnapshots(snap);
  }
  if (paths.getCommandlog() == null) {
    PathEntry cl=new PathEntry();
    cl.setPath("command_log");
    paths.setCommandlog(cl);
  }
  if (paths.getCommandlogsnapshot() == null) {
    PathEntry clsnap=new PathEntry();
    clsnap.setPath("command_log_snapshot");
    paths.setCommandlogsnapshot(clsnap);
  }
  if (paths.getExportoverflow() == null) {
    PathEntry exp=new PathEntry();
    exp.setPath("export_overflow");
    paths.setExportoverflow(exp);
  }
  if (deployment.getCommandlog() == null) {
    boolean enabled=false;
    if (MiscUtils.isPro()) {
      enabled=true;
    }
    CommandLogType cl=new CommandLogType();
    cl.setEnabled(enabled);
    cl.setSynchronous(false);
    cl.setLogsize(1024);
    Frequency freq=new Frequency();
    cl.setFrequency(freq);
    deployment.setCommandlog(cl);
  }
  SystemSettingsType ss=deployment.getSystemsettings();
  if (deployment.getSystemsettings() == null) {
    ss=new SystemSettingsType();
    deployment.setSystemsettings(ss);
  }
  SystemSettingsType.Elastic sse=ss.getElastic();
  if (sse == null) {
    sse=new SystemSettingsType.Elastic();
    ss.setElastic(sse);
  }
  SystemSettingsType.Query query=ss.getQuery();
  if (query == null) {
    query=new SystemSettingsType.Query();
    ss.setQuery(query);
  }
  SystemSettingsType.Snapshot snap=ss.getSnapshot();
  if (snap == null) {
    snap=new SystemSettingsType.Snapshot();
    ss.setSnapshot(snap);
  }
  SystemSettingsType.Temptables tt=ss.getTemptables();
  if (tt == null) {
    tt=new SystemSettingsType.Temptables();
    ss.setTemptables(tt);
  }
}
