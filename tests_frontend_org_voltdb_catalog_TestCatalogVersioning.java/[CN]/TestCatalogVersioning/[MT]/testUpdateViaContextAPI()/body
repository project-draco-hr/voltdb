{
  Catalog catalog=new Catalog();
  catalog.execute(LoadCatalogToString.THE_CATALOG);
  String addTableFoo="add /clusters[cluster]/databases[database] tables FOO";
  String addTableBar="add /clusters[cluster]/databases[database] tables BAR";
  CatalogContext context=new CatalogContext(catalog,CatalogContext.NO_PATH,0,0,0);
  CatalogContext foocontext=context.update(CatalogContext.NO_PATH,addTableFoo,true,-1);
  assertTrue(context != foocontext);
  assertTrue(context.catalogVersion < foocontext.catalogVersion);
  assertTrue(context.catalog.m_currentCatalogVersion < foocontext.catalog.m_currentCatalogVersion);
  assertTrue(context.catalog.getSubTreeVersion() <= foocontext.catalog.getSubTreeVersion());
  CatalogContext barcontext=foocontext.update(CatalogContext.NO_PATH,addTableBar,true,-1);
  assertTrue(foocontext != barcontext);
  assertTrue(foocontext.catalogVersion < barcontext.catalogVersion);
  assertTrue(foocontext.catalog.m_currentCatalogVersion < barcontext.catalog.m_currentCatalogVersion);
  assertTrue(foocontext.catalog.getSubTreeVersion() <= barcontext.catalog.getSubTreeVersion());
}
