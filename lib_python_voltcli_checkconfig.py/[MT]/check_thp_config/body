def check_thp_config():
    thp_filenames = glob.glob('/sys/kernel/mm/*transparent_hugepage/enabled')
    thp_filenames += glob.glob('/sys/kernel/mm/*transparent_hugepage/defrag')
    for filename in thp_filenames:
        with file(filename) as f:
            if ('[always]' in f.read()):
                return "The kernel is configured to use transparent huge pages (THP). This is not supported when running VoltDB. See the VoltDB Administrator's Guide for instructions for disabling THP."
