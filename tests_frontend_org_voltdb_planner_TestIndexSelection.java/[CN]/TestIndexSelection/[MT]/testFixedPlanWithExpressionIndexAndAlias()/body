{
  AbstractPlanNode pn;
  IndexScanPlanNode ispn;
  String json;
  pn=compile("select * from l aliased where  b = ? and DECODE(a, null, 0, a) = 0 and id = ?;");
  pn=pn.getChild(0);
  assertTrue(pn instanceof IndexScanPlanNode);
  json=pn.toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  pn=compile("select * from l aliased, l where l.b = ? and DECODE(l.a, null, 0, l.a) = 0 and l.id = ? and l.lname = aliased.lname;");
  System.out.println("DEBUG: " + pn.toExplainPlanString());
  pn=pn.getChild(0).getChild(0).getChild(1);
  assertTrue(pn instanceof IndexScanPlanNode);
  json=pn.toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  pn=compile("select * from l x, l where x.b = ? and DECODE(x.a, null, 0, x.a) = 0 and x.id = ? and l.lname = x.lname;");
  pn=pn.getChild(0).getChild(0).getChild(0);
  assertTrue(pn instanceof IndexScanPlanNode);
  json=pn.toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  pn=compile("select * from l x, l where x.b = ? and DECODE(x.a, null, 0, x.a) = 0 and x.id = ? and l.lname = x.lname;");
  pn=pn.getChild(0).getChild(0).getChild(0);
  assertTrue(pn instanceof IndexScanPlanNode);
  json=pn.toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  pn=compile("select * from l x, l where l.b = ? and DECODE(x.a, null, 0, x.a) = 0 and x.id = ? and l.lname = x.lname;");
  System.out.println("DEBUG: " + pn.toExplainPlanString());
  pn=pn.getChild(0).getChild(0).getChild(1);
  assertTrue(pn instanceof IndexScanPlanNode);
  json=pn.toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  ispn=(IndexScanPlanNode)pn;
  assertEquals(1,ispn.getSearchKeyExpressions().size());
  pn=compile("select * from l x, l where l.b = ? and DECODE(x.a, null, 0, x.a) = 0 and l.id = ? and l.lname = x.lname;");
  System.out.println("DEBUG: " + pn.toExplainPlanString());
  pn=pn.getChild(0).getChild(0);
  assertTrue(pn.getChild(0) instanceof IndexScanPlanNode);
  json=pn.getChild(0).toJSONString();
  assertFalse(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  assertTrue(pn.getChild(1) instanceof IndexScanPlanNode);
  json=pn.getChild(1).toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  ispn=(IndexScanPlanNode)(pn.getChild(1));
  assertEquals(1,ispn.getSearchKeyExpressions().size());
  pn=compile("select * from l x, l where x.b = ? and DECODE(l.a, null, 0, l.a) = 0 and x.id = ? and l.lname = x.lname;");
  System.out.println("DEBUG: " + pn.toExplainPlanString());
  pn=pn.getChild(0).getChild(0);
  assertTrue(pn.getChild(0) instanceof IndexScanPlanNode);
  json=pn.getChild(0).toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  ispn=(IndexScanPlanNode)(pn.getChild(0));
  assertEquals(1,ispn.getSearchKeyExpressions().size());
  assertTrue(pn.getChild(1) instanceof IndexScanPlanNode);
  json=pn.getChild(1).toJSONString();
  assertFalse(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  pn=compile("select * from l x, l where l.b = ? and DECODE(x.a, null, 0, x.a) = 0 and l.id = ? and l.lname = x.lname;");
  System.out.println("DEBUG: " + pn.toExplainPlanString());
  pn=pn.getChild(0).getChild(0);
  assertTrue(pn.getChild(0) instanceof IndexScanPlanNode);
  json=pn.getChild(0).toJSONString();
  assertFalse(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  assertTrue(pn.getChild(1) instanceof IndexScanPlanNode);
  json=pn.getChild(1).toJSONString();
  assertTrue(json.contains("\"TARGET_INDEX_NAME\":\"DECODE_IDX3\""));
  ispn=(IndexScanPlanNode)(pn.getChild(1));
  assertEquals(1,ispn.getSearchKeyExpressions().size());
}
