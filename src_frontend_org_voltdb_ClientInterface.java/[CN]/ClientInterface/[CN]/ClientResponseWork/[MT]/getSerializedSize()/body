{
  ClientInterfaceHandleManager.Iv2InFlight clientData;
  if (clientResponse != null && clientResponse.getStatusString() != null && clientResponse.getStatusString().equals(ClientResponseImpl.IGNORED_TRANSACTION)) {
    clientData=cihm.removeHandle(response.getClientInterfaceHandle());
  }
 else {
    clientData=cihm.findHandle(response.getClientInterfaceHandle());
  }
  if (clientData == null) {
    return -1;
  }
  final long now=System.currentTimeMillis();
  final int delta=(int)(now - clientData.m_creationTime);
  if (restartTransaction(clientData.m_messageSize,clientData.m_creationTime)) {
    return -1;
  }
  cihm.m_acg.logTransactionCompleted(cihm.connection.connectionId(),cihm.connection.getHostnameOrIP(),clientData.m_procName,delta,clientResponse.getStatus());
  clientResponse.setClientHandle(clientData.m_clientHandle);
  clientResponse.setClusterRoundtrip(delta);
  clientResponse.setHash(null);
  return clientResponse.getSerializedSize() + 4;
}
