{
  if (response.isMispartitioned()) {
    assert(invocation != null);
    assert(catProc != null);
    int partitionParamIndex=catProc.getPartitionparameter();
    int partitionParamType=catProc.getPartitioncolumn().getType();
    boolean isReadonly=catProc.getReadonly();
    try {
      int partition=getPartitionForProcedure(partitionParamIndex,partitionParamType,invocation);
      createTransaction(cihm.connection.connectionId(),null,false,invocation,isReadonly,true,false,new int[]{partition},cihm.connection,messageSize,now);
      return true;
    }
 catch (    Exception e) {
      assert(clientResponse == null);
      clientResponse=new ClientResponseImpl(ClientResponse.UNEXPECTED_FAILURE,new VoltTable[]{},"Fail to get the partition for a restarted transaction" + e.getMessage());
    }
  }
  return false;
}
