{
  if (response.isMispartitioned()) {
    assert(invocation != null);
    boolean allowMismatchedResults=catProc.getReadonly() && isProcedureNonDeterministic(catProc);
    try {
      int partition=getPartitionForProcedure(catProc.getPartitionparameter(),catProc.getPartitioncolumn().getType(),invocation);
      createTransaction(cihm.connection.connectionId(),null,false,invocation,catProc.getReadonly(),catProc.getSinglepartition(),catProc.getEverysite(),new int[]{partition},1,cihm.connection,messageSize,now,allowMismatchedResults);
      return true;
    }
 catch (    Exception e) {
      assert(clientResponse == null);
      clientResponse=new ClientResponseImpl(ClientResponse.UNEXPECTED_FAILURE,new VoltTable[]{},"Fail to get the partition for a restarted transaction" + e.getMessage());
    }
  }
  return false;
}
