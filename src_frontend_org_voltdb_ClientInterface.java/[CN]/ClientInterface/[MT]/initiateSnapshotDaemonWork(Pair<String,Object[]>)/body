{
  if (invocation != null) {
    final Procedure catProc=m_catalogContext.get().procedures.get(invocation.getFirst());
    if (catProc == null) {
      throw new RuntimeException("SnapshotDaemon attempted to invoke " + invocation.getFirst() + " which is not a known procedure");
    }
    if (!catProc.getSystemproc()) {
      throw new RuntimeException("SnapshotDaemon attempted to invoke " + invocation.getFirst() + " which is not a system procedure");
    }
    StoredProcedureInvocation spi=new StoredProcedureInvocation();
    spi.procName=invocation.getFirst();
    spi.params=new ParameterSet();
    spi.params.setParameters(invocation.getSecond());
    m_initiator.createTransaction(-1,"SnapshotDaemon",spi,catProc.getReadonly(),catProc.getSinglepartition(),catProc.getEverysite(),m_allPartitions,m_allPartitions.length,m_snapshotDaemonAdapter,0,0);
  }
}
