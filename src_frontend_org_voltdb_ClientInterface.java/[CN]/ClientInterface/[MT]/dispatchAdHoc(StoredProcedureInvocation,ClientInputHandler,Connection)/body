{
  ParameterSet params=task.getParams();
  String sql=(String)params.toArray()[0];
  Object partitionParam=null;
  if (params.toArray().length > 1) {
    if (params.toArray()[1] == null) {
      partitionParam=new Long(0);
    }
 else {
      partitionParam=params.toArray()[1];
    }
  }
  AdHocPlannedStmt plan=m_adhocCache.get(sql,partitionParam != null);
  if (plan != null) {
    if (plan.catalogVersion == m_catalogContext.get().catalogVersion) {
      plan=(AdHocPlannedStmt)plan.clone();
      plan.adminConnection=handler.isAdmin();
      plan.clientData=ccxn;
      plan.partitionParam=partitionParam;
      plan.clientHandle=task.clientHandle;
      plan.hostname=handler.m_hostname;
      plan.connectionId=handler.connectionId();
      createAdHocTransaction(plan);
      return null;
    }
  }
  LocalObjectMessage work=new LocalObjectMessage(new AdHocPlannerWork(m_siteId,false,task.clientHandle,handler.connectionId(),handler.m_hostname,handler.isAdmin(),ccxn,sql,partitionParam));
  m_mailbox.send(m_plannerSiteId,work);
  return null;
}
