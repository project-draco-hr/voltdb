{
  ParameterSet params=task.getParams();
  String sql=(String)params.m_params[0];
  Object partitionParam=null;
  if (params.m_params.length > 1) {
    if (params.m_params[1] == null) {
      partitionParam=new Long(0);
    }
 else {
      partitionParam=params.m_params[1];
    }
  }
  LocalObjectMessage work=new LocalObjectMessage(new AdHocPlannerWork(m_siteId,VoltDB.CLIENT_INTERFACE_MAILBOX_ID,false,task.clientHandle,handler.connectionId(),handler.m_hostname,handler.isAdmin(),ccxn,sql,partitionParam));
  try {
    m_mailbox.send(VoltDB.instance().getAgreementSite().siteId(),VoltDB.ASYNC_COMPILER_MAILBOX_ID,work);
  }
 catch (  MessagingException ex) {
    return new ClientResponseImpl(ClientResponseImpl.GRACEFUL_FAILURE,new VoltTable[0],"Failed to process Ad Hoc request. No data was read or written.",task.clientHandle);
  }
  return null;
}
