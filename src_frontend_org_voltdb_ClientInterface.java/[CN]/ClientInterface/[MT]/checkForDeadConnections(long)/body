{
  Connection connectionsToCheck[];
synchronized (m_connections) {
    connectionsToCheck=m_connections.toArray(new Connection[m_connections.size()]);
  }
  final ArrayList<Connection> connectionsToRemove=new ArrayList<Connection>();
  for (  final Connection c : connectionsToCheck) {
    final int delta=c.writeStream().calculatePendingWriteDelta(now);
    if (delta > 4000) {
      connectionsToRemove.add(c);
    }
  }
  for (  final Connection c : connectionsToRemove) {
    networkLog.warn("Closing connection to " + c + " at "+ now+ " because it refuses to read responses");
    c.unregister();
  }
}
