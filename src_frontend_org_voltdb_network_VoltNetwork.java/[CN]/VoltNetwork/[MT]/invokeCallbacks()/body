{
  final Set<SelectionKey> selectedKeys=m_selector.selectedKeys();
  final ArrayList<Runnable> generatedTasks=new ArrayList<Runnable>();
  for (  SelectionKey key : selectedKeys) {
    final Object obj=key.attachment();
    if (obj == null) {
      continue;
    }
    final VoltPort port=(VoltPort)key.attachment();
    try {
      port.lockForHandlingWork();
      key.interestOps(0);
      final Runnable runner=getPortCallRunnable(port);
      if (m_useExecutorService) {
        generatedTasks.add(runner);
      }
 else {
        runner.run();
      }
    }
 catch (    CancelledKeyException e) {
      e.printStackTrace();
    }
  }
  if (!generatedTasks.isEmpty()) {
synchronized (m_tasks) {
      m_tasks.addAll(generatedTasks);
      if (m_tasks.size() > 1) {
        m_tasks.notifyAll();
      }
 else {
        m_tasks.notify();
      }
    }
  }
  selectedKeys.clear();
}
