def maybe_add_crumb(self, req):
    if (self.crumb is None):
        try:
            response = self.jenkins_open(Request(self._build_url(CRUMB_URL)), add_crumb=False)
        except (NotFoundException, EmptyResponseException):
            self.crumb = False
        else:
            self.crumb = json.loads(response)
    if self.crumb:
        req.add_header(self.crumb['crumbRequestField'], self.crumb['crumb'])
