{
  checkPermits(permits);
  long microsToWait=reserveNextTicket(permits,readSafeMicros());
  ticker.sleepMicrosUninterruptibly(microsToWait);
}
