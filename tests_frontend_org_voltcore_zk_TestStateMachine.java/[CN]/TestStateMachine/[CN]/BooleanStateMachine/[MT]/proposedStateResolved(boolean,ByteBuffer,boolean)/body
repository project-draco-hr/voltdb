{
  assertFalse(isLocalStateLocked());
  if (success) {
    state=toBoolean(proposedState);
  }
  if (ourProposal) {
    ourProposalFinished=true;
    makeProposal=false;
  }
}
