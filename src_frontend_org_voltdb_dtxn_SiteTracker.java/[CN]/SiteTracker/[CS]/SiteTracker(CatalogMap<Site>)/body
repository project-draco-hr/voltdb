{
  m_sites=clusterSites;
  for (  Site site : clusterSites) {
    int siteId=Integer.parseInt(site.getTypeName());
    int hostId=Integer.parseInt(site.getHost().getTypeName());
    if (!m_hostsToSites.containsKey(hostId)) {
      m_hostsToSites.put(hostId,new ArrayList<Integer>());
    }
    m_hostsToSites.get(hostId).add(siteId);
    if (site.getIsexec() == false) {
      if (site.getIsup()) {
        m_liveInitiatorCount++;
      }
    }
 else {
      int partitionId=Integer.parseInt(site.getPartition().getTypeName());
      m_sitesToPartitions.put(siteId,partitionId);
      if (!m_partitionsToSites.containsKey(partitionId)) {
        m_partitionsToSites.put(partitionId,new ArrayList<Integer>());
      }
      m_partitionsToSites.get(partitionId).add(siteId);
      if (!m_partitionsToLiveSites.containsKey(partitionId)) {
        m_partitionsToLiveSites.put(partitionId,new ArrayList<Integer>());
      }
      if (site.getIsup() == true) {
        m_liveSiteCount++;
        m_partitionsToLiveSites.get(partitionId).add(siteId);
      }
    }
  }
  m_tempOldSitesScratch=new int[m_sites.size()];
  for (  int siteId : m_sitesToPartitions.keySet()) {
    if (getSiteForId(siteId).getIsup()) {
      m_lastHeartbeatTime.put(siteId,-1L);
    }
  }
}
