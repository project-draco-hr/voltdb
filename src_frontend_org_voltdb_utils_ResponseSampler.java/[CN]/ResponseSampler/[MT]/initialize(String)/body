{
  if (m_sampling)   return;
  m_sampledTxnIds.clear();
  m_sampling=false;
  m_sampleDir=null;
  m_work.clear();
  m_sampler=null;
  prexistingSampleCount=0;
  totalSamplesTaken=0;
  errorsFound=0;
  responsesCompared=0;
  LOG.info("Will attempt to sample transaction results to directory: " + sampleDirPath);
  File d=new File(sampleDirPath);
  if (!d.exists()) {
    LOG.error("Transaction result sample directory not found. Will not sample.");
    return;
  }
  if (!d.isDirectory()) {
    LOG.error("Transaction result sample directory is not a directory. Will not sample.");
    return;
  }
  if (!d.canRead() || !d.canWrite()) {
    LOG.error("Transaction result sample directory has restricted permissions. Will not sample.");
    return;
  }
  m_sampleDir=d;
  for (  File f : m_sampleDir.listFiles()) {
    String filename=f.getName();
    if (!filename.startsWith(SAMPLE_FILE_PREFIX))     continue;
    assert(f.canRead());
    String txnIdStr=filename.substring(SAMPLE_FILE_PREFIX.length(),filename.length() - SAMPLE_FILE_EXTENSION.length());
    long txnId=Long.parseLong(txnIdStr);
    m_sampledTxnIds.add(txnId);
    ++prexistingSampleCount;
  }
  LOG.info(String.format("Txn response sampler found %d prexisting responses on disk.",prexistingSampleCount));
  m_shouldContinueSamplerThread.set(true);
  m_sampler=new Thread(m_samplerRunner);
  m_sampler.setName("Txn Response Sampler");
  m_sampler.setDaemon(true);
  m_sampler.start();
  m_sampling=true;
}
