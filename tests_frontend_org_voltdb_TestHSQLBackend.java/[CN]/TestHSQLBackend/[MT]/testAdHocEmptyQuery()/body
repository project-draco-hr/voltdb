{
  TPCCProjectBuilder builder=new TPCCProjectBuilder();
  builder.addDefaultSchema();
  builder.addDefaultPartitioning();
  builder.addProcedures(org.voltdb.benchmark.tpcc.procedures.SelectAll.class);
  String testDir=BuildDirectoryUtils.getBuildDirectoryPath();
  String catalogJar=testDir + File.separator + "tpcchsql.jar";
  builder.compile(catalogJar,1,1,0);
  final File jar=new File(catalogJar);
  jar.deleteOnExit();
  ServerThread server=new ServerThread(catalogJar,builder.getPathToDeployment(),BackendTarget.HSQLDB_BACKEND);
  server.start();
  server.waitForInitialization();
  ClientConfig config=new ClientConfig("program","none");
  Client client=ClientFactory.createClient(config);
  client.createConnection("localhost");
  VoltTable[] results=client.callProcedure("@AdHoc","select * from WAREHOUSE").getResults();
  assertTrue(results.length > 0);
  assertTrue(results[0].getRowCount() == 0);
  server.shutdown();
  server.join();
}
