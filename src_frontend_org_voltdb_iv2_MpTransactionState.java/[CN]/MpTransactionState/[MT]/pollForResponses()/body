{
  FragmentResponseMessage msg;
  try {
    msg=m_newDeps.take();
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
  if (msg.getStatusCode() != FragmentResponseMessage.SUCCESS) {
    m_needsRollback=true;
    if (msg.getException() != null) {
      throw msg.getException();
    }
 else {
      throw new FragmentFailureException();
    }
  }
  return msg;
}
