{
  WorkUnitState retval=new WorkUnitState();
  if (m_payload != null)   retval.payload=m_payload.toString();
  retval.shouldResume=m_shouldResumeProcedure;
  retval.outstandingDependencyCount=0;
  if (m_dependencies != null) {
    retval.dependencies=new DependencyState[m_dependencies.size()];
    int i=0;
    for (    Entry<Integer,DependencyTracker> entry : m_dependencies.entrySet()) {
      DependencyState ds=new DependencyState();
      ds.dependencyId=entry.getKey();
      ds.count=entry.getValue().size();
      retval.outstandingDependencyCount+=entry.getValue().getExpectedDepCount();
      retval.dependencies[i++]=ds;
    }
  }
  return retval;
}
