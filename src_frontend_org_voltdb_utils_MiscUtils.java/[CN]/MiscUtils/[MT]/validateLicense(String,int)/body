{
  File licenseFile=new File(pathToLicense);
  if (licenseFile.exists() == false) {
    hostLog.fatal("Unable to open license file: " + pathToLicense);
    return false;
  }
  LicenseApi licenseApi=null;
  Class<?> licApiKlass=MiscUtils.loadProClass("org.voltdb.licensetool.LicenseApiImpl","License API",false);
  if (licApiKlass != null) {
    try {
      licenseApi=(LicenseApi)licApiKlass.newInstance();
    }
 catch (    InstantiationException e) {
      hostLog.fatal("Unable to process license file: could not create license API.");
      return false;
    }
catch (    IllegalAccessException e) {
      hostLog.fatal("Unable to process license file: could not create license API.");
      return false;
    }
  }
  if (licenseApi == null) {
    hostLog.fatal("Unable to load license file: could not create license API.");
    return false;
  }
  if (licenseApi.initializeFromFile(licenseFile) == false) {
    hostLog.fatal("Unable to load license file: could not parse license.");
    return false;
  }
  if (licenseApi.verify() == false) {
    hostLog.fatal("Unable to load license file: could not verify license signature.");
    return false;
  }
  Calendar now=GregorianCalendar.getInstance();
  SimpleDateFormat sdf=new SimpleDateFormat("MMM d, yyyy");
  String expiresStr=sdf.format(licenseApi.expires().getTime());
  boolean valid=true;
  if (now.after(licenseApi.expires())) {
    if (licenseApi.isTrial()) {
      hostLog.fatal("VoltDB trial license expired on " + expiresStr + ".");
      return false;
    }
 else {
      hostLog.error("Warning, VoltDB commercial license expired on " + expiresStr + ".");
      valid=false;
    }
  }
  if (licenseApi.isTrial()) {
    hostLog.info("Starting VoltDB with trial license. License expires on " + expiresStr + ".");
    return true;
  }
  if (numberOfNodes > licenseApi.maxHostcount()) {
    hostLog.error("Warning, VoltDB commercial license for " + licenseApi.maxHostcount() + " nodes, starting cluster with "+ numberOfNodes+ " nodes.");
    valid=false;
  }
  String msg=String.format("Starting VoltDB with %scommercial license. " + "License for %d nodes expires on %s.",(valid ? "" : "invalid "),licenseApi.maxHostcount(),expiresStr);
  hostLog.info(msg);
  return true;
}
