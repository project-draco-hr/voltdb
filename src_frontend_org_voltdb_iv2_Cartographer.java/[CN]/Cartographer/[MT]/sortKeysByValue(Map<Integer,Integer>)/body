{
  List<Entry<Integer,Integer>> entries=new ArrayList<Entry<Integer,Integer>>(map.entrySet());
  Collections.sort(entries,new Comparator<Entry<Integer,Integer>>(){
    public int compare(    Entry<Integer,Integer> o1,    Entry<Integer,Integer> o2){
      if (!o1.getValue().equals(o2.getValue())) {
        return (o1.getValue()).compareTo(o2.getValue());
      }
      return o1.getKey().compareTo(o2.getKey());
    }
  }
);
  List<Integer> keys=new ArrayList<Integer>();
  for (  Entry<Integer,Integer> entry : entries) {
    keys.add(entry.getKey());
  }
  return keys;
}
