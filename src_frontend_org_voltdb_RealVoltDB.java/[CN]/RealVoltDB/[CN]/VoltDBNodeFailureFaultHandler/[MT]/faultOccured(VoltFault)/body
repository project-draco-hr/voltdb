{
  if (fault instanceof NodeFailureFault) {
    NodeFailureFault node_fault=(NodeFailureFault)fault;
    System.err.println("Host failed: " + node_fault.getHostId());
    ArrayList<Integer> dead_sites=VoltDB.instance().getCatalogContext().siteTracker.getAllSitesForHost(node_fault.getHostId());
    StringBuilder sb=new StringBuilder();
    for (    int site_id : dead_sites) {
      sb.append("set ");
      String site_path=VoltDB.instance().getCatalogContext().catalog.getClusters().get("cluster").getSites().get(Integer.toString(site_id)).getPath();
      sb.append(site_path).append(" ").append("isUp false");
      sb.append("\n");
    }
    System.out.println(sb.toString());
    VoltDB.instance().clusterUpdate(sb.toString());
  }
}
