{
  if (!isIV2Enabled()) {
    for (    ExecutionSiteRunner r : m_runners) {
      r.m_shouldStartRunning.countDown();
    }
  }
  if (m_restoreAgent != null) {
    m_restoreAgent.restore();
  }
 else {
    onRestoreCompletion(Long.MIN_VALUE,m_iv2InitiatorStartingTxnIds);
  }
  if (m_joinCoordinator != null) {
    try {
      m_joinCoordinator.setClientInterface(m_clientInterfaces.get(0));
      String clSnapshotPath=m_catalogContext.cluster.getLogconfig().get("log").getInternalsnapshotpath();
      if (!m_joinCoordinator.startJoin(m_catalogContext.database,m_cartographer,clSnapshotPath)) {
        VoltDB.crashLocalVoltDB("Failed to join the cluster",true,null);
      }
    }
 catch (    Exception e) {
      VoltDB.crashLocalVoltDB("Failed to join the cluster",true,e);
    }
  }
  Thread.currentThread().setName("ExecutionSiteAndVoltDB");
  m_isRunning=true;
  try {
    if (!isIV2Enabled()) {
      m_currentThreadSite.run();
    }
 else {
      while (m_isRunning) {
        Thread.sleep(3000);
      }
    }
  }
 catch (  Throwable thrown) {
    String errmsg=" encountered an unexpected error and will die, taking this VoltDB node down.";
    hostLog.error(errmsg);
    hostLog.fatal("Stack trace of thrown exception: " + thrown.toString());
    for (    StackTraceElement ste : thrown.getStackTrace()) {
      hostLog.fatal(ste.toString());
    }
    VoltDB.crashLocalVoltDB(errmsg,true,thrown);
  }
}
