{
synchronized (m_catalogUpdateLock) {
    if (m_catalogContext.catalog.getSubTreeVersion() != expectedCatalogVersion)     throw new RuntimeException("Trying to update main catalog context with diff " + "commands generated for an out-of date catalog.");
    m_catalogContext=m_catalogContext.update(newCatalogURL,diffCommands);
  }
  for (  ClientInterface ci : m_clientInterfaces)   ci.notifyOfCatalogUpdate();
}
