{
  Map<Long,Integer> siteMap=new HashMap<Long,Integer>();
  Set<Long> sites=m_catalogContext.siteTracker.getAllLiveSites();
  for (  long site : sites) {
    siteMap.put(site,m_catalogContext.siteTracker.getPartitionForSite(site));
  }
  ExecutorTxnIdSafetyState safetyState=new ExecutorTxnIdSafetyState(siteMap);
  DtxnInitiatorMailbox mailbox=new DtxnInitiatorMailbox(safetyState,m_messenger);
  m_messenger.createMailbox(null,mailbox);
  registerInitiatorMailbox(mailbox.getHSId());
  return mailbox;
}
