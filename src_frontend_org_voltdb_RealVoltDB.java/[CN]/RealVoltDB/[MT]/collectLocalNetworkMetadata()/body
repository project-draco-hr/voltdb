{
  String localMetadata="";
  if (m_config.m_externalInterface.equals("")) {
    LinkedList<NetworkInterface> interfaces=new LinkedList<NetworkInterface>();
    try {
      Enumeration<NetworkInterface> intfEnum=NetworkInterface.getNetworkInterfaces();
      while (intfEnum.hasMoreElements()) {
        NetworkInterface intf=intfEnum.nextElement();
        if (intf.isLoopback() || !intf.isUp()) {
          continue;
        }
        interfaces.offer(intf);
      }
    }
 catch (    SocketException e) {
      throw new RuntimeException(e);
    }
    while (!interfaces.isEmpty()) {
      NetworkInterface intf=interfaces.poll();
      Enumeration<InetAddress> inetAddrs=intf.getInetAddresses();
      Inet4Address addr=null;
      while (inetAddrs.hasMoreElements()) {
        InetAddress inetAddr=inetAddrs.nextElement();
        if (inetAddr instanceof Inet4Address) {
          addr=(Inet4Address)inetAddr;
          break;
        }
      }
      localMetadata+=addr.getHostAddress();
      if (interfaces.peek() != null) {
        localMetadata+=",";
      }
    }
  }
 else {
    localMetadata=m_config.m_externalInterface;
  }
  localMetadata+=":" + Integer.valueOf(m_config.m_port);
  localMetadata+=":" + Integer.valueOf(m_config.m_adminPort);
  localMetadata+=":" + Integer.valueOf(m_config.m_httpPort);
  localMetadata+=":" + Integer.valueOf(m_config.m_drAgentPortStart);
  m_localMetadata=localMetadata;
}
