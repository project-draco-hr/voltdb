{
  ZooKeeper zk=m_messenger.getZK();
  String lockPath=null;
  for (int ii=0; ii < 120; ii++) {
    try {
      lockPath=zk.create(VoltZK.rejoinLock,null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);
      break;
    }
 catch (    KeeperException.NodeExistsException e) {
      try {
        Thread.sleep(500);
      }
 catch (      InterruptedException e1) {
        throw new RuntimeException(e1);
      }
    }
catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  if (lockPath == null) {
    VoltDB.crashLocalVoltDB("Unable to acquire rejoin lock in ZK, " + "it may be necessary to delete the lock from the ZK CLI if " + "you are sure no other rejoin is in progress",false,null);
  }
  new Thread(){
    @Override public void run(){
      try {
        if (!cdl.await(1,TimeUnit.MINUTES)) {
          VoltDB.crashLocalVoltDB("Rejoin watchdog timed out after 60 seconds, rejoin hung",false,null);
        }
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
.start();
}
