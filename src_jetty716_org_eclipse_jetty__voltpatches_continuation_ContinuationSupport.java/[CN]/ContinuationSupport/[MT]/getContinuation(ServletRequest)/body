{
  Continuation continuation=(Continuation)request.getAttribute(Continuation.ATTRIBUTE);
  if (continuation != null)   return continuation;
  while (request instanceof ServletRequestWrapper)   request=((ServletRequestWrapper)request).getRequest();
  if (__servlet3) {
    try {
      continuation=__newServlet3Continuation.newInstance(request);
      request.setAttribute(Continuation.ATTRIBUTE,continuation);
      return continuation;
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  if (__jetty6) {
    Object c=request.getAttribute("org.mortbay.jetty.ajax.Continuation");
    try {
      if (c == null || __waitingContinuation == null || __waitingContinuation.isInstance(c))       continuation=new FauxContinuation(request);
 else       continuation=__newJetty6Continuation.newInstance(request,c);
      request.setAttribute(Continuation.ATTRIBUTE,continuation);
      return continuation;
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  throw new IllegalStateException("!(Jetty || Servlet 3.0 || ContinuationFilter)");
}
