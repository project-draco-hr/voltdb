{
  ExecutionEngine ee=new ExecutionEngineJNI(1,1,0,0,"",100,HashinatorType.LEGACY,LegacyHashinator.getConfigureBytes(2));
  for (int i=0; i < 100000; i++) {
    int partitionCount=r.nextInt(1000) + 1;
    byte[] valueToHash=new byte[r.nextInt(1000)];
    r.nextBytes(valueToHash);
    final byte configBytes[]=LegacyHashinator.getConfigureBytes(partitionCount);
    TheHashinator.initialize(LegacyHashinator.class,configBytes);
    int eehash=ee.hashinate(valueToHash,HashinatorType.LEGACY,configBytes);
    int javahash=TheHashinator.hashinateBytes(valueToHash);
    if (eehash != javahash) {
      partitionCount++;
    }
    assertTrue(eehash < partitionCount);
    assertTrue(eehash >= 0);
    assertEquals(eehash,javahash);
  }
  try {
    ee.release();
  }
 catch (  Exception e) {
  }
}
