{
  try {
    if (!m_alreadyStopped) {
      m_alreadyStopped=true;
      try {
        m_handler.stopped(this);
      }
  finally {
        try {
          m_writeStream.shutdown();
        }
  finally {
          m_readStream.shutdown();
        }
      }
    }
  }
  finally {
    if (networkLog.isDebugEnabled()) {
      networkLog.info("Closing channel " + m_toString);
    }
    try {
      m_channel.close();
    }
 catch (    IOException e) {
      networkLog.warn(e);
    }
  }
}
