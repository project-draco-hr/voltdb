{
  if (m_isShutdown) {
    throw new NoConnectionsException("Client instance is shutdown");
  }
  if (m_blessedThreadIds.contains(Thread.currentThread().getId())) {
    throw new IOException("Can't invoke a procedure synchronously from with the client callback thread " + " without deadlocking the client library");
  }
  m_distributer.queue(invocation,cb,true,timeout);
  try {
    cb.waitForResponse();
  }
 catch (  final InterruptedException e) {
    throw new java.io.InterruptedIOException("Interrupted while waiting for response");
  }
  if (cb.getResponse().getStatus() != ClientResponse.SUCCESS) {
    throw new ProcCallException(cb.getResponse(),cb.getResponse().getStatusString(),cb.getResponse().getException());
  }
  return cb.getResponse();
}
