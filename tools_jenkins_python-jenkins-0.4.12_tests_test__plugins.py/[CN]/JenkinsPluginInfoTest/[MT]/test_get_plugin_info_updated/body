@patch.object(jenkins.Jenkins, 'jenkins_open')
def test_get_plugin_info_updated(self, jenkins_mock):
    jenkins_mock.side_effect = [json.dumps(self.plugin_info_json), json.dumps(self.updated_plugin_info_json)]
    j = jenkins.Jenkins(self.make_url(''), 'test', 'test')
    plugins_info = j.get_plugins()
    self.assertEqual(plugins_info['mailer']['version'], self.plugin_info_json['plugins'][0]['version'])
    self.assertNotEqual(plugins_info['mailer']['version'], self.updated_plugin_info_json['plugins'][0]['version'])
    plugins_info = j.get_plugins()
    self.assertEqual(plugins_info['mailer']['version'], self.updated_plugin_info_json['plugins'][0]['version'])
