{
  TheHashinator.HashinatorType hashinatorType=TheHashinator.getConfiguredHashinatorType();
  if (hashinatorType == TheHashinator.HashinatorType.LEGACY) {
    return true;
  }
  if (m_catProc.getSinglepartition()) {
    StoredProcedureInvocation invocation=txnState.getInvocation();
    int parameterType=m_catProc.getPartitioncolumn().getType();
    int partitionparameter=m_catProc.getPartitionparameter();
    Object parameterAtIndex=invocation.getParameterAtIndex(partitionparameter);
    try {
      int partition=TheHashinator.getPartitionForParameter(parameterType,parameterAtIndex);
      if (partition == m_site.getCorrespondingPartitionId()) {
        return true;
      }
 else {
        if (log.isTraceEnabled()) {
          log.trace("Txn " + txnState.getInvocation().getProcName() + " will be restarted");
        }
      }
    }
 catch (    Exception e) {
      log.warn("Unable to check partitioning of transaction " + txnState.m_spHandle,e);
    }
    return false;
  }
 else {
    return true;
  }
}
