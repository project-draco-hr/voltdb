{
  ByteBuffer buffer=ByteBuffer.allocate(1024);
  double tps, averageDecodeTime;
  try {
    tps=transactions.get() / statsDuration;
    averageDecodeTime=totalDecodeTime.get() / transactions.get();
  }
 catch (  ArithmeticException e) {
    return;
  }
  transactions.set(0);
  totalDecodeTime.set(0);
  String message="tps:" + tps + ",decodeTime:"+ averageDecodeTime+ ",partitionId:"+ m_source.partitionId+ "\n";
  buffer.clear();
  buffer.put((byte)message.length());
  buffer.put(message.getBytes());
  buffer.flip();
  try {
    int sent=channel.send(buffer,address);
    if (sent != message.getBytes().length + 1) {
      m_logger.error("Error sending entire stats message");
    }
  }
 catch (  IOException e) {
    m_logger.error("Couldn't send stats to socket");
  }
}
