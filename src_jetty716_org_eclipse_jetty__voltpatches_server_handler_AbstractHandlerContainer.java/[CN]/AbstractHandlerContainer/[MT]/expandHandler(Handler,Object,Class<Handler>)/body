{
  if (handler == null)   return list;
  if (byClass == null || byClass.isAssignableFrom(handler.getClass()))   list=LazyList.add(list,handler);
  if (handler instanceof AbstractHandlerContainer)   list=((AbstractHandlerContainer)handler).expandChildren(list,byClass);
 else   if (handler instanceof HandlerContainer) {
    HandlerContainer container=(HandlerContainer)handler;
    Handler[] handlers=byClass == null ? container.getChildHandlers() : container.getChildHandlersByClass(byClass);
    list=LazyList.addArray(list,handlers);
  }
  return list;
}
