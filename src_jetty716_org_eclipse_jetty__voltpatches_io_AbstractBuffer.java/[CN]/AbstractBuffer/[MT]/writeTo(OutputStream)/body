{
  byte[] array=array();
  if (array != null) {
    out.write(array,getIndex(),length());
  }
 else {
    int len=this.length();
    byte[] buf=new byte[len > 1024 ? 1024 : len];
    int offset=_get;
    while (len > 0) {
      int l=peek(offset,buf,0,len > buf.length ? buf.length : len);
      out.write(buf,0,l);
      offset+=l;
      len-=l;
    }
  }
  clear();
}
