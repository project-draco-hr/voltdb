{
  if (isReadOnly())   throw new IllegalStateException(__READONLY);
  int s=markIndex() >= 0 ? markIndex() : getIndex();
  if (s > 0) {
    byte array[]=array();
    int length=putIndex() - s;
    if (length > 0) {
      if (array != null)       System.arraycopy(array(),s,array(),0,length);
 else       poke(0,peek(s,length));
    }
    if (markIndex() > 0)     setMarkIndex(markIndex() - s);
    setGetIndex(getIndex() - s);
    setPutIndex(putIndex() - s);
  }
}
