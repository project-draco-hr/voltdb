{
  ELTProtoMessage m1, m2;
  m1=new ELTProtoMessage(1,2);
  ByteBuffer b=ByteBuffer.allocate(0);
  m1.pollResponse(1000,b);
  ByteBuffer bm1=m1.toBuffer();
  FastDeserializer fdsm1=new FastDeserializer(bm1);
  assertEquals(m1.serializableBytes(),fdsm1.readInt());
  m2=ELTProtoMessage.readExternal(fdsm1);
  assertTrue(m2.isPollResponse());
  assertMsgType(m2,ELTProtoMessage.kPollResponse);
  assertEquals(1000,m2.getAckOffset());
  assertEquals(0,m2.getData().capacity());
  assertEquals(1,m2.getPartitionId());
  assertEquals(2,m2.getTableId());
}
