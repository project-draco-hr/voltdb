{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream ps=new PrintStream(baos);
  PrintStream original=System.out;
  try {
    System.setOut(ps);
    List<String> directories=new ArrayList<String>();
    directories.add(TMPDIR);
    Set<String> snapshotNames=new HashSet<String>();
    snapshotNames.add(nonce);
    SnapshotVerifier.verifySnapshots(directories,snapshotNames,expectHashinator);
    ps.flush();
    String reportString=baos.toString("UTF-8");
    boolean success=false;
    if (expectSuccess) {
      success=reportString.startsWith("Snapshot valid\n");
    }
 else {
      success=reportString.startsWith("Snapshot corrupted\n");
    }
    if (!onlyReportSuccess) {
      if (!success) {
        fail(reportString);
      }
    }
    return success;
  }
 catch (  UnsupportedEncodingException e) {
  }
 finally {
    System.setOut(original);
  }
  return false;
}
