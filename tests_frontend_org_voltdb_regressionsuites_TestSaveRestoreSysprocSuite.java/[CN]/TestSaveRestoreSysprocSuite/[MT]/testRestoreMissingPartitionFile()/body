{
  if (isValgrind())   return;
  int num_replicated_items=1000;
  int num_partitioned_items=126;
  Client client=getClient();
  VoltTable repl_table=createReplicatedTable(num_replicated_items,0,null);
  VoltTable partition_table=createPartitionedTable(num_partitioned_items,0);
  loadTable(client,"REPLICATED_TESTER",true,repl_table);
  loadTable(client,"PARTITION_TESTER",false,partition_table);
  saveTablesWithDefaultOptions(client);
  m_config.shutDown();
  String filename=TESTNONCE + "-PARTITION_TESTER-host_0.vpt";
  File item_file=new File(TMPDIR,filename);
  assertTrue(item_file.delete());
  m_config.startUp();
  client=getClient();
  VoltTable resultTable=null;
  try {
    client.callProcedure("@SnapshotRestore",TMPDIR,TESTNONCE);
  }
 catch (  ProcCallException e) {
    resultTable=e.getClientResponse().getResults()[0];
    assertEquals(ClientResponse.OPERATIONAL_FAILURE,e.getClientResponse().getStatus());
  }
  assertTrue(resultTable.advanceRow());
  assertTrue(resultTable.getString("ERR_MSG").equals("Save data contains no information for table PARTITION_TESTER"));
}
