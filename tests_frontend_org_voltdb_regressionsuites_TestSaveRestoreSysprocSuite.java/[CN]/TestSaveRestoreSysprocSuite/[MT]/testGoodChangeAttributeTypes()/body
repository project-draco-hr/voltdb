{
  System.out.println("Starting testGoodChangeAttributeTypes");
  Client client=getClient();
  VoltTable change_types=new VoltTable(new ColumnInfo("ID",VoltType.INTEGER),new ColumnInfo("BECOMES_INT",VoltType.TINYINT),new ColumnInfo("BECOMES_FLOAT",VoltType.INTEGER),new ColumnInfo("BECOMES_TINY",VoltType.INTEGER));
  change_types.addRow(0,100,100,100);
  change_types.addRow(1,VoltType.NULL_TINYINT,VoltType.NULL_INTEGER,VoltType.NULL_INTEGER);
  loadTable(client,"CHANGE_TYPES",true,change_types);
  saveTablesWithDefaultOptions(client);
  validateSnapshot(true);
  m_config.shutDown();
  CatalogChangeSingleProcessServer config=(CatalogChangeSingleProcessServer)m_config;
  SaveRestoreTestProjectBuilder project=new SaveRestoreTestProjectBuilder();
  project.addDefaultProcedures();
  project.addDefaultPartitioning();
  project.addSchema(SaveRestoreTestProjectBuilder.class.getResource("saverestore-altered-ddl.sql"));
  config.recompile(project);
  m_config.startUp();
  client=getClient();
  try {
    client.callProcedure("@SnapshotRestore",TMPDIR,TESTNONCE);
  }
 catch (  Exception ex) {
    ex.printStackTrace();
    fail("SnapshotRestore exception: " + ex.getMessage());
  }
  client.callProcedure("@Statistics","table",0);
  VoltTable[] change_results=client.callProcedure("SaveRestoreSelect","CHANGE_TYPES").getResults();
  VoltTableRow row=change_results[0].fetchRow(0);
  assertEquals(100,row.getLong(1));
  assertEquals(100.0,row.getDouble(2));
  assertEquals(100,row.getLong(3));
  row=change_results[0].fetchRow(1);
  row.getLong(1);
  assertTrue(row.wasNull());
  row.getDouble(2);
  assertTrue(row.wasNull());
  row.getLong(3);
  assertTrue(row.wasNull());
  config.revertCompile();
}
