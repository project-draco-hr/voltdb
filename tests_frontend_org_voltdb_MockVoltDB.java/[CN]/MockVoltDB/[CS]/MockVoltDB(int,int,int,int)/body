{
  try {
    JSONObject obj=new JSONObject();
    JSONArray jsonArray=new JSONArray();
    jsonArray.put("127.0.0.1");
    obj.put("interfaces",jsonArray);
    obj.put("clientPort",clientPort);
    obj.put("adminPort",adminPort);
    obj.put("httpPort",httpPort);
    obj.put("drPort",drPort);
    m_localMetadata=obj.toString(4);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  m_catalog=new Catalog();
  m_catalog.execute("add / clusters " + m_clusterName);
  m_catalog.execute("add " + m_catalog.getClusters().get(m_clusterName).getPath() + " databases "+ m_databaseName);
  Cluster cluster=m_catalog.getClusters().get(m_clusterName);
  cluster.setHeartbeattimeout(10000);
  assert(cluster != null);
  m_statsAgent=new StatsAgent();
  Mailbox mbox=m_statsAgent.getMailbox(m_hostMessenger,1);
  MockMailbox.postoffice.get(VoltDB.STATS_MAILBOX_ID).put(1,mbox);
  MockMailbox mailbox=new MockMailbox();
  MockMailbox.registerMailbox(1,VoltDB.AGREEMENT_MAILBOX_ID,mailbox);
  try {
    m_agreementSite=new AgreementSite(1,new HashSet<Integer>(Arrays.asList(1)),1,new HashSet<Integer>(),mailbox,new InetSocketAddress(2181),null,false);
    m_agreementSite.start();
    m_zk=org.voltdb.agreement.ZKUtil.getClient("localhost:2181",60 * 1000);
    m_snapshotCompletionMonitor.init(m_zk);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
