{
  Index index;
  Index primaryIndex;
  int[] primaryKey;
  boolean isSeqScan;
  index=rangeIndex;
  primaryIndex=rangeTable.getPrimaryIndex();
  primaryKey=rangeTable.getPrimaryKey();
  isSeqScan=indexCondition == null;
  if (index == null)   index=primaryIndex;
  if (index == primaryIndex && primaryKey.length == 0)   isSeqScan=true;
  VoltXMLElement scan=new VoltXMLElement("tablescan");
  scan.attributes.put("table",rangeTable.getName().name);
  if ((index != null) && (isSeqScan == false)) {
    String indexName=(index.getName() == null ? "UNNAMED" : index.getName().name);
    scan.attributes.put("index",indexName);
  }
  if (tableAlias != null && !rangeTable.getName().name.equals(tableAlias)) {
    scan.attributes.put("alias",tableAlias.name);
  }
  if (isLeftJoin || isRightJoin) {
    scan.attributes.put("isouterjoin","true");
  }
  Expression cond=indexCondition;
  if (indexEndCondition != null) {
    if (cond != null) {
      cond=new ExpressionLogical(OpTypes.AND,cond,indexEndCondition);
    }
 else {
      cond=indexEndCondition;
    }
  }
  if (nonIndexJoinCondition != null) {
    if (cond != null) {
      cond=new ExpressionLogical(OpTypes.AND,cond,nonIndexJoinCondition);
    }
 else {
      cond=nonIndexJoinCondition;
    }
  }
  if (nonIndexWhereCondition != null) {
    if (cond != null) {
      cond=new ExpressionLogical(OpTypes.AND,cond,nonIndexWhereCondition);
    }
 else {
      cond=nonIndexWhereCondition;
    }
  }
  if (indexEndCondition != null) {
    VoltXMLElement postexp=new VoltXMLElement("postexp");
    scan.children.add(postexp);
    assert(postexp != null);
    VoltXMLElement postexpchild=cond.voltGetXML(session);
    postexp.children.add(postexpchild);
    assert(postexpchild != null);
  }
  return scan;
}
