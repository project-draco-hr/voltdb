{
  if (!assertionsOn || m_closed)   return;
  int numObjects=0;
  for (  PBDSegment segment : m_segments) {
    final boolean wasClosed=segment.isClosed();
    try {
      numObjects+=segment.getNumEntries() - segment.readIndex();
    }
 catch (    Exception e) {
      Throwables.propagate(e);
    }
    if (wasClosed) {
      try {
        segment.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
  assert(numObjects == m_numObjects);
}
