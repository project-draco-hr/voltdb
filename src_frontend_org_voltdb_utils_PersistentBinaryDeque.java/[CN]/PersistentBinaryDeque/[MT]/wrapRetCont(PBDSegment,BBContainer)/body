{
  return new BBContainer(retcont.b()){
    private boolean m_discarded=false;
    @Override public void discard(){
      checkDoubleFree();
      if (m_discarded) {
        LOG.error("PBD Container discarded more than once");
        return;
      }
      m_discarded=true;
      retcont.discard();
      segment.m_discardCount++;
      assert(m_closed || m_segments.contains(segment));
      if (m_closed)       return;
      try {
        if (segment.m_discardCount == segment.getNumEntries()) {
          if (segment != m_segments.peekLast()) {
            m_segments.remove(segment);
            segment.closeAndDelete();
          }
        }
      }
 catch (      IOException e) {
        LOG.error("Exception closing and deleting PBD segment",e);
      }
    }
  }
;
}
