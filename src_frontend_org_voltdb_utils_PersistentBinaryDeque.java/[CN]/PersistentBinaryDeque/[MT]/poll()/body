{
  assert(preconditions());
  if (m_writeSegment == null) {
    throw new IOException("Closed");
  }
  DequeSegment segment=m_finishedSegments.get(m_currentPollSegmentIndex);
  if (segment == null) {
    if (!m_writeSegment.m_index.equals(m_currentPollSegmentIndex)) {
      System.out.println("oops");
    }
    assert(m_writeSegment.m_index.equals(m_currentPollSegmentIndex));
    if (m_writeSegment.getNumEntries() > 0) {
      openNewWriteSegment();
      return poll();
    }
 else {
      return null;
    }
  }
  BBContainer retval=segment.poll();
  assert(postconditions());
  return retval;
}
