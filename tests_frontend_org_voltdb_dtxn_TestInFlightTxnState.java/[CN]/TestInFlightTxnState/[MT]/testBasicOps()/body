{
  InFlightTxnState state1=createTxnState(1,new int[]{2,3,1});
  assertEquals(3,state1.m_outstandingCoordinators.size());
  assertEquals(3,state1.m_outstandingResponses);
  assertFalse(state1.hasAllResponses());
  InFlightTxnState state2=createTxnState(2,new int[]{2});
  assertEquals(1,state2.m_outstandingCoordinators.size());
  assertEquals(1,state2.m_outstandingResponses);
  assertFalse(state2.hasAllResponses());
  ClientResponseImpl cri=new ClientResponseImpl();
  state1.addFailedOrRecoveringResponse(3);
  assertEquals(2,state1.m_outstandingCoordinators.size());
  assertEquals(2,state1.m_outstandingResponses);
  assertFalse(state1.hasAllResponses());
  state1.addResponse(2,cri);
  assertEquals(1,state1.m_outstandingCoordinators.size());
  assertEquals(1,state1.m_outstandingResponses);
  assertFalse(state1.hasAllResponses());
  state1.addResponse(1,cri);
  assertEquals(0,state1.m_outstandingCoordinators.size());
  assertEquals(0,state1.m_outstandingResponses);
  assertTrue(state1.hasAllResponses());
  assertTrue(state1.hasSentResponse());
}
