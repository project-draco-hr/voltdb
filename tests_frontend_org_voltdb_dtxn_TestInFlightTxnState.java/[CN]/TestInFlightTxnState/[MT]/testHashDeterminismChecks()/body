{
  VoltDB.ignoreCrash=true;
  InFlightTxnState state=createTxnState(1,new int[]{3,1},true,true);
  ClientResponseImpl cri1=new ClientResponseImpl();
  ClientResponseImpl cri2=new ClientResponseImpl();
  cri1.setHash(0);
  cri2.setHash(1);
  state.addResponse(1,cri1);
  try {
    state.addResponse(3,cri2);
    fail("Mismatched hash in response should have failed");
  }
 catch (  AssertionError e) {
  }
  VoltDB.wasCrashCalled=false;
  state=createTxnState(1,new int[]{3,1},true,false);
  cri1=new ClientResponseImpl();
  cri2=new ClientResponseImpl();
  cri1.setHash(0);
  cri2.setHash(1);
  state.addResponse(1,cri1);
  try {
    state.addResponse(3,cri2);
    fail("Mismatched hash in response should have failed");
  }
 catch (  AssertionError e) {
  }
  VoltDB.wasCrashCalled=false;
  state=createTxnState(1,new int[]{3,1},false,false);
  cri1=new ClientResponseImpl();
  cri2=new ClientResponseImpl();
  cri1.setHash(0);
  cri2.setHash(1);
  state.addResponse(1,cri1);
  try {
    state.addResponse(3,cri2);
    fail("Mismatched hash in response should have failed");
  }
 catch (  AssertionError e) {
  }
  VoltDB.wasCrashCalled=false;
  state=createTxnState(1,new int[]{3,1},false,false);
  cri1=new ClientResponseImpl();
  cri2=new ClientResponseImpl();
  cri1.setHash(1);
  cri2.setHash(1);
  state.addResponse(1,cri1);
  state.addResponse(3,cri2);
  assertFalse(VoltDB.wasCrashCalled);
  VoltDB.ignoreCrash=false;
}
