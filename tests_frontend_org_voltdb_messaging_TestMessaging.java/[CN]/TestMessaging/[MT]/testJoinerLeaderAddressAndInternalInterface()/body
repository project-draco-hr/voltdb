{
  MockVoltDB mockVoltDB=new MockVoltDB();
  mockVoltDB.shouldIgnoreCrashes=true;
  VoltDB.replaceVoltDBInstanceForTest(mockVoltDB);
  VoltDB.Configuration config=new VoltDB.Configuration();
  mockVoltDB.setConfig(config);
  SocketJoiner joiner=new SocketJoiner(ConnectionUtil.getLocalAddress(),1,0,0,null);
  joiner.start();
  joiner.join();
  assertTrue(mockVoltDB.getCrashCount() == 0);
  config.m_internalInterface=ConnectionUtil.getLocalAddress().getHostAddress();
  mockVoltDB.setConfig(config);
  joiner=new SocketJoiner(ConnectionUtil.getLocalAddress(),1,0,0,null);
  joiner.start();
  joiner.join();
  assertTrue(mockVoltDB.getCrashCount() == 0);
  config.m_internalInterface=ConnectionUtil.getLocalAddress().getHostName();
  mockVoltDB.setConfig(config);
  joiner=new SocketJoiner(ConnectionUtil.getLocalAddress(),1,0,0,null);
  joiner.start();
  joiner.join();
  assertTrue(mockVoltDB.getCrashCount() == 0);
  config.m_internalInterface="255.255.255.255";
  mockVoltDB.setConfig(config);
  joiner=new SocketJoiner(ConnectionUtil.getLocalAddress(),1,0,0,null);
  joiner.start();
  joiner.join();
  assertTrue(mockVoltDB.getCrashCount() == 1);
  mockVoltDB.shutdown(null);
}
