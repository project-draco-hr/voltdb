{
  ArrayDeque<HandledFault> handledFaults;
synchronized (this) {
    handledFaults=new ArrayDeque<HandledFault>(m_handledFaults);
    m_handledFaults.clear();
  }
  while (!handledFaults.isEmpty()) {
    HandledFault hf=handledFaults.poll();
    if (!m_faultHandlersData.containsKey(hf.m_handler)) {
      hostLog.fatal("A handled fault was reported for a handler that is not registered");
      VoltDB.crashVoltDB();
    }
    boolean removed=m_faultHandlersData.get(hf.m_handler).m_pendingFaults.remove(hf.m_fault);
    if (!removed) {
      hostLog.fatal("A handled fault was reported that was not pending for the provided handler");
      VoltDB.crashVoltDB();
    }
  }
}
