{
  if (m_partitionDetectionTriggered) {
    return null;
  }
  HashMap<FaultType,HashSet<VoltFault>> faultsMap=new HashMap<FaultType,HashSet<VoltFault>>();
  while (!pendingFaults.isEmpty()) {
    VoltFault fault=pendingFaults.poll();
    if (isKnownFault(fault)) {
      hostLog.debug("Fault is being dropped because it is already known " + fault);
      continue;
    }
    HashSet<VoltFault> faults=faultsMap.get(fault.getFaultType());
    if (faults == null) {
      faults=new HashSet<VoltFault>();
      faultsMap.put(fault.getFaultType(),faults);
    }
    boolean added=faults.add(fault);
    assert(added);
  }
  return faultsMap;
}
