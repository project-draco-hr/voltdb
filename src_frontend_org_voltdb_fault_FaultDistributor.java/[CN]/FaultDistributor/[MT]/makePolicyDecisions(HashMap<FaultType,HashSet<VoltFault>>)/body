{
  if (!m_partitionDetectionEnabled) {
    return newFaults;
  }
  if (m_partitionDetectionEnabled) {
    HashSet<VoltFault> knownnfs=m_knownFaults.get(FaultType.NODE_FAILURE);
    final int ttlNodeCnt=m_catalogContext.numberOfNodes;
    final int downNodeCnt=m_catalogContext.siteTracker.getAllDownHosts().size();
    final int prevSurvivorCnt=ttlNodeCnt - downNodeCnt;
    final int ttlNodeFaults=knownnfs.size();
    if (ttlNodeFaults * 2 >= prevSurvivorCnt) {
      HashSet<VoltFault> ppdFaults=new HashSet<VoltFault>();
      HashSet<VoltFault> newnfs=newFaults.get(FaultType.NODE_FAILURE);
      for (      VoltFault nf : newnfs) {
        VoltFault ppd=new ClusterPartitionFault((NodeFailureFault)nf);
        ppdFaults.add(ppd);
        newFaults.put(FaultType.CLUSTER_PARTITION,ppdFaults);
      }
      newFaults.remove(FaultType.NODE_FAILURE);
    }
  }
  return newFaults;
}
