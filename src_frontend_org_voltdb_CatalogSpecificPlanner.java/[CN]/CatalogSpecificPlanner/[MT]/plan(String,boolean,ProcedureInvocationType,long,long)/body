{
  final SettableFuture<AdHocPlannedStmtBatch> retval=SettableFuture.create();
  AdHocPlannerWork work=new AdHocPlannerWork(-1,false,0,0,"",false,null,sql,Arrays.asList(new String[]{sql}),multipart ? null : 0,m_catalogContext,true,!multipart,type,originalTxnId,originalUniqueId,new AsyncCompilerWorkCompletionHandler(){
    @Override public void onCompletion(    AsyncCompilerResult result){
      retval.set((AdHocPlannedStmtBatch)result);
    }
  }
);
  m_agent.compileAdHocPlanForProcedure(work);
  return retval;
}
