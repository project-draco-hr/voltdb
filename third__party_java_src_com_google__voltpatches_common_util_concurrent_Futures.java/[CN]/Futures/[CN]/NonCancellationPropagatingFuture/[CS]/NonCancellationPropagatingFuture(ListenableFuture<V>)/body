{
  checkNotNull(delegate);
  addCallback(delegate,new FutureCallback<V>(){
    @Override public void onSuccess(    V result){
      set(result);
    }
    @Override public void onFailure(    Throwable t){
      if (delegate.isCancelled()) {
        cancel(false);
      }
 else {
        setException(t);
      }
    }
  }
,sameThreadExecutor());
}
