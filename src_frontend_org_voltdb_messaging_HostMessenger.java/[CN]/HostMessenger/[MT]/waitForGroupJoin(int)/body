{
  if (!m_initialized) {
    try {
      m_joiner.join(timeout);
      if (!m_joiner.getSuccess()) {
        if (timeout == 0) {
          new VoltLogger("HOST").fatal("The joiner thread was not successful");
        }
 else {
          new VoltLogger("HOST").fatal("Timed out waiting for other nodes to connect. It is safe to retry rejoin.");
        }
        VoltDB.crashVoltDB();
      }
      if (m_joiner.isAlive()) {
        VoltDB.crashVoltDB();
      }
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
    m_localHostId=m_joiner.getLocalHostId();
    Hashtable<Integer,SocketChannel> sockets=m_joiner.getHostsAndSockets();
    for (    Integer hostId : sockets.keySet()) {
      SocketChannel socket=sockets.get(hostId);
      try {
        socket.socket().setSendBufferSize(1024 * 1024 * 2);
        socket.socket().setReceiveBufferSize(1024 * 1024 * 2);
      }
 catch (      SocketException e) {
        e.printStackTrace();
      }
      ForeignHost fhost=null;
      try {
        fhost=new ForeignHost(this,hostId,socket);
      }
 catch (      java.io.IOException e) {
        e.printStackTrace();
      }
      m_foreignHosts[hostId]=fhost;
    }
    m_initialized=true;
  }
  HashSet<Integer> downHosts=new HashSet<Integer>();
  for (int ii=0; ii < (m_foreignHosts.length - 1); ii++) {
    if (m_foreignHosts[ii] == null && ii != m_localHostId) {
      downHosts.add(ii);
    }
  }
  return new Object[]{m_joiner.m_timestamp,m_joiner.m_addr,downHosts};
}
