{
  if (_closed)   throw new IOException("Closed");
  if (!_generator.isOpen())   throw new EofException();
  while (_generator.isBufferFull()) {
    _generator.blockForOutput(_maxIdleTime);
    if (_closed)     throw new IOException("Closed");
    if (!_generator.isOpen())     throw new EofException();
  }
  _generator.addContent(buffer,Generator.MORE);
  if (_generator.isBufferFull())   flush();
  if (_generator.isContentWritten()) {
    flush();
    close();
  }
  while (buffer.length() > 0 && _generator.isOpen())   _generator.blockForOutput(_maxIdleTime);
}
